!function(a){var b=0,c={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,caps_lock:20,escape:27,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:124,number:[48,49,50,51,52,53,54,55,56,57],equalSign:187,comma:188,dash:189,pause_break:19,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,del:46,numpad:[96,97,98,99,100,101,102,103,104,105],isNumber:function(a){if("number"!=typeof a)return!1;var b=a>=96&&105>=a,c=a>=48&&57>=a;return b||c}},d={keycodes:c,escape:function(a){var b=/[&<>"']/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return null==a?"":(""+a).replace(b,function(a){return c[a]})},unescape:function(a){var b=/(&amp;|&lt;|&gt;|&quot;|&#x27;)/g,c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"};return null==a?"":(""+a).replace(b,function(a){return c[a]})},toJSON:function(a){return a?JSON.stringify(a):""},fromJSON:function(a){return a?JSON.parse(a):null},guid:function(){return"eba-ui-"+ ++b},getById:function(a,b){return d.get("#"+a,b)},get:function(b,c){var d=a(b,c);return d.data("model")},parseUi:function(a){this.web.parseUi(a)}};window.ebaui=d,a(function(){d.parseUi();var b=function(a){var b=window[a];b&&"function"==typeof b&&b()};b("initPage"),a(window).on("load",function(){b("loadPage")}),a(window).on("unload",function(){b("unloadPage")})})}(jQuery),function(a,b){var c={urlRoot:"",formControls:[],controls:[],templateString:"",templateUrl:"",_loadRemoteTemplates:function(c,d){var e=this,f=e.templateUrl;if(!e.urlRoot)for(var g=/(.*)\/(ebaui\.js|ebaui(-\d\.\d\.\d)?\.js|ebaui(-\d\.\d\.\d)?\.min\.js)(.*)$/,h=document.getElementsByTagName("script"),i=0,j=h.length;j>i;i++){var k=h[i].src;if(g.test(k)){var l=g.exec(k),m=l[1];"/"!=m.substring(m.length-1,m.length)&&(m+="/"),e.urlRoot=m;break}}e.templateUrl||(f=e.urlRoot+"ebaui.templates.html"),f?a.ajax({type:"GET",dataType:"html",url:f,async:!1,success:function(a){c(a)}}):(b.log("loadTemplates error"),"function"==typeof d&&d())},_loadLocalTemplates:function(a){a(this.templateString)},loadTemplates:function(a,b){var c=this;c.templateString?c._loadLocalTemplates(a,b):c._loadRemoteTemplates(a,b)},registerControl:function(a){a&&this.controls.push(a.toLocaleLowerCase())},registerFormControl:function(a){a&&(a=a.toLocaleLowerCase(),this.controls.push(a),this.formControls.push(a))},parseControls:function(b){for(var c=this.controls,d=0,e=c.length;e>d;d++){var f=c[d],g='[data-role="'+f+'"]',h=a(g,b);h.size()>0&&h[f]&&h[f]()}},parseUi:function(b){var c=this;c.parser,b=b||document,c.loadTemplates(function(d){var e="#ebaui-templates",f=a(e);0==f.size()&&(f=a('<div id="ebaui-templates" style="display:none;"></div>').appendTo(document.body)),f.html(d),c.parseControls(b)})},support:{},validationRules:{}};b.web=c,b.mask=function(b,c,d,e){return c=c?c:"",a(b,e).mask(c,d)},b.unmask=function(b,c){return a(b,c).unmask()},b.isMasked=function(b,c){return a(b,c).isMasked()},b.alert=function(a){vex.dialog.alert({title:"提示",iconCls:"icon-warning-sign",className:"vex-theme-default",message:a})},b.confirm=function(b){var c=a.extend({},{title:"确认",iconCls:"icon-question-sign",className:"vex-theme-default",buttons:[vex.dialog.buttons.NO,vex.dialog.buttons.YES]},b);vex.dialog.confirm(c)},b.prompt=function(b){b=a.extend({},{title:"提示",className:"vex-theme-default",buttons:[vex.dialog.buttons.NO,vex.dialog.buttons.YES]},b),vex.dialog.prompt(b)},b.win=function(b){if(b&&b.url&&!b.content){var c="",d=b.url?!0:!1;c=d?"":a(b.content).html();var e="",f='<div class="vex-dialog-form" style="height:100%;"><div class="vex-dialog-title"><i class="{0}"></i>{1}</div>{2}<div class="vex-close"></div></div>'.replace("{0}",b.iconCls).replace("{1}",b.title);d?(e='<iframe src="{0}" style="width:100%;" frameborder="0" scrolling="no"></iframe>'.replace("{0}",b.url),b.content=f.replace("{2}",e)):(e=a(b.content).html(),b.content=f.replace("{2}",e));var g={title:"",content:"",width:800,height:600,className:"vex-theme-default",showCloseButton:!0,overlayClosesOnClick:!1,beforeclose:a.noop,afterclose:a.noop};b=a.extend(g,b);var h=vex.open(b),i=h.parent();h.css({border:"1px #eee solid",width:b.width,height:b.height}),i.css({"padding-top":"50px","padding-bottom":"0"}),d&&(titleH=a(".vex-dialog-title",h).outerHeight(),a("iframe",h).css("height",h.height()-titleH))}},b.ajax=jQuery.ajax,b.httpGet=jQuery.get,b.httpPost=jQuery.post}(jQuery,ebaui),function(a,b){b.placeholder="placeholder"in document.createElement("input")}(jQuery,ebaui.web.support),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"email",parameters:[],message:"Please enter a valid email address.",validate:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)}},b.email=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"required",parameters:[],message:"This field is required.",validate:function(a){var b=Object.prototype.toString,c=b.call(a);return"[object String]"==c||"[object Array]"==c?a.length>0:"[object Boolean]"==c||a===!0||a===!1?!0:a?!0:!1}},b.required=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"url",parameters:[],message:"Please enter a valid URL.",validate:function(a){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}},b.url=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"len",parameters:[0],_parameterInvalidException:"Max length must be less than min length, please set a valid validator parameters.",_originalMessage:"Please enter a value between {0} and {1}.",message:"Please enter a value between {0} and {1}.",validate:function(a){var b=this;if(0==b.parameters.length)return!0;var c=!1,d=b.parameters.length,e=0,f=b.parameters[0];if(d>1&&(e=b.parameters[1]),f>e)throw b._parameterInvalidException;if(a){var g=a.toString();c=d>1&&f!=e?g.length>f&&g.length<e:d>1&&f==e?g.length==f:g.length>f}else c=!1;return b.message=b._originalMessage.replace("{0}",f).replace("{1}",d>1?e:""),c}},b.len=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c._originalMessage=b||"",c.parameters=a||[]}c.prototype={name:"rng",parameters:[0],_originalMessage:"Please enter a value between {0} ~ {1}.",message:"Please enter a value between {0} ~ {1}.",validate:function(a){var b=this,a=parseFloat(a),c=!1,d=b.parameters.length,e=0,f=b.parameters[0];d>1&&(e=b.parameters[1]),b.message=b._originalMessage.replace("{0}",f),b.message=b.message.replace("{1}",d>1?e:"");var g=/^\d+(\.\d+)?$/i;return g.test(a.toString())?c:0==b.parameters.length?!0:(c=a>f,d>1&&(e=b.parameters[1],c=c&&e>a),c)}},b.rng=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={_factors:[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],_checkcode:["1","0","X","9","8","7","6","5","4","3","2"],name:"id",parameters:[],message:"Please enter a valid id number.",validate:function(a){var b=/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/.test(a);if(!b)return!1;var c=a.toString();if(18==c.length){for(var d=0,e=0,f=0;17>f;f++)e+=parseInt(c[f])*this._factors[f];d=e%11,b=b&&this._checkcode[d]==c[17]}return b}},b.id=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"zip",parameters:[],message:"Please enter a valid postal code.",validate:function(a){return a?/^[1-9]\d{5}$/.test(a):!1}},b.zip=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"tel",parameters:[],message:"Please enter a valid telephone number.",validate:function(a){return a?/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(a):!1}},b.tel=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"cn",parameters:[],message:"Please only enter Chinese characters.",validate:function(a){return a?/[\u4e00-\u9fa5]+/.test(a)||/[^\x00-\xff]+/.test(a):!1}},b.cn=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"digit",parameters:[],message:"Please only enter digit characters.",validate:function(a){return null==a||void 0==a?!1:/\d+/.test(a.toString())}},b.digit=c}(jQuery,ebaui.web.validationRules),function(a,b){function c(a,b){var c=this;c.message=b||"",c.parameters=a||[]}c.prototype={name:"tel",parameters:[],message:"Please enter a valid mobilephone number.",validate:function(a){return a?/^(?:13\d|15[89]|18[019])-?\d{5}(\d{3}|\*{3})$/.test(a):!1}},b.mobi=c}(jQuery,ebaui.web.validationRules),function($,rules){function RemoteValidator(params,msg){var me=this;if(me.message=msg||"",!params||!params.length)throw me._parameterInvalidException;me.parameters=params;for(var i=0;i<params.length;i++)for(var ajaxConfig=me._ajaxConfig,paramItem=params[i],keyValuePair=paramItem.split("$"),j=0,l=keyValuePair.length;l>j;j++){var pair=keyValuePair[j],key=keyValuePair[0],value=keyValuePair[1];switch(key){case"url":ajaxConfig.url=value;break;case"dataType":ajaxConfig.dataType=value;break;case"token":me._token=value,ajaxConfig.data[value]="";break;case"pass":me._pass=eval(value);break;default:ajaxConfig.data[key]=value}}}RemoteValidator.prototype={name:"remote",_token:"",_ajaxConfig:{url:"",async:!1,dataType:"json",data:{}},_isTmpl:function(a){return/<%=value%>/i.test(a)},_pass:function(){return!1},_parameterInvalidException:"Please set a valid validator parameters.",parameters:[],message:"",validate:function(a){var b=this,c=!1,d={statusCode:{404:function(){c=!1}},success:function(d){c="function"==typeof b._pass?b._pass(a,d):!1},error:function(){b._isValid=!1}},e=b._ajaxConfig.data;e[b._token]=a,e.t=(new Date).getTime();var f=$.extend({},b._ajaxConfig,d);return $.ajax(f),c}},rules.remote=RemoteValidator}(jQuery,ebaui.web.validationRules),function(a){function b(){}var c=Array.prototype,d=c.slice,e=c.forEach,f=Object.prototype,g=f.toString;ebaui.control=function(b,c,d){var e,f,g,h={},i=b.split(".")[0];return b=b.split(".")[1],e=i+"-"+b,d||(d=c,c=ebaui.Control),ebaui[i]=ebaui[i]||{},g=new c,g.options=ebaui.control.extend({},g.options),a.each(d,function(b,d){return a.isFunction(d)?(h[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}(),void 0):(h[b]=d,void 0)}),f=ebaui[i][b]=function(a,b){return this._createControl?(arguments.length&&this._createControl(a,b),void 0):new f(a,b)},f.prototype=ebaui.control.extend(g,h,{constructor:f,_namespace:i,_controlName:b,_controlFullName:e}),ebaui.control.bridge(b,f),f},ebaui.control.bridge=function(b,c){b=b.toLocaleLowerCase(),a.fn[b]=function(b){return this.each(function(d,e){var f=a(e);f.attr("data-parsed")&&"true"==f.attr("data-parsed")||new c(b,e)})}},ebaui.control.extend=function(b){for(var c,e,f=d.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])e=f[g][c],f[g].hasOwnProperty(c)&&void 0!==e&&(b[c]=a.isPlainObject(e)?a.isPlainObject(b[c])?ebaui.control.extend({},b[c],e):ebaui.control.extend({},e):e);return b},b.prototype={options:{id:"",enabled:!0,visible:!0,focused:!1,width:0,height:0,top:0,left:0,position:""},_controlID:void 0,_namespace:"",_controlName:"",_controlFullName:"",_rootHtmlTmpl:"",_cssUnitRE:/^\d+(%|in|cm|mm|em|ex|pt|pc|px)?$/,_updateStyleWidth:function(){var a=this,b=a._$root;if(b){var c=a.width(),d=a.isNumber(c);if(!(d&&0>=c)){if(d&&c>0)return b.width(c),void 0;var e=a._cssUnitRE.exec(c);e[1]?b.css("width",c):b.css("width",c+"px")}}},_updateStyleHeight:function(){var a=this,b=a._$root;if(b){var c=a.height(),d=a.isNumber(c);if(!(d&&0>=c)){if(d&&c>0)return b.height(c),void 0;var e=a._cssUnitRE.exec(c);e[1]?b.css("height",c):b.css("height",c+"px")}}},_updateStyleTop:function(){var a=this,b=a._$root;if(b){var c=a.top();isNaN(c)||0==c||b.css("top",c+"px")}},_updateStyleLeft:function(){var a=this,b=a._$root;if(b){var c=a.left();isNaN(c)||0==c||b.css("left",c+"px")}},_updateStylePosition:function(){var a=this,b=a._$root;if(b){var c=a.position();c?b.css("position",c):b.css("position",null)}},_updateStyleTitle:function(){var a=this,b=a._$root;if(b){var c=a.title();c&&b.attr("title",c)}},_setupEvents:a.noop,_initControl:a.noop,_focus:a.noop,_blur:a.noop,_updateStyleEnabled:a.noop,_updateStyleFocused:a.noop,_updateStyleVisible:function(){var a=this;if(a._$root){var b=a.visible()?"show":"hide";a._$root[b]()}},_parseUi:function(b){var c=this;if(!c._rootHtmlTmpl)return null;var d=a(c._rootHtmlTmpl).html(),e=a(b),f=a(d);return e.replaceWith(f),f.attr({"data-name":c.name?c.name():"","data-parsed":"true"}),""!==c.id()&&f.attr("id",c.id()),f},_parseAttrOptions:function(b){var c=a(b),d=c.attr("id"),e=c.attr("name"),f=c.attr("title"),g={id:d?d:"",name:e?e:"",title:f?f:""};return g},_render:function(){var a=this;a._updateStyleWidth(),a._updateStyleHeight(),a._updateStylePosition(),a._updateStyleTop(),a._updateStyleLeft(),a._updateStyleEnabled(),a._updateStyleVisible(),a._updateStyleTitle()},_createControl:function(b,c){var d=this,e=a.extend({},d.options,d._parseDataOptions(c),d._parseAttrOptions(c));b&&(e=a.extend(e,b)),d.options=e,d._controlID=ebaui.guid(),d._$root=d._parseUi(c),d._initControl(),d._setupEvents(),d._render(),d._$root.data("model",d)},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b])},_getOption:function(a){return this.options[a]},_setOption:function(a,b){this.options[a]=b},_parseDataOptions:function(b){var c=a(b),d={};if(0==c.size())return d;var e=a.trim(c.attr("data-options"));if(e){var f=e.substring(0,1),g=e.substring(e.length-1);"{"!=f&&(e="{"+e),"}"!=g&&(e+="}"),d=new Function("return "+e)()}return d},namespace:function(){return this._namespace},controlName:function(){return this._controlName},controlFullName:function(){return this._controlFullName},id:function(){return this.options.id},enabled:function(a){var b=this;return b.isBoolean(a)?(b._setOption("enabled",a),b._updateStyleEnabled(),void 0):b.options.enabled},title:function(a){var b=this;return b.isString(a)?(b.options.title=a,void 0):b.options.title},visible:function(a){var b=this;return b.isBoolean(a)?(b._setOption("visible",a),b._updateStyleVisible(),void 0):b.options.visible},focusable:function(){return!1},focused:function(a){var b=this;return b.isBoolean(a)&&(b._setOption("focused",a),a?b._focus():b._blur(),b._updateStyleFocused()),b.options.focused},width:function(a){var b=this;return b.isNumber(a)?(b.options.width=a,b._updateStyleWidth(),void 0):b.options.width},height:function(a){var b=this;return b.isNumber(a)?(b.options.height=a,b._updateStyleHeight(),void 0):b.options.height},top:function(a){var b=this;return b.isNumber(a)?(b.options.top=a,b._updateStyleTop(),void 0):b.options.top},left:function(a){var b=this;return b.isNumber(a)?(b.options.left=a,b._updateStyleLeft(),void 0):b.options.left},position:function(b){var c=this;return b?(/absolute|fixed|relative|static|inherit|\s*/.test(b)&&(c.options.position=a.trim(b),c._updateStylePosition()),void 0):c.options.position},controlID:function(){return this._controlID},uiElement:function(){return this._$root},keys:function(a){var b=this;if(!b.isObject(a))throw new TypeError("Invalid object");var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(d);return c},compileTmpl:function(a,b){var c,d=/(.)^/,e={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},f={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\t|\u2028|\u2029/g,h=new RegExp([(e.escape||d).source,(e.interpolate||d).source,(e.evaluate||d).source].join("|")+"|$","g"),i=0,j="__p+='";a.replace(h,function(b,c,d,e,h){return j+=a.slice(i,h).replace(g,function(a){return"\\"+f[a]}),c&&(j+="'+\n((__t=("+c+"))==null?'':ebaui.escape(__t))+\n'"),d&&(j+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(j+="';\n"+e+"\n__p+='"),i=h+b.length,b}),j+="';\n",e.variable||(j="with(obj||{}){\n"+j+"}\n"),j="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+j+"return __p;\n";try{c=new Function(e.variable||"obj",j)}catch(k){throw k.source=j,k}if(b)return c(b);var l=function(a){return c.call(this,a)};return l.source="function("+(e.variable||"obj")+"){\n"+j+"}",l},each:function(a,b,c){var d=this;if(null!=a)if(e&&a.forEach===e)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;g>f;f++)if(b.call(c,a[f],f,a)===breaker)return}else for(var h=d.keys(a),f=0,g=h.length;g>f;f++)if(b.call(c,a[h[f]],h[f],a)===breaker)return},isEmpty:function(a){if(null===a||void 0===a)return!0;var b=this;return b.isBoolean(a)?a:b.isString(a)||b.isArray(a)?0==a.length:b.isNumber(a)&&!a?!0:!0},isNull:function(a){return null===a||void 0===a},isRegExp:function(a){return"[object RegExp]"==g.call(a)},isDate:function(a){return"[object Date]"==g.call(a)},isObject:function(a){return a===Object(a)},isFunc:function(a){return"[object Function]"==g.call(a)},isString:function(a){return"[object String]"==g.call(a)},isNumber:function(a){return"[object Number]"==g.call(a)},isArray:function(a){return"[object Array]"==g.call(a)},isBoolean:function(a){return a===!0||a===!1||"[object Boolean]"==g.call(a)},isUsingRemoteData:function(a){if(!a)throw"dataSource can not be null!";var b=this;return b.isArray(a)?!1:b.isObject(a)&&"url"in a?!0:!1},destroy:function(){}},ebaui.Control=b}(jQuery),function(a,b){b.web.registerControl("Dialog"),b.control("web.Dialog",{_vexDialogId:null,_vexOptions:{className:"vex-theme-default",showCloseButton:!0,overlayClosesOnClick:!1},_parseUi:function(b){var c=a(b);return this._vexOptions.content=c.html(),c},_initControl:function(){var c=this;c._$root;var d=c._vexOptions;if(d=a.extend(vex.defaultOptions,c._vexOptions,d),d.afterOpen=function(a){b.web.parseUi(a.$vexContent)},c._vexOptions=d,d.width=c.options.width,d.height=c.options.height,c.options.title&&(d.title=c.options.title),d.content='<div style="width:100%;height:100%;">'+d.content+"</div>",c.options.beforeclose){var e=c.options.beforeclose;d.beforeClose=function(){e(c,{})}}if(c.options.afterclose){var f=c.options.afterclose;d.afterClose=function(){f(c,{})}}},open:function(){var a=this,b=a._vexOptions,c=vex.open(b),d=c.parent();a._vexDialogId=d.data().vex.id,c.css({padding:"5px",border:"1px #eee solid","background-color":"#ddd",width:b.width,height:b.height}),d.css({"padding-top":"50px","padding-bottom":"0"})},close:function(){vex.close(this._vexDialogId)},options:{width:800,height:600,beforeclose:null,afterclose:null}})}(jQuery,ebaui),function($,ebaui){ebaui.control("web.FormElement",{_rootHtmlTmpl:"",_currVaidationState:0,_validationStates:{none:0,success:1,info:2,error:3,warning:4,busy:5},_updateStyleReadonly:$.noop,_stateClass:["","eba-success","eba-light","eba-error","eba-warning","eba-loading"],_stateIconCls:{"eba-success":"icon-ok","eba-light":"icon-lightbulb","eba-error":"icon-remove-circle","eba-warning":"icon-warning-sign","eba-loading":"icon-spinner icon-spin"},_errorCollection:{},_isValid:!0,_initValidators:function(){var a=this,b=a.options.validators;b&&(a._validators=a._parseValidators(b))},_parseValidator:function(rule){if(rule){var result=/([a-z_]+)(.*)/i.exec(rule),name=result[1],param=eval(result[2]),constructor=ebaui.web.validationRules[name];if(!constructor)return null;var validator=new constructor(param);return validator}},_parseValidators:function(a){var b=this;if(!a||!b.isArray(a))return[];for(var c=[],d=0,e=a.length;e>d;d++){var f=b._parseValidator(a[d]);f&&c.push(f)}return c},_doRenderStyleTip:function(a,b){var c=this;c.isEmpty(b)&&(b="");var d=c._$root,e=c._stateIconCls[a],f=$('[class*="border"]',d),g=f.next('i[class^="icon"]'),h=c._validationStates,i=c._stateClass;for(var j in h)d.removeClass(i[h[j]]);if(d.hasClass(a)||d.addClass(a),0==g.size()){var k='<i class="{0}" title="{1}"></i>'.replace("{0}",e).replace("{1}",b);f.after(k)}else g.attr({"class":e,title:b})},_clearValidationTips:function(){for(var a=this,b=a._$root,c=a._stateClass,d=0,e=c.length;e>d;d++){var f=c[d];if(f){var g=f+"icon";b.removeClass(f),$("span."+g,b).remove()}}},_renderStyleTips:function(a,b){var c=this,d="",e=c._stateClass,f=c._validationStates;switch(a){case f.success:d=e[f.success];break;case f.info:d=e[f.info];break;case f.error:d=e[f.error];break;case f.warning:d=e[f.warning];break;case f.busy:d=e[f.busy]}return d?(c._doRenderStyleTip(d,b),void 0):(c._clearValidationTips(b),void 0)},_updateStyleValidationResult:function(){var a=this;a.isValid()?a.success(""):a.error(a.errorTips())},_render:function(){var a=this;a._super(),a._updateStyleReadonly()},reset:$.noop,tips:function(a,b){var c=this;return c.isNumber(a)?(c.isString(b)||(b=""),a>-1&&6>a&&(c._currVaidationState=a,c._renderStyleTips(a,b)),void 0):c._currVaidationState},clearTips:function(){var a=this;a.tips(a._validationStates.none)},success:function(a){var b=this;b.tips(b._validationStates.success,a)},info:function(a){var b=this;b.tips(b._validationStates.info,a)},warning:function(a){var b=this;b.tips(b._validationStates.warning,a)},error:function(a){var b=this;b.tips(b._validationStates.error,a)},busy:function(a){var b=this;b.tips(b._validationStates.busy,a)},errorTips:function(){for(var a=this,b="",c=a.keys(a._errorCollection),d=0,e=c.length;e>d;d++)b+=a._errorCollection[c[d]],e-1>d&&(b+="\n");return b},validateOnChange:function(a){var b=this;return b.isBoolean(a)?(b._setOptions({validateOnChange:a}),void 0):b.options.validateOnChange},_validators:[],validators:function(){return this._validators},_indexOfValidator:function(a){if(!a)return-1;for(var b=this,c=-1,d=b._validators,e=0,f=d.length;f>e;e++)if(d[e].name===a){c=e;break}return c},hasValidator:function(a){return this._indexOfValidator(a)>-1},addValidator:function(a){if(a){var b=this,c=b._parseValidator(a);c&&!b.hasValidator(c.name)&&b._validators.push(c)}},removeValidator:function(a){var b=this,c=b._indexOfValidator(a);-1!=c&&b._validators.splice(c,1)},data:$.noop,name:function(){return this.options.name},readonly:function(a){var b=this;return b.isBoolean(a)?(b._setOptions({readonly:a}),b._updateStyleReadonly(),void 0):b.options.readonly},enterAsTab:function(a){var b=this;return b.isBoolean(a)?(b._setOptions({enterAsTab:a}),void 0):b.options.enterAsTab},isValid:function(){return this._isValid},validate:function(){var a=this,b=a.validators();if(0==b.length)return!0;a.busy();var c=a._errorCollection,d=a.value(),e=b[0],f=e.validate(d,e.parameters);f||(c[e.name]=e.message);for(var g=1,h=b.length;h>g;g++){var i=b[g];f=f&&i.validate(d,i.parameters),f||(c[i.name]=i.message)}return a._isValid=f,f?a.success(""):a.error(a.errorTips()),f},options:{name:"",value:"",readonly:!1,validateOnChange:!1,validation:"",messages:"",enterAsTab:!1}})}(jQuery,ebaui),function(a,b){var c=b.web.support.placeholder;b.web.registerFormControl("TextBox",!0),b.control("web.TextBox",b.web.FormElement,{_domSelector:{formInput:".eba-textbox-input",placeholder:".eba-placeholder-lable",icon:">i"},_rootHtmlTmpl:"#ebaui-template-textbox",_cssClass:{disabled:"eba-disabled",focused:"eba-textbox-focus",readonly:"eba-readonly"},_setupEvents:function(){var c=this,d=c._$root,e=c._$formInput,f=c._domSelector.formInput,g=c._domSelector.placeholder;d.bind("keydown",f,function(a){switch(a.which){case b.keycodes.enter:c.options.onenter(c,a);break;default:c.options.onkeydown(c,a)}}),d.bind("keyup",f,function(a){return c.options.onkeyup(c,a)}),d.on("change",f,function(){c.options.value=e.val(),c.options.onchange(c,{}),c.validateOnChange()&&c.validate()}),d.on("focus",f,function(a){return c._setOption("focused",!0),c._updateStyleFocused(),c.options.onfocus(c,a)}),d.on("blur",f,function(a){return c._setOption("focused",!1),c._updateStyleFocused(),c.options.onblur(c,a)}),d.on("click",g,function(){a(this).hide(),c._$formInput.focus()}),c._super()},_focus:function(){var a=this;a.enabled()&&!a.readonly()&&a._updateStyleFocused(),a._$formInput.focus()},_blur:function(){var a=this;a.enabled()&&a._updateStyleFocused(),a._$formInput.blur()},_updateStyleFocused:function(){var a=this,b=a.focused(),c=a.readonly(),d=a.enabled();b?(a._$root.addClass(a._cssClass.focused),d&&!c&&a._hidePlaceHolder()):(a._$root.removeClass(a._cssClass.focused),d&&a._showPlaceHolder())},_showPlaceHolder:function(){var b=this;if(!c){var d=a.trim(b._$formInput.val());d||a(b._domSelector.placeholder,b._$root).show()}},_hidePlaceHolder:function(){var b=this;c||a(b._domSelector.placeholder,b._$root).hide()},_updateStylePlaceHolder:function(){var b=this,d=b.placeHolder();if(c)return b._$formInput.attr("placeholder",d),void 0;var e=a(b._domSelector.placeholder,b._$root);e.size()>0?e.text(d):(e=a('<label for="" class="eba-placeholder-lable"></label>').text(d),b._$formInput.after(e))},_updateStyleEnabled:function(){var a=this;a.enabled()?(a._$root.removeClass(a._cssClass.disabled),a._$formInput.attr("disabled",null)):(a._$formInput.attr("disabled","disabled"),a._$root.removeClass(a._cssClass.focused),a._$root.addClass(a._cssClass.disabled))},_updateStyleReadonly:function(){var a=this,b=a.readonly();a.enabled()&&(b?(a._$root.addClass(a._cssClass.readonly),a._$formInput.attr("readonly","readonly")):(a._$root.removeClass(a._cssClass.readonly),a._$formInput.attr("readonly",null)))},_initControl:function(){var b=this;b._$formInput=a(b._domSelector.formInput,b._$root),b._initValidators();var c=b.name();c&&b._$formInput.attr("name",c),b._updateStylePlaceHolder()},_updateAttrMaxLen:function(){var a=this,b=a.maxLength();a._$formInput.attr("maxlength",b>0?b:null)},_updateAttrValue:function(){var a=this,b=a.value();a.isEmpty(b)||(a._$formInput.val(b),a._hidePlaceHolder())},_render:function(){var a=this;a._updateAttrMaxLen(),a._updateAttrValue(),a._updateStyleIcon(),a._super()},_updateStyleIcon:function(){var b=this,c=b.iconCls();if(c){a('[class$="border"]',b._$root).addClass("eba-textbox-icon");var d=a("eba-textbox-icon i",b._$root);if(d.size())d.attr("class",c);else{var e='<i class="{0}"></i>'.replace("{0}",c);a(e).insertBefore(b._$formInput)}}else a('[class$="border"]',b._$root).removeClass("eba-textbox-icon"),a("eba-textbox-icon i",b._$root).remove()},iconCls:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.iconCls=b,c._updateStyleIcon(),void 0):c.options.iconCls},maxLength:function(a){var b=this;if(!b.isNumber(a))return b.options.maxLength;var c=b._maxlength;if(a>0&&c>a){var d=b.value();b.value(d.substr(0,a))}b.options.maxLength=a,b._$formInput.attr("maxlength",a>0?a:null)},focusable:function(){return!0},placeHolder:function(a){var b=this,c="placeHolder";return b.isString(a)?(b.options[c]=a,b._updateStylePlaceHolder(),void 0):b.options[c]},_valueAccessor:function(a){var b=this;if(!b.isString(a))return b.options.value;var c=b.maxLength();c>0&&a.length>c&&(a=a.substr(0,c)),b.options.value=a,b._$formInput.val(a),a?b._hidePlaceHolder():b._showPlaceHolder(),b.options.onchange(b,{})},value:function(a){return this._valueAccessor(a)},data:function(a){return this._valueAccessor(a)},reset:function(){var a=this;a.value(""),a.errors={},a._isValid=!0,a.clearTips()},options:{position:"absolute",top:0,left:0,width:150,height:30,iconCls:"",placeHolder:"请输入...",maxLength:-1,onkeydown:a.noop,onkeyup:a.noop,onenter:a.noop,onfocus:a.noop,onblur:a.noop,onchange:a.noop,enterAsTab:!0}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("ButtonEdit",!0),b.control("web.ButtonEdit",b.web.TextBox,{_domSelector:{formInput:".eba-buttonedit-input",placeholder:".eba-placeholder-lable",icon:".eba-label-icon",btnClose:".eba-buttonedit-close",btnToggle:".eba-buttonedit-button"},_rootHtmlTmpl:"#ebaui-template-buttonedit",_cssClass:{disabled:"eba-buttonedit-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},_updateStyleReadonly:function(){var a=this,b=a.readonly(),c=a.showClose();a._super(),b?a._$btnToggle.hide():a._$btnToggle.show(),!b&&c&&(a._$btnClose.show(),a._$btnClose.css("display","inline-block"))},_setupEvents:function(){var c=this,d=c._$root,e=c._$formInput,f=this._domSelector;d.on("click",f.placeholder,function(){c.focused(!0)}),d.on("click",f.placeholder,function(){a(this).hide(),c._$formInput.focus()}),d.on("click",".eba-buttonedit-button",function(a){c.enabled()&&c.options.onbtnclick(c,a)}),d.on("click",f.btnClose,function(a){c.showClose()&&c.enabled()&&c.options.onclsclick(c,a)}),d.bind("keydown",f.formInput,function(a){return c.allowInput()?(c.options.onkeydown(c,a),void 0):!1}),d.bind("keyup",f.formInput,function(a){switch(c.text(e.val()),a.which){case b.keycodes.enter:c.options.onenter(c,a);break;default:c.options.onkeyup(c,a)}}),d.on("focus",f.formInput,function(){c._setOption("focused",!0),c._updateStyleFocused()}),d.on("blur",f.formInput,function(){c._setOption("focused",!1),c._updateStyleFocused()})},_initControl:function(){var b=this,c=b._$root,d=b._domSelector;b._$btnToggle=a(d.btnToggle,c),b._$btnClose=a(d.btnClose,c),b._super()},_render:function(){var a=this,b=a.text();a.isEmpty(b)||(a._$formInput.val(b),a._hidePlaceHolder()),a._updateStyleWidth(),a._updateStyleHeight(),a._updateStyleTop(),a._updateStyleLeft(),a._updateStyleEnabled(),a._updateStyleVisible(),a._updateStyleReadonly()},showClose:function(a){var b=this;return b.isBoolean(a)?(b._setOption("showClose",a),void 0):b._getOption("showClose")},text:function(a){var b=this;return b.isString(a)?(b._setOption("text",a),b._$formInput.val(a),a?b._hidePlaceHolder():b._showPlaceHolder(),void 0):b._getOption("text")},value:function(a){var b=this;return b.isNull(a)?b.options.value:(b.options.value=a,b.options.onchange(b,{}),void 0)},data:function(a){var b=this,c=b.textField(),d=b.valueField();if(!(a&&c in a&&d in a)){var e={};return e[c]=b.text(),e[d]=b.value(),e}b.text(a[c]),b.value(a[d])
},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,void 0):b.options.valueField},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,void 0):b.options.textField},allowInput:function(a){var b=this;return b.isBoolean(a)?(b.options.allowInput=a,void 0):b.options.allowInput},reset:function(){var a=this;a.errors={},a._isValid=!0,a.options.text="",a.options.value="",a._render()},options:{position:"absolute",width:150,height:21,allowInput:!0,text:"",value:"",valueField:"value",textField:"text",placeHolder:"请输入...",showClose:!1,onenter:a.noop,onkeydown:a.noop,onkeyup:a.noop,onbtnclick:a.noop,onclsclick:a.noop,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Password",!0),b.control("web.Password",b.web.TextBox,{_rootHtmlTmpl:"#ebaui-template-password",maxLength:a.noop,data:function(a){var b=this;return b.isString(a)?(b.options.value=a,b._$formInput.val(a),a?b._hidePlaceHolder():b._showPlaceHolder(),b.options.onchange(b,{}),void 0):b.options.value},value:function(a){var b=this;return b.isString(a)?(console.log("value"),console.log(a),b.options.value=a,b._$formInput.val(a),a?b._hidePlaceHolder():b._showPlaceHolder(),b.options.onchange(b,{}),void 0):b.options.value}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Label",!0),b.control("web.Label",b.web.FormElement,{_availableState:/white|primary|info|success|warning|danger|\s+/i,_rootHtmlTmpl:"#ebaui-template-label",_updateStyleBorder:function(){var a=this._$root;this.hasBorder()?a.removeClass("eba-nobor").addClass("eba-bor"):a.removeClass("eba-bor").addClass("eba-nobor")},_updateStyleAlign:function(){var a=this._$root,b=this.textAlign(),c={left:function(){a.hasClass("eba-txtl")||a.removeClass("eba-txtr").removeClass("eba-txtc").addClass("eba-txtl")},center:function(){a.hasClass("eba-txtc")||a.removeClass("eba-txtl").removeClass("eba-txtr").addClass("eba-txtc")},right:function(){a.hasClass("eba-txtr")||a.removeClass("eba-txtl").removeClass("eba-txtc").addClass("eba-txtr")}};c[b]()},_updateStyleStates:function(){var b=this,c=b._$root,d=a.trim(b.options.state).toLowerCase();if(d.length>0){var e="eba-label label-"+d;c.attr("class",e)}},state:function(a){var b=this,c=b.options;return b._availableState.test(a)?(c.state=a,b._updateStyleStates(),void 0):c.state},_render:function(){var a=this;a._updateStyleBorder(),a._updateStyleAlign(),a._updateStyleStates(),a._$root.text(a.text()),a._super()},hasBorder:function(a){var b=this;return b.isBoolean(a)?(b.options.hasBorder=a,b._render(),void 0):b.options.hasBorder},text:function(a){var b=this;return b.isString(a)?(b.options.text=a,b._render(),void 0):b.options.text},data:function(a){if(!(a&&"text"in a&&"value"in a)){var b=this.text();return{text:b,value:b}}this.text(a.text)},textAlign:function(a){var b=this,c=/left|center|right/i;return c.test(a)?(b.options.textAlign=a,b._render(),void 0):b.options.textAlign},options:{position:"absolute",hasBorder:!1,textAlign:"right",text:""}})}(jQuery,ebaui),function(a,b){b.web.registerControl("Button",!1),b.control("web.Button",{_availableState:/primary|info|success|warning|danger|inverse|link|\s+/i,_rootHtmlTmpl:"#ebaui-template-button",_cssClass:{disabled:"eba-button-disabled"},_updateStyleEnabled:function(){var a=this,b=a._cssClass.disabled,c=a.enabled()?"removeClass":"addClass";a._$root[c](b)},_updateUIText:function(){var a=this,b=a.text();b&&a._$btnText.text(b)},_updateUIHref:function(){var a=this,b=a.href(),c=a.enabled()&&b?b:"javascript:void(0);";a._$root.attr("href",c)},_updateUITarget:function(){var a=this,b=a.target();a._$root.attr("target",b?b:null)},_updateStyleStates:function(){var b=this,c=b._$root,d=a.trim(b.options.state).toLowerCase(),e="eba-button-Default eba-button-"+d;c.attr("class",e)},_updateStyleIcon:function(){var b=this,c=b._$root,d=b.iconCls(),e=b.iconPosition(),f='<i class="{0}"></i>'.replace("{0}",d);a("i",c).remove(),"left"!==e?c.append(f):c.prepend(f)},_render:function(){var a=this;a._updateUIText(),a._updateStyleIcon(),a._updateUIHref(),a._updateUITarget(),a._updateStyleStates(),a._super()},_setupEvents:function(){var a=this,c=a._$root;c.on("click",function(b){a.enabled()&&a.isFunc(a.options.onclick)&&(b.preventDefault(),a.options.onclick(a,b))}),c.on("keydown",function(c){var d=function(a,b){a.enabled()&&a.isFunc(a.options.onclick)&&(b.preventDefault(),a.options.onclick(a,b))};switch(c.which){case b.keycodes.enter:d(a,c)}})},_initControl:function(){var b=this;b._$btnText=a(".eba-button-text ",b._$root);var c=b.options;b._availableState.test(c.state)||(c.state="")},_focus:function(){this._$root.focus()},_blur:function(){this._$root.blur()},state:function(a){var b=this,c=b.options;return b._availableState.test(a)?(c.state=a,b._updateStyleStates(),void 0):c.state},text:function(a){var b=this;return b.isString(a)?(b.options.text=a,b._$btnText.text(a),void 0):b.options.text},href:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.href=b,c._updateUIHref(),void 0):c.options.href},target:function(a){var b=this,c=/_parent|_blank|_self|_top/i;return c.test(a)?(b.options.target=a,b._updateUITarget(),void 0):b.options.target},focusable:function(){return!0},enterAsTab:function(a){var b=this;return b.isBoolean(a)?(b._setOptions({enterAsTab:a}),void 0):b.options.enterAsTab},iconCls:function(a){var b=this;return b.isString(a)?(b.options.iconCls=a,b._updateStyleIcon(),void 0):b.options.iconCls},iconPosition:function(a){var b=this,c=/left|right/i;return c.test(a)?(b.options.iconPosition=a,b._updateStyleIcon(),void 0):b.options.iconPosition},options:{state:"",width:0,height:0,text:"",href:"",target:"blank",iconCls:"",iconPosition:"left",enterAsTab:!1,onclick:a.noop,onenter:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("TextArea",!0),b.control("web.TextArea",b.web.TextBox,{_rootHtmlTmpl:"#ebaui-template-textarea",_updateStyleWidth:function(){var a=this,b=a._$root,c=a._$formInput,d=a.width();b.width(d),c.width(d)},_updateStyleHeight:function(){var a=this,b=a._$root,c=a._$formInput,d=a.height();b.height(d),c.height(d-4)},enterAsTab:function(){return!1},options:{width:150,height:30,enterAsTab:!1}})}(jQuery,ebaui),function(a,b){b.control("web.Combo",b.web.ButtonEdit,{_panel:null,_reposition:function(){var b=this,c=b._panel,d=c.uiElement();if(c.visible()){var e=b._$root,f=e.position(),g=d.outerHeight(),h=a(document).scrollTop(),i=f.top+e.outerHeight();i+g>a(window).height()+h&&(i=f.top-g),c.move({top:i,left:f.left})}},_setupEvents:function(){var b=this,c=b._panel,d=b._$root,e=c.uiElement();e.on("click",function(a){a.stopPropagation()}),d.on("click",".eba-buttonedit-button",function(a){a.stopPropagation(),b.enabled()&&!b.readonly()&&(c.toggle(),b._reposition())}),a(document).on("click",function(){c.close()}),a(window).resize(function(){b._reposition()})}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("ListBox",!0),b.control("web.ListBox",b.web.FormElement,{_rootHtmlTmpl:"#ebaui-template-listbox",_itemHtmlTmpl:"#ebaui-template-listbox-item",_usingRemoteData:!1,_compiledListItemTmpl:a.noop,_loadMask:function(){var b=this,c=b._compiledListItemTmpl({loading:!0,idField:"",textField:"",valueField:"",selectedItems:[],dataItems:[]});a("table.eba-listbox-items",b._$root).html(c)},_renderData:function(){var b=this,c=b._compiledListItemTmpl({loading:!1,idField:b.textField(),textField:b.textField(),valueField:b.valueField(),selectedItems:b.selectedItems(),dataItems:b.items()});a("table.eba-listbox-items",b._$root).html(c)},_render:function(){var a=this;a._loadData(function(a){a._loadMask()},function(a){a._renderData()}),a._super()},_setupEvents:function(){var b=this,c=b._$root;c.on("click","tr.eba-listbox-item",function(c){c.stopPropagation();var d=a(this),e=parseInt(d.attr("data-index"));c.ctrlKey?b.deselect(e):b.select(e),b.options.onitemclick(b,{})}),c.on("dblclick","tr.eba-listbox-item",function(a){a.stopPropagation(),b.options.onitemdbclick(b,{})})},_initControl:function(){var b=this;b._usingRemoteData=b.isUsingRemoteData(b.options.dataSource);var c=a.trim(a(b._itemHtmlTmpl).html());b._compiledListItemTmpl=b.compileTmpl(c)},focusable:function(){return!0},text:function(){for(var a=this,b=[],c=a.textField(),d=a.data(),e=0,f=d.length;f>e;e++){var g=d[e];b.push(g[c])}return b},value:function(a){if(!a){for(var b=[],c=this.valueField(),d=this.data(),e=0,f=d.length;f>e;e++){var g=d[e];b.push(g[c])}return b}var h=this;h.isArray(a)||(a=[a]);var i=null,c=h.valueField(),j=h.items(),k=h.multiSelect();if(k){i=[];var l=h.each;l(j,function(b){l(a,function(a){a==b[c]&&i.push(b)})})}else{for(var e=0,f=j.length;f>e;e++){var g=j[e];if(g[c]==a[0])break}i=j[e]}h.select(i)},data:function(a){var b=this;if(!a)return b.selectedItems();if(b.isArray(a)||(a=[a]),0==a.length)return b.deselectAll(),void 0;var c=null,d=b.valueField(),e=b.items();if(b.multiSelect()){c=[];var f=b.each;f(e,function(b){f(a,function(a){a[d]==b[d]&&c.push(b)})})}else{for(var g=0,h=e.length,i=a[0];h>g;g++){var j=e[g];if(j[d]==i[d])break}c=e[g]}b.select(c)},_items:[],_loadData:function(b,c){var d=this,e=d.dataSource();if(b=d.isFunc(b)?b:a.noop,c=d.isFunc(c)?c:a.noop,d._usingRemoteData){d._items=[],d._selectedItems=[],d._loadMask();var f={};d.isFunc(e.data)?f=e.data():a.extend(f,e.data),b(d),a.ajax({url:e.url,data:f,dataType:"json",error:d.options.onloadfail,beforeSend:d.options.onpreload,success:function(a){d._items=a,c(d),d.options.onloadsucc(d,a)},complete:d.options.onloadcomplete})}else b(d),d._items=e,c(d)},items:function(){return this._items},_selectedItems:[],selectedItems:function(){return this._selectedItems},add:function(a){if(a){var b=this;b.isArray(a)||(a=[a]),a.length>0&&(b._items=b._items.concat(a),b._renderData())}},remove:function(a){if(a){var b=this;if(b.isArray(a)||(a=[a]),a.length>0){for(var c=b.idField(),d=0;d<a.length;d++)for(var e=a[d],f=0;f<b._items.length;f++){var g=b._items[f];if(g[c]==e[c]){b._items.splice(f,1);break}}b._renderData()}}},update:function(a){if(a){var b=this;if(b.isArray(a)||(a=[a]),a.length>0){for(var c=b.idField(),d=0;d<a.length;d++)for(var e=a[d],f=0;f<b._items.length;f++){var g=b._items[f];if(g[c]==e[c]){b._items[f]=e;break}}b._renderData()}}},move:function(a,b){var c=this;if(c.isNumber(a)&&c.isNumber(b)){var d=c._items,e=d[a];d[a]=d[b],d[b]=e,c._renderData()}},_currItemIdx:-1,selectPrev:function(){var a=this,b=a._currItemIdx,c=a.items();c&&0!=c.length&&(0>b-1||(--b,a._currItemIdx=b,a.select(b),a.highlight(b)))},selectNext:function(){var a=this,b=a._currItemIdx,c=a.items();c&&0!=c.length&&(b+1>=c.length||(++b,a._currItemIdx=b,a.select(b),a.highlight(b)))},select:function(a){var b=this;if(!b.isNull(a)){var c=b.isNumber(a),d=b.items();if((!c||a>=0&&a<d.length)&&(c&&(a=[d[a]]),b.isArray(a)||(a=[a]),a.length)){var e=b._selectedItems,f=b.idField();if(b.multiSelect())for(var g=0;g<a.length;g++){for(var h=a[g],i=!1,j=0;j<e.length;j++){var k=e[j];if(k[f]==h[f]){i=!0;break}}i||e.push(h)}else e=[a[0]];b._selectedItems=e,b._renderData(),b.options.onchange(b,{})}}},deselect:function(a){var b=this;if(!b.isNull(a)){var c=b.isNumber(a),d=b.items();if((!c||a>=0&&a<d.length)&&(c&&(a=[d[a]]),b.isArray(a)||(a=[a]),0!=a.length)){var e=b._selectedItems;if(!(a.length<=0||e.length<=0)){for(var f=b.idField(),g=0;g<a.length;g++)for(var h=a[g],i=0;i<e.length;i++){var j=e[i];if(j[f]==h[f]){e.splice(i,1);break}}b._currItemIdx=-1,b._renderData(),b.options.onchange(self,{})}}}},deselectAll:function(){var a=this;a._currItemIdx=-1,a._selectedItems=[],a._renderData(),a.options.onchange(a,{})},highlight:function(b){var c=this;if(!c.isNull(b)){var d=-1;if(c.isNumber(b)){if(b>=c._items.length)return;d=b}else for(var e=c.idField(),f=0;f<c._items.length;f++){var g=c._items[f];if(b[e]&&g[e]==b[e]){d=f;break}}var h=c._$root,i="eba-listbox-item-hover";a(".eba-listbox-item-hover",h).removeClass(i),d>-1&&a(".eba-listbox-item:eq("+d+")",h).addClass(i)}},idField:function(a){var b=this;return b.isString(a)?(b.options.idField=a,void 0):b.options.idField},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,b._renderData(),void 0):b.options.valueField},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,b._renderData(),void 0):b.options.textField},dataSource:function(a){var b=this;return a?(b.options.dataSource=a,b._usingRemoteData=b.isUsingRemoteData(a),b._loadData(function(a){a._loadMask()},function(a){a._currItemIdx=-1,a._selectedItems=[],a._renderData()}),void 0):b.options.dataSource},multiSelect:function(a){var b=this;return b.isBoolean(a)?(b.options.multiSelect=a,void 0):b.options.multiSelect},options:{position:"absolute",width:150,height:0,text:[],value:[],multiSelect:!1,idField:"id",valueField:"value",textField:"text",dataSource:{},onchange:a.noop,onitemclick:a.noop,onitemdbclick:a.noop,onloadfail:a.noop,onloadsucc:a.noop,onpreload:a.noop,onloadcomplete:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("TextBoxList",!0),b.control("web.TextBoxList",b.web.FormElement,{_listbox:null,_panel:null,_domSelector:{formInput:".eba-textboxlist-input",selectedItem:"li.eba-textboxlist-item",btnRemoveItem:"span.eba-textboxlist-close"},_rootHtmlTmpl:"#ebaui-template-textboxlist",_cssClass:{disabled:"eba-disabled",focused:"eba-textboxlist-focus",readonly:"eba-readonly"},_compiledTextItemTmpl:a.noop,_usingRemoteData:!1,_dataItems:[],_reposition:function(){var b=this,c=b._panel._$root;if(b._panel.visible()){var d=b._$root,e=d.position(),f=c.outerHeight(),g=a(document).scrollTop(),h=e.top+d.outerHeight();h+f>a(window).height()+g&&(h=e.top-f),b._panel.move({top:h,left:e.left})}},_initPanel:function(){var c=this,d=c.id();c._$root;var e=a('<div data-options="{ visible:false }" style="display:none;"><input /></div>').appendTo(document.body);e.css({position:"absolute",display:"none"}),e.panel({id:"panel-"+d,position:"absolute"}),a("input",e).listbox({width:c.width(),height:220,idField:c.valueField(),textField:c.textField(),valueField:c.valueField(),dataSource:[],onitemclick:function(a){var b=a.selectedItems(),d=c.data();d&&0!=d.length?-1==c._indexOf(b)&&c.data([].concat(d,b)):c.data(b),c._$formInput.val(""),c._panel.close()}}),c._listbox=b.get(a('[data-role="listbox"]',e)),c._panel=b.get(e)},_updateStyleText:function(){var b=this,c=b._compiledTextItemTmpl({loading:!1,textField:b.textField(),valueField:b.valueField(),selectedItems:[],dataItems:b.data()});a("ul li.eba-textboxlist-item",b._$root).remove(),a("ul",b._$root).prepend(c)},_loadData:function(b,c){var d=this,e=d.dataSource();if(c||(c=a.noop),d._usingRemoteData){var f={},g=e.url;d.isFunc(e.data)?f=e.data():e.data&&d.isObject(e.data)&&(f=e.data),f[d.filterField()]=b,a.getJSON(g,f).done(function(a){d._dataItems=a,c(d)})}else{if(b){for(var h=[],i=d.options.filter,j=d.filterField(),k=0,l=e.length;l>k;k++){var m=e[k];i(m,b,j)&&h.push(m)}d._dataItems=h}else d._dataItems=e;c(d)}},_setupEvents:function(){var c=this,d=c._$root,e=c._$formInput,f=c._domSelector,g=c._panel,h=c._listbox;d.on("click",f.selectedItem,function(){var b=a(this);b.siblings(".eba-textboxlist-item-selected").removeClass("eba-textboxlist-item-selected"),b.addClass("eba-textboxlist-item-selected")}),d.on("click","ul",function(){e.focus()}),d.on("click",f.btnRemoveItem,function(){var b=c._query(a(this).attr("data-value"));c._remove(b)}),d.on("keydown",f.formInput,function(a){c.options.onkeydown(c,a)}),d.on("keyup",f.formInput,function(i){var j=function(){h.selectNext()},k=function(){h.selectPrev()},l=function(a,b){g.visible()?(a._add(h.data()[0]),e.val(""),g.close()):a.options.onenter(a,b)},m=function(b){var c=e.val();if(c)b._loadData(c,function(){h.dataSource(b.items()),g.open(),b._reposition()});else{var i=a(".eba-textboxlist-item-selected",d);0==i.size()?a(f.selectedItem,d).last().addClass("eba-textboxlist-item-selected"):b._pop()}},n=function(a){a._loadData(e.val(),function(){h.dataSource(a.items()),g.open(),a._reposition()})};switch(i.which){case b.keycodes.down_arrow:j(c,i);break;case b.keycodes.up_arrow:k(c,i);break;case b.keycodes.enter:l(c,i);break;case b.keycodes.backspace:m(c,i);break;default:n(c,i)}c.options.onkeyup(c,i)}),d.on("focus",f.formInput,function(){c._setOption("focused",!0),c.enabled()&&!c.readonly()&&c.options.onfocus(c,event),c._updateStyleFocused()}),d.on("blur",f.formInput,function(){c._setOption("focused",!1),c.enabled()&&c.options.onblur(c,event),c._updateStyleFocused()})},_query:function(a){var b=this;if(b.isNull(a))return null;for(var c=b.data(),d=b.valueField(),e=c.length-1;e>=0;e--){var f=c[e];if(f[d]==a)return f}return null},_indexOf:function(a){var b=this;if(b.isNull(a))return-1;for(var c=-1,d=b.data(),e=b.valueField(),f=d.length-1;f>=0;f--){var g=d[f];if(g[e]==a[e]){c=f;break}}return c},_initControl:function(){var b=this,c=b.options;b._$formInput=a(".eba-textboxlist-input",b._$root),b._compiledTextItemTmpl=b.compileTmpl(a("#ebaui-template-textboxlist-item").html()),c.filterField&&(c.filterField=c.textField),b._usingRemoteData=b.isUsingRemoteData(c.dataSource),b._initPanel(),b._loadData(void 0,function(){b._listbox.dataSource(b.items());var a=c.value;a&&(b.value(a),b._listbox.data(b.data()))})},items:function(){return this._dataItems},text:function(){return this.options.text},_add:function(a){var b=this;if(!b.isNull(a)){var c=b.isNumber(a),d=b.items();if(0!=d.length&&(!c||a>=0&&a<d.length)&&(c&&(a=d[a]),-1==b._indexOf(a))){var e=b.options,f=b.valueField();e.data.push(a),e.value.push(a[f]),b._updateStyleText(),b.options.onchange(b,{})}}},_pop:function(){var a=this,b=a.options,c=b.data;if(a.isEmpty(c))return null;var d=c.length-1,e=c[d];return b.data.splice(d,1),b.value.splice(d,1),a._updateStyleText(),a.options.onchange(a,{}),e},_remove:function(a){var b=this;if(!b.isNull(a)){var c=b.isNumber(a),d=b.items();if(0!=d.length&&(!c||a>=0&&a<d.length)){c&&(a=d[a]);var e=b._indexOf(a);if(-1!=e){var f=b.options;f.data.splice(e,1),f.value.splice(e,1),b._updateStyleText(),b.options.onchange(b,{})}}}},_updateValue:function(a,b){var c=this;c.isArray(a)||(a=[a]);var d=[],e=[],f=[],g=c.textField(),h=c.valueField(),i=c.items();c.each(a,function(a){for(var c=0,j=i.length;j>c;c++){var k=i[c];if(b(k,a,h)){var l=k[g],m=k[h],n={};n[g]=l,n[h]=m,d.push(k),f.push(l),e.push(m);break}}}),c.options.data=d,c.options.text=f,c.options.value=e,c._updateStyleText(),c.options.onchange(c,{})},value:function(a){var b=this;return a?(b._updateValue(a,function(a,b,c){return a[c]==b}),void 0):b.options.value},data:function(a){var b=this;return a?(b._updateValue(a,function(a,b,c){return a[c]==b[c]}),void 0):b.options.data},filterField:function(a){var b=this;return b.isString(a)?(b.options.filterField=a,void 0):b.options.filterField},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,void 0):b.options.valueField},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,void 0):b.options.textField},dataSource:function(a){var b=this;return a?(b.options.dataSource=a,b._usingRemoteData=b.isUsingRemoteData(a),void 0):b.options.dataSource},options:{position:"absolute",width:250,height:24,text:[],value:[],valueField:"value",textField:"text",filterField:"",filter:function(a,b,c){return a[c].indexOf(b)>-1},dataSource:"",onkeydown:a.noop,onkeyup:a.noop,onenter:a.noop,onfocus:a.noop,onblur:a.noop,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.control("web.MiniGrid",{_rootHtmlTmpl:"#ebaui-template-minigrid",_headerHtmlTmpl:"#ebaui-template-minigrid-header",_itemHtmlTmpl:"#ebaui-template-minigrid-item",_compiledHeaderTmpl:a.noop,_compiledItemTmpl:a.noop,_updateStyleHeight:function(){var b=this,c=b.height(),d=b.isNumber(c),e=b._$root;a(".eba-listbox-border",e);var f=a(".eba-listbox-view",e);if(d)c>0&&f.height(c);else if(c){var g=b._cssUnitRE.exec(c);g[1]?f.css("height",c):f.css("height",c+"px")}},_updateStyleWidth:function(){var b=this,c=b.width(),d=b.isNumber(c),e=b._$root;a(".eba-listbox-border",e);var f=a(".eba-listbox-view",e);if(d)c>0&&f.width(c);else if(c){var g=b._cssUnitRE.exec(c);g[1]?f.css("width",c):f.css("width",c+"px")}},_setupEvents:function(){var b=this,c=b._$root;c.on("click",function(a){a.stopPropagation()}),c.on("change",":checkbox",function(d){d.stopPropagation();var e=a(this),f=e.val(),g="eba-listbox-item-selected";"selectall"===f&&e.is(":checked")?(a(':checkbox[value!="selectall"]',c).each(function(a,b){b.checked=!0}),a('.eba-listbox-view tr[data-index!=""]',c).addClass(g),b.isFunc(b.options.onSelectAll)&&b.options.onSelectAll(b,{})):"selectall"!==f||e.is(":checked")?"selectall"!==f&&e.is(":checked")?(e.parent().parent().addClass(g),b.isFunc(b.options.onSelectRow)&&b.options.onSelectRow(b,{})):"selectall"===f||e.is(":checked")||(e.parent().parent().removeClass(g),b.options.onSelectRow(b,{})):(b.resetSelection(),a(".eba-listbox-view ."+g,c).removeClass(g),b.options.onSelectAll(b,{}))})},_isRemoteDataSource:function(){var b=this,c=b.options.data,d=a.trim(b.options.url);return d?!0:c&&b.isArray(c)?!1:(b.options.data=[],!1)},_initControl:function(){var b=this,c=a.trim(a(b._headerHtmlTmpl).html());b._compiledHeaderTmpl=b.compileTmpl(c);var d=a.trim(a(b._itemHtmlTmpl).html());b._compiledItemTmpl=b.compileTmpl(d),b._usingRemoteData=b._isRemoteDataSource()},_usingRemoteData:!1,_loadRemoteData:function(b){var c=this,d=c.options,e=d.url,f=d.postData,g={};if(f)for(var h=0,i=f.length;i>h;h++)a.extend(g,f[h]);a.getJSON(e,g,function(a){b(a)})},_loadData:function(a){var b=this;b._usingRemoteData?b._loadRemoteData(function(c){b._items=c,a(),b.options.loadComplete(b,{})}):(b._items=b.options.data,a(),b.options.loadComplete(b,{}))},_render:function(){var b=this,c=this._$root;b._loadData(function(){var d=b._compiledHeaderTmpl({headers:b.options.colModel}),e=b._compiledItemTmpl({headers:b.options.colModel,rows:b.items(),autowidth:b.options.autowidth});b.options.autowidth?(a(".eba-listbox-headerInner",c).html(d),a(".eba-listbox-items",c).html(e)):a(".eba-listbox-items",c).html(d+e),b._updateStyleWidth(),b._updateStyleHeight()})},_items:[],items:function(){return this._items},selectedItems:function(){var b=this;if(b._items.length<=0)return[];var c=[],d=b._$root;a(":checked",d).each(function(b,d){var e=a(d),f=e.val();d.checked&&"selectall"!==f&&c.push(parseInt(f))});for(var e=[],f=0,g=c.length;g>f;f++){var h=c[f];e.push(b._items[h])}return e},resetSelection:function(b){var c=this._$root,d=a(":checkbox",c),e=a(":checked",c),f=e.size(),g=f==this._items.length,h=!this.isNumber(b);0!=f&&(!h&&g?(d.get(0).checked=!1,d.get(b+1).checked=!1):h||g?(a(".eba-listbox-item-selected",c).removeClass("eba-listbox-item-selected"),e.each(function(a,b){b.checked=!1})):d.get(b+1).checked=!1)},setSelection:function(b){var c=this;':checkbox[value="{0}"]'.replace("{0}",b);var d=a('tr[data-index="{0}"]'.replace("{0}",b),c._$root);d.size()>0&&(d.find(":checkbox").get(0).checked=!0,d.addClass("eba-listbox-item-selected"),c.isFunc(c.options.onSelectRow)&&c.options.onSelectRow(c,{}))},setGridParam:function(b){b&&(this.options=a.extend(this.options,b))},reloadGrid:function(){var a=this;a._usingRemoteData=a._isRemoteDataSource(),a._render()},options:{autowidth:!0,width:400,height:120,url:"",data:[],datatype:"local",postData:[{}],colModel:[{name:"id",label:"ID",width:150},{name:"text",label:"Text",width:150}],multiselect:!0,onSelectRow:a.noop,onSelectAll:a.noop,loadComplete:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("ComboBox",!0),b.control("web.ComboBox",b.web.Combo,{_listbox:null,_initPanel:function(){var c=this,d=c.id();c._$root;var e=a('<div data-options="{ visible:false }" style="display:none;"><input /></div>').appendTo(document.body);e.panel({id:"panel-"+d,position:"absolute",width:c.width()-22,height:c.height()}),a("input",e).listbox({position:null,width:0,height:0,idField:c.idField(),textField:c.textField(),valueField:c.valueField(),dataSource:[],onitemclick:function(a){c.data(a.selectedItems()),c._panel.close()}}),c._panel=b.get(e),c._listbox=b.get(a('[data-role="listbox"]',e))},_updateStyleText:function(){for(var a="",b=this.text(),c=0,d=b.length;d>c;c++){var e=b[c];a+=e,d-1>c&&(a+=",")}this._$formInput.val(a)},_loadRemoteData:function(b,c,d){var e=this,f=e.dataSource();e.isFunc(c)||(c=a.noop),e.isFunc(d)||(d=a.noop),e._popupDataItems=[];var g={};e.isFunc(f.data)&&(g=f.data()),b&&b.length>0&&(g[e.filterField()]=b),c(e),a.ajax({url:f.url,data:g,dataType:"json",success:function(a){e._popupDataItems=a,d(e)}})},_loadLocalData:function(b,c,d){var e=this,f=e.filterField(),g=e.options.filter,h=e.dataSource();if(e.isFunc(c)||(c=a.noop),e.isFunc(d)||(d=a.noop),c(e),b&&b.length>0){for(var i=[],j=0;j<h.length;j++){var k=h[j];g(k,b,f)&&i.push(k)}e._popupDataItems=i}else e._popupDataItems=h;d(e)},_loadPopupData:function(a,b,c){var d=this;d._usingRemoteData?d._loadRemoteData(a,b,c):d._loadLocalData(a,b,c)},_indexOf:function(a,b,c){var d=this;d.isString(b)&&(b=this.idField()),d.isFunc(c)||(c=function(a,c){return a[b]==c[b]});for(var e=-1,f=0;f<d._popupDataItems.length;f++)if(c(a,d._popupDataItems[f])){e=f;break}return e},_setupEvents:function(){var c=this,d=c._$root;d.on("focus",".eba-buttonedit-input",function(){c._setOption("focused",!0),c._updateStyleFocused()}),d.on("blur",".eba-buttonedit-input",function(){c._setOption("focused",!1),c._updateStyleFocused()}),d.on("click",".eba-placeholder-lable",function(){a(this).hide(),c._$formInput.focus()}),d.on("keydown",".eba-buttonedit-input",function(a){var d=!1;switch(a.which){case b.keycodes.down_arrow:d=!0;break;case b.keycodes.up_arrow:d=!0;break;case b.keycodes.enter:d=!0}d||c.allowInput()||a.preventDefault()}),d.on("keyup",".eba-buttonedit-input",function(d){(!c.enabled()||c.readonly())&&d.preventDefault();var e=function(a){a._listbox.selectNext()},f=function(a){a._listbox.selectPrev()},g=function(a,b){if(a._panel.visible()){var c=a._listbox;a.data(c.data()),a._panel.close()}else a.options.onenter(a,b)},h=function(b){var c=b._$formInput.val();b.text(c),b._loadPopupData(c,a.noop,function(){b._listbox.dataSource(b.items()),b._panel.open(),b._reposition()})};switch(d.which){case b.keycodes.down_arrow:e(c,d);break;case b.keycodes.up_arrow:f(c,d);break;case b.keycodes.enter:g(c,d);break;default:h(c,d)}}),c._super()},_initControl:function(){var b=this;b._super(),b._$formInput=a(".eba-buttonedit-input",b._$root),b._$root.addClass("eba-combobox eba-popupedit");var c=b.options;""==c.filterField&&(c.filterField=c.textField),b._initPanel(),b._usingRemoteData=b.isUsingRemoteData(b.options.dataSource),b._loadPopupData(void 0,void 0,function(a){a._listbox.dataSource(a.items());var b=a.options.value;b&&(a.value(b),a._listbox.data(a.data()))})},items:function(){return this._popupDataItems},text:function(a){var b=this;if(!b.isString(a))return b.options.text;var c=b.options;c.text=a,b._$formInput.val(a),b.isEmpty(c.text)?b._showPlaceHolder():b._hidePlaceHolder()},value:function(a){var b=this;if(b.isNull(a))return b.options.value;if(b.isArray(a)||(a=[a]),0==a.length)return b.data([]),void 0;for(var c=[],d=b.valueField(),e=b._popupDataItems,f=0;f<e.length;f++){var g=e[f];if(g[d]==a[0]){c=[g];break}}b.data(c)},_data:null,data:function(a){var b=this;if(b.isNull(a))return b._data;b.isArray(a)||(a=[a]);var c=b.options;if(0==a.length)b._data=null;else{b._data=a[0];var d=b.textField(),e=b.valueField();c.text=b._data[d],c.value=b._data[e],b._$formInput.val(c.text),c.text?b._hidePlaceHolder():b._showPlaceHolder()}c.onchange(self,{})},idField:function(a){var b=this;return b.isNull(a)?b.options.idField:(b.options.idField=a.toString(),b._listbox.idField(a),void 0)},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,b._listbox.textField(a),void 0):b.options.textField},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,b._listbox.valueField(a),void 0):b.options.valueField},filterField:function(a){var b=this;return b.isString(a)?(b.options.filterField=a,void 0):b.options.filterField},allowInput:function(b){var c=this;return c.isBoolean(b)?(c.options.allowInput=b,b||c._loadPopupData("",a.noop,function(){for(var a=c.text(),b=!1,d=c.textField(),e=c._popupDataItems,f=0;f<e.length&&!(b=e[f][d]==a);f++);b||c.text("")}),void 0):c.options.allowInput},dataSource:function(a){var b=this;return a?(b._usingRemoteData=b.isUsingRemoteData(b.options.dataSource),b.options.dataSource=a,void 0):b.options.dataSource},options:{position:"absolute",text:"",value:null,allowInput:!0,placeholder:"请选择...",idField:"id",valueField:"value",textField:"text",filterField:"",filter:function(a,b,c){return a[c].indexOf(b)>-1}}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("ComboList",!0),b.control("web.ComboList",b.web.Combo,{_listbox:null,_updateStyleEnabled:function(){var a=this,b=a._$root,c=a._$formInput;a.enabled()?b.removeClass(a._cssClass.disabled):(b.removeClass(a._cssClass.focused),b.addClass(a._cssClass.disabled)),c.attr("disabled","disabled")},_updateText:function(a){var b="",c=this;if(c.isEmpty(a))return c._$formInput.val(""),c._showPlaceHolder(),void 0;for(var d=0,e=a.length;e>d;d++){var f=a[d];b+=f,e-1>d&&(b+=";")}c._$formInput.val(b),c.isEmpty(b)?c._showPlaceHolder():c._hidePlaceHolder()},_setupEvents:function(){var b=this,c=b._$root;c.on("focus",".eba-buttonedit-input",function(){b._setOption("focused",!0),b._updateStyleFocused()}),c.on("blur",".eba-buttonedit-input",function(){b._setOption("focused",!1),b._updateStyleFocused()}),c.on("click",".eba-placeholder-lable",function(){a(this).hide(),b._$formInput.focus()}),b._super()},_initMiniGrid:function(){var b=this,c=b.options.value;b.textField();var d=b.valueField(),e=function(a){var c=a.selectedItems();b.data(c,!0)},f=function(a){var c=a.selectedItems();b.data(c,!0)},g=function(b){if(c){var e=b.items(),f=c.toString().split(",");a.each(f,function(c,f){a.each(e,function(a,c){c[d]==f&&b.setSelection(a)})})}},h=b.options.grid;h.onSelectRow=e,h.onSelectAll=f,h.loadComplete=g,a.each(h.colModel,function(a,b){b.width||(b.width=150)}),b.isEmpty(h.width)&&(h.width=400),b.isEmpty(h.height)&&(h.height=120)},_initPanel:function(){var c=this,d=c.id();c._$root;var e=a('<div data-options="{ visible:false }" style="display:none;"><input /></div>').appendTo(document.body);e.panel({id:"panel-"+d,position:"absolute",width:c.width()-22,height:c.height()}),a("input",e).minigrid(c.options.grid),c._panel=b.get(e),c._listbox=b.get(a('[data-role="minigrid"]',e))},_initControl:function(){var a=this;a._super(),a._$root.addClass("eba-combobox eba-popupedit").attr("data-role","combolist"),a._initMiniGrid(),a._initPanel()},dataSource:function(a){var b=this;if(!a)return b.options.grid;var c=b._listbox.options;b.isArray(a)?(c.data=a,c.url=""):(c.data=void 0,c.url=a.url,a.postData&&(c.postData=a.postData)),b._listbox.reloadGrid()},text:function(){return this.options.text},value:function(b){var c=this;if(!b)return c.options.value;if(c.isArray(b)||(b=[b]),0==b.length)return c._data=[],c.options.text=[],c.options.value=[],c._listbox.resetSelection(),c._updateText([]),void 0;var d=[],e=[],f=[],g=c.textField(),h=c.valueField(),i=c._listbox.items();a.each(b,function(b,c){a.each(i,function(a,b){b[h]==c&&(e.push(b[h]),f.push(b[g]),d.push(a))})}),c.options.text=f,c.options.value=e,c._listbox.resetSelection();for(var j=0;j<d.length;j++)c._listbox.setSelection(d[j]);c._updateText(f),c.options.onchange(self,{})},_data:null,data:function(b,c){var d=this;if(!b)return d._data;if(d.isArray(b)||(b=[b]),0==b.length)return d._data=[],d.options.text=[],d.options.value=[],d._listbox.resetSelection(),d._updateText([]),void 0;self._data=[];var e=[],f=[],g=[],h=d.textField(),i=d.valueField(),j=d._listbox.items();a.each(j,function(c,d){a.each(b,function(a,b){if(d[i]==b[i]){f.push(d[h]),g.push(d[i]);var j={};j[h]=d[h],j[i]=b[i],self._data.push(j),e.push(c)}})});var k=d.options;if(k.text=f,k.value=g,!c){d._listbox.resetSelection();for(var l=0;l<e.length;l++)d._listbox.setSelection(e[l])}d._updateText(f),k.onchange(self,{})},idField:function(a){var b=this;return b.isEmpty(a)?b.options.idField:(b.options.idField=a.toString(),b._listbox.idField(a),void 0)},textField:function(a){var b=this;
return b.isString(a)?(b.options.textField=a,b._listbox.textField(a),void 0):b.options.textField},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,b._listbox.valueField(a),void 0):b.options.valueField},options:{position:"absolute",text:[],value:[],placeholder:"请选择...",idField:"id",textField:"text",valueField:"value",grid:{autowidth:!0,width:400,height:120,url:"",data:[],datatype:"local",postData:[{}],colModel:[{name:"id",label:"ID",width:150},{name:"text",label:"Text",width:150}],multiselect:!0,onSelectRow:a.noop,onSelectAll:a.noop,loadComplete:a.noop},onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Calendar",!1),b.control("web.Calendar",b.web.FormElement,{_rootHtmlTmpl:"#ebaui-template-calendar",_compiledHeaderTextTmpl:a.noop,_compiledCalendarWeekTmpl:a.noop,_compiledCalendarMenuTmpl:a.noop,_cssClass:{disabled:"eba-calendar-disabled",selected:"eba-calendar-selected"},_currYear:(new Date).getFullYear(),_currMonth:(new Date).getMonth(),_titleDisplayFormat:"MMM YYYY",_formatInvalidException:"The date is invalid, please input a valid date!",_weeks:["S","M","T","W","T","F","S"],_months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_updateStyleEnabled:function(){var a=this,b=a._$root,c=a._cssClass;a.enabled()?b.removeClass(c.disabled):b.addClass(c.disabled)},_toggleMenu:function(){var b=this._$root,c="__toggled__",d=".eba-calendar-view",e='[data-role="menu"]';b.data(c)?(a(d,b).show(),a(e,b).hide(),b.data(c,!1)):(a(d,b).hide(),a(e,b).show(),b.data(c,!0))},_setupTitleEvents:function(){var a=this,b=a._$root;b.on("click",".eba-calendar-title",function(){a.enabled()&&a._toggleMenu()}),b.on("click",".eba-calendar-monthNext",function(){a.enabled()&&(++a._currMonth,a._renderTitle(a._currYear,a._currMonth),a._renderWeeks(a.value(),a._currYear,a._currMonth))}),b.on("click",".eba-calendar-monthPrev",function(){a.enabled()&&(--a._currMonth,a._renderTitle(a._currYear,a._currMonth),a._renderWeeks(a.value(),a._currYear,a._currMonth))}),b.on("click",".eba-calendar-yearNext",function(){a.enabled()&&(++a._currYear,a._renderTitle(a._currYear,a._currMonth),a._renderWeeks(a.value(),a._currYear,a._currMonth))}),b.on("click",".eba-calendar-yearPrev",function(){a.enabled()&&(--a._currYear,a._renderTitle(a._currYear,a._currMonth),a._renderWeeks(a.value(),a._currYear,a._currMonth))})},_setupWeeksEvents:function(){var b=this,c=b._$root;c.on("click",".eba-calendar-date",function(d){if(b.enabled()){var e=a(this),f=new moment(e.attr("data-value"),"YYYY-M-D"),g=!e.hasClass("eba-calendar-othermonth");if(g){var h=f.toDate(),i=b.value();i.setFullYear(h.getFullYear()),i.setMonth(h.getMonth()),i.setDate(h.getDate());var j="."+b._cssClass.selected;a(j,c).removeClass(b._cssClass.selected),e.addClass(b._cssClass.selected),b.options.onchange(b,d),b.options.onclick(b,d)}}})},_setupMenuEvents:function(){var b=this,c=this._$root;c.on("click",".eba-calendar-menu-prevYear",function(){if(b.enabled()){var d=a(".eba-calendar-menu-year",c).first(),e=parseInt(d.attr("data-value"))-10,f=b._getMenuYears(e);b._renderMenu(f,b._currYear,b._currMonth)}}),c.on("click",".eba-calendar-menu-nextYear",function(){if(b.enabled()){var d=a(".eba-calendar-menu-year",c).last(),e=parseInt(d.attr("data-value"))+1,f=b._getMenuYears(e);b._renderMenu(f,b._currYear,b._currMonth)}}),c.on("click",".eba-calendar-menu-month",function(){b.enabled()&&(a(".eba-calendar-menu-month",c).filter(".eba-calendar-menu-selected").removeClass("eba-calendar-menu-selected"),a(this).addClass("eba-calendar-menu-selected"))}),c.on("click",".eba-calendar-menu-year",function(){b.enabled()&&(a(".eba-calendar-menu-year",c).filter(".eba-calendar-menu-selected").removeClass("eba-calendar-menu-selected"),a(this).addClass("eba-calendar-menu-selected"))}),c.on("click",".eba-calendar-okButton",function(){if(b.enabled()){var d=a(".eba-calendar-menu-month",c).filter(".eba-calendar-menu-selected");b._currMonth=parseInt(d.attr("data-value"));var e=a(".eba-calendar-menu-year",c).filter(".eba-calendar-menu-selected");b._currYear=parseInt(e.attr("data-value"));var f=b.value();f.setFullYear(b._currYear),f.setMonth(b._currMonth),b._renderTitle(b._currYear,b._currMonth),b._renderWeeks(f,b._currYear,b._currMonth),b._toggleMenu()}}),c.on("click",".eba-calendar-cancelButton",function(){if(b.enabled()){b._toggleMenu();var a=b._getMenuYears(b._currYear);b._renderMenu(a,b._currYear,b._currMonth)}})},_setupEvents:function(){var a=this;a._setupTitleEvents(),a._setupWeeksEvents(),a._setupMenuEvents()},_initControl:function(){var b=this;b._super();var c=a.trim(a("#ebaui-template-calendar-week").html());b._compiledCalendarWeekTmpl=b.compileTmpl(c);var d=a.trim(a("#ebaui-template-calendar-weeksheader").html());b._compiledHeaderTextTmpl=b.compileTmpl(d);var e=a.trim(a("#ebaui-template-calendar-menu").html());b._compiledCalendarMenuTmpl=b.compileTmpl(e);var f=b.options.value,g=new moment(f);f=g.isValid()?g.toDate():new Date,b._currYear=f.getFullYear(),b._currMonth=f.getMonth(),b.value(f)},_getMenuYears:function(a){a=parseInt(a);for(var b=a+10,c=[],d=a;b>d;d++)c.push(d);return c},_getWeeks:function(a,b){for(var c=[],d=new Date(a,b+1,0).getDate(),e=1;d>=e;e++)c.push([a,b,e]);for(var f=[],g=[];c.length>0;){var h=c.shift();g.push(h),6==new Date(h[0],h[1],h[2]).getDay()&&(f.push(g),g=[])}g.length&&f.push(g);var i=f[0];if(i.length<7)for(;i.length<7;){var j=i[0],h=new Date(j[0],j[1],j[2]-1);i.unshift([h.getFullYear(),h.getMonth(),h.getDate()])}else{for(var j=i[0],g=[],e=1;7>=e;e++){var h=new Date(j[0],j[1],j[2]-e);g.unshift([h.getFullYear(),h.getMonth(),h.getDate()])}f.unshift(g)}for(var k=f[f.length-1];k.length<7;){var l=k[k.length-1],h=new Date(l[0],l[1],l[2]+1);k.push([h.getFullYear(),h.getMonth(),h.getDate()])}if(f.length<6){for(var l=k[k.length-1],g=[],e=1;7>=e;e++){var h=new Date(l[0],l[1],l[2]+e);g.push([h.getFullYear(),h.getMonth(),h.getDate()])}f.push(g)}return f},_renderTitle:function(b,c){var d=this,e=new Date(b,c,1),f=new moment(e),g=f.format(d._titleDisplayFormat);a(".eba-calendar-title",d._$root).text(g)},_renderWeeksHeader:function(){var b=this,c=b._compiledHeaderTextTmpl({text:b._weeks});a('[data-role="weeksHeader"]',b._$root).html(c)},_renderWeeks:function(b,c,d){var e=this,f=e._$root,g=e._getWeeks(c,d),h=e._compiledCalendarWeekTmpl({year:c,month:d,value:[b.getFullYear(),b.getMonth(),b.getDate()],weeks:g});a(".eba-calendar-days",f).remove(),a('[data-role="footer"]',f).before(h)},_renderMenu:function(b,c,d){var e=this._$root,f=[c,d,1];b||(b=this._getMenuYears(c));var g=this._compiledCalendarMenuTmpl({value:f,years:b,months:this._months});a('[data-role="menu"]',e).html(g)},_render:function(){var a=this;a._super(),a._renderWeeksHeader();var b=a.value(),c=a._getMenuYears(a._currYear);a._renderTitle(a._currYear,a._currMonth),a._renderWeeks(b,a._currYear,a._currMonth),a._renderMenu(c,a._currYear,a._currMonth)},_accessValue:function(a){var b=this;if(!a)return b.options.value;var c=new moment(a);if(!c.isValid())throw b._formatInvalidException;var d=c.toDate();b.options.value=d,b._currYear=d.getFullYear(),b._currMonth=d.getMonth();var e=b._getMenuYears(b._currYear);b._renderTitle(b._currYear,b._currMonth),b._renderWeeks(d,b._currYear,b._currMonth),b._renderMenu(e,b._currYear,b._currMonth),b.options.onchange(b,event)},data:function(a){return this._accessValue(a)},value:function(a){return this._accessValue(a)},reset:function(){var a=this;a.errors={},a.options.value=new Date,a._isValid=!0,a._render()},options:{position:"absolute",width:220,height:169,value:new Date,onclick:a.noop,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("TimeSpinner",!0),b.control("web.TimeSpinner",b.web.FormElement,{_currInput:0,_rootHtmlTmpl:"#ebaui-template-timespinner",_cssClass:{disabled:"eba-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},_max:{hour:23,minute:59,second:59},_min:{hour:0,minute:0,second:0},_focus:function(){var b=this;a("input",b._$root).eq(b._currInput).focus()},_blur:function(){var b=this;a("input",b._$root).eq(b._currInput).blur()},_updateStyleWidth:function(){var a=this;a._$root.width(a.width()),a._updateUiInput()},_updateStyleFocused:function(){var a=this,b=a._$root,c=a._cssClass;a.focused()?b.addClass(c.focused):b.removeClass(c.focused)},_updateStyleEnabled:function(){var b=this,c=b._$root,d=b._cssClass;b.enabled()?(a("input",c).attr("disabled",null),c.removeClass(d.disabled)):(a("input",c).attr("disabled","disabled"),c.removeClass(d.focused).addClass(d.disabled))},_updateStyleReadonly:function(){var b=this,c=b._$root,d=b._cssClass;b.readonly()?(c.addClass(d.readonly),a(".eba-buttonedit-buttons",c).hide(),a("input",c).attr("readonly","readonly")):(c.removeClass(d.readonly),a("input",c).attr("readonly",null),a(".eba-buttonedit-buttons",c).show())},_updateUiInput:function(){var b=this,c=b._$root,d=b.timeFormat(),e=d.split(":"),f=c.width()-a(".eba-buttonedit-button",c).width(),g=f,h='[data-pos="hour"]',i='[data-pos="minute"]',j='[data-pos="second"]';switch(e.length){case 1:a(h,c).width(g),a(i,c).parent().hide(),a(j,c).parent().hide();break;case 2:g=.4*f,a(h,c).width(g),a(i,c).width(g),a(j,c).parent().hide();break;case 3:g=.3*f,a(h,c).width(g),a(i,c).width(g),a(j,c).width(g)}},_render:function(){var b=this,c=b.value();if(c)for(var d=c.split(":"),e=a("input",b._$root),f=0,g=e.size();g>f;f++)e.eq(f).val(d[f]);b._super()},_setupEvents:function(){var c=this,d=c._$root;c._$formInput;var e=c._max,f=c._min,g=function(b,g){var h=a("input",d).eq(c._currInput),i=h.attr("data-pos"),j=c[i+"Step"](),k=parseInt(h.val()),l=c.circular();b&&!l?k=k+j<e[i]?k+j:e[i]:b||l||(k=k-j>f[i]?k-j:f[i]),b&&l?k=k+j<e[i]?k+j:k+j-e[i]:!b&&l&&(k=k-j>f[i]?k-j:e[i]-Math.abs(k-j-f[i])),h.val(k),c.options.onchange(c,g)};d.on("keydown","input",function(a){var c=a.which==b.keycodes.down_arrow||a.which==b.keycodes.up_arrow||a.which==b.keycodes.enter||a.which==b.keycodes.backspace||a.which==b.keycodes.tab||b.keycodes.isNumber(a.which);return c}),d.on("keyup","input",function(d){var e=a(this),f=a("input",this._$root),g=d.which==b.keycodes.enter,h=f.index(e),i=c.timeFormat().split(":").length,j=i>1&&i-1>h;if(g&&j)f.eq(h+1).focus();else if(!g&&j){var k=e.val().toString();2==k.length?f.eq(h+1).focus():k.length>2&&(k=k.substr(0,2),e.val(k),f.eq(h+1).focus())}else{var k=e.val().toString();k.length>2&&(k=k.substr(0,2),e.val(k))}}),d.on("focus","input",function(){var b=parseInt(a(this).data("idx"));c._currInput=b,c._setOption("focused",!0),c._updateStyleFocused()}),d.on("blur","input",function(){c._setOption("focused",!1),c._updateStyleFocused()}),d.on("click",".eba-buttonedit-up",function(a){g(!0,a),c.options.onspinup(c,a)}),d.on("click",".eba-buttonedit-down",function(a){g(!1,a),c.options.onspindown(c,a)})},_padding:function(a,b){var c=new Date;if(b=b?b:"HH:mm:ss",a){a=a.toString();var d=a.split(":");parseInt(d[0]?d[0]:0),parseInt(d[1]?d[1]:0),parseInt(d[2]?d[2]:0),c.setHours(d[0]),c.setMinutes(d[1]),c.setSeconds(d[2])}else a=c;var e=new moment(a,b);return e.isValid()?e.format(b):(e=new moment,e.format(b))},_initControl:function(){var b=this;b._$border=a(".eba-buttonedit-border",b._$root),b._initValidators();var c=b._padding(b.value(),b.timeFormat());b.options.value=c},focusable:function(){return!0},timeFormat:function(a){var b=this;return a?(b.options.timeFormat=a.toString(),b._updateUiInput(),void 0):b.options.timeFormat},_accessValue:function(b){var c=this;if(!b)return c.options.value;var d=c._padding(b,c.timeFormat());c.options.value=d;var e=c.value();if(e)for(var f=e.split(":"),g=a("input",c._$root),h=0,i=g.size();i>h;h++)g.eq(h).val(f[h]);c.options.onchange(c,{})},data:function(a){return this._accessValue(a)},text:function(a){return this._accessValue(a)},value:function(a){return this._accessValue(a)},circular:function(a){var b=this;return b.isBoolean(a)?(b.options.circular=a,void 0):b.options.circular},_accessStep:function(a,b){var c=this;return c.isNumber(a)?(c.options[b]=a,void 0):c.options[b]},hourStep:function(a){return this._accessStep(a,"hourStep")},minuteStep:function(a){return this._accessStep(a,"minuteStep")},secondStep:function(a){return this._accessStep(a,"secondStep")},options:{position:"absolute",width:150,height:21,value:"",circular:!1,hourStep:1,minuteStep:10,secondStep:10,timeFormat:"HH:mm",onspinup:a.noop,onspindown:a.noop,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("DateTimePicker",!0),b.control("web.DateTimePicker",b.web.Combo,{_calendar:void 0,_timeSpinner:void 0,_buttons:{today:{text:"today",visible:!0,onclick:function(a,b){b.stopPropagation();var c=new Date,d=a.showTimeSpinner();if(d){var e=d?a._timeSpinner.value():"00:00:00";e.split(":"),e.length>0&&(c.setHours(e[0]),c.setMinutes(e[1])),3==e.length&&c.setSeconds(e[2])}a.value(c),a._panel.close()}},ok:{text:"ok",visible:!0,onclick:function(a,b){b.stopPropagation();var c=a._calendar.value(),d=new moment(c),e=a.showTimeSpinner()?a._timeSpinner.value():"00:00:00",f=d.format("YYYY-MM-DD")+" "+e;a.value(f),a._panel.close()}},clear:{text:"clear",visible:!1,onclick:function(a,b){b.stopPropagation();var c=a.options;c.value=null,c.onchange(a,b),a._$formInput.val(""),a._panel.close()}}},_initPanel:function(){var c=this,d=c.id();c._$root;var e=a('<div data-options="{ visible:false }" style="display:none;"><input /></div>').appendTo(document.body);e.panel({id:"panel-"+d,position:"absolute"}),a("input",e).calendar({width:260,height:0,position:""});var f=c.showTimeSpinner();f&&(a('[data-role="calendar-timespinner"]',e).timespinner({width:120,height:0,position:""}),c._timeSpinner=b.get(a('[data-role="timespinner"]',e)));for(var g=0,h=["today","ok","clear"],i=c._buttons,j=0,k=h.length;k>j;j++){var l=i[h[j]];l.visible&&++g}(f||g>0)&&a('tr[data-role="footer"]',e).show(),c._panel=b.get(e),c._calendar=b.get(a('[data-role="calendar"]',e))},_renderButtons:function(){var b=this,c=b._buttons,d=b._panel.uiElement(),e=['<input class="today" style="display:none;"/>','<span class="eba-calendar-footerSpace"></span>','<input class="ok" style="display:none;"/>','<span class="eba-calendar-footerSpace"></span>','<input class="clear" style="display:none;"/>'].join("");a('[data-role="buttonGroup"]',d).html(e);for(var f=["today","ok","clear"],g=0,h=f.length;h>g;g++){var i=f[g],j=c[i],k='[data-role="buttonGroup"] .'+i,l=function(a){return function(c,d){a.onclick(b,d)}}(j);a(k,d).button({width:30,text:j.text,visible:j.visible,onclick:l})}},_updateStyleEnabled:function(){var a=this,b=a.enabled();a._calendar.enabled(b),a.showTimeSpinner()&&a._timeSpinner.enabled(b),b||a._panel.close(),a._super()},_updateUIDateTime:function(a){var b=this,c=new moment(a);if(a&&c.isValid()){var d=c.format(b.dateTimeFormat());b._$formInput.val(d)}},_render:function(){var a=this;a._super(),a._renderButtons(!a.showTimeSpinner()),a._updateUIDateTime(a.value())},_initControl:function(){var a=this;a._super(),a._$root.addClass("eba-datepicker eba-popupedit"),a._initPanel();var b=a.value(),c=new moment(b);if(b&&c.isValid()){var d=c.toDate();a.options.value=d,a._calendar.value(d),showTimeSpinner&&a._timeSpinner.value(c.format("HH:mm"))}var e=a._buttons;e.today.visible=a.showTodayButton(),e.ok.visible=a.showOkeyButton(),e.clear.visible=a.showClearButton()},_formatInvalidException:"The date is invalid, please input a valid date!",_accessValue:function(a){var b=this;if(b.isNull(a))return b.options.value;var c=new moment(a);if(!c.isValid())throw b._formatInvalidException;var d=b.options,e=c.toDate();b._updateUIDateTime(e),d.value=e,d.onchange(b,event)},data:function(a){return this._accessValue(a)},value:function(a){return this._accessValue(a)},reset:function(){var a=this;a.errors={},a._isValid=!0;var b=new Date,c=a._timeSpinner,d=a._calendar,e=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();a.options.value=b,d.reset(),c.reset(),d.value(b),c.value(e)},showTodayButton:function(a){var b=this,c=b.options;return b.isBoolean(a)?(c.showTodayButton=a,void 0):c.showTodayButton},showClearButton:function(a){var b=this;return b.isBoolean(a)?(b.options.showClearButton=a,void 0):b.options.showClearButton},showOkeyButton:function(a){var b=this;return b.isBoolean(a)?(b.options.showOkeyButton=a,void 0):b.options.showOkeyButton},showTimeSpinner:function(a){var b=this;return b.isBoolean(a)?(b.options.showTimeSpinner=a,void 0):b.options.showTimeSpinner},dateTimeFormat:function(a){var b=this;return a?(b.options.dateTimeFormat=a.toString(),void 0):b.options.dateTimeFormat},options:{position:"absolute",value:void 0,dateTimeFormat:"YYYY-MM-DD HH:mm",showTimeSpinner:!1,showClearButton:!1,showTodayButton:!0,showOkeyButton:!0}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Spinner",!0),b.control("web.Spinner",b.web.FormElement,{_rootHtmlTmpl:"#ebaui-template-spinner",_cssClass:{disabled:"eba-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},_focus:function(){var b=this;a("input",b._$root).eq(b._currInput).focus()},_blur:function(){var b=this;a("input",b._$root).eq(b._currInput).blur()},_updateStyleFocused:function(){var a=this;a.focused()?a._$root.addClass(a._cssClass.focused):a._$root.removeClass(a._cssClass.focused)},_updateStyleEnabled:function(){var b=this,c=b._$root;b.enabled()?(a("input",c).attr("disabled",null),c.removeClass(b._cssClass.disabled)):(a("input",c).attr("disabled","disabled"),c.removeClass(b._cssClass.focused).addClass(b._cssClass.disabled))},_updateStyleReadonly:function(){var b=this,c=b._$root;b.readonly()?(c.addClass(b._cssClass.readonly),a(".eba-buttonedit-buttons",c).hide(),a("input",c).attr("readonly","readonly")):(c.removeClass(b._cssClass.readonly),a("input",c).attr("readonly",null),a(".eba-buttonedit-buttons",c).show())},_fixNumber:function(a){var b=this;b.isNull(a)&&(a=b.value());var c=b.decimalPlaces(),d=0>c?a.toString():a.toFixed(c);return d},_render:function(){var a=this;a._$formInput.val(a._fixNumber()),a._super()},_setupEvents:function(){var a=this,c=a._$root,d=a._$formInput;c.on("keyup","input",function(c){c.which==b.keycodes.up_arrow?a.stepUp():c.which==b.keycodes.down_arrow&&a.stepDown()}),c.on("change","input",function(){var b=d.val();a.value(b)}),c.on("focus","input",function(){a._setOption("focused",!0),a._updateStyleFocused()}),c.on("blur","input",function(){a._setOption("focused",!1),a._updateStyleFocused()}),c.on("click",".eba-buttonedit-up",function(b){a.stepUp(),a.options.onspinup(a,b)}),c.on("click",".eba-buttonedit-down",function(b){a.stepDown(),a.options.onspindown(a,b)})},_initControl:function(){var b=this;b._$formInput=a("input",b._$root),b._$border=a(".eba-buttonedit-border",b._$root),b._initValidators();var c=b.options.value;b.isNumber(c)||(c=0);var d=b._fixNumber(c);b.options.value=parseFloat(d)},focusable:function(){return!0},_accessValue:function(a){var b=this;if(b.isNull(a))return b.options.value;a=parseFloat(a),isNaN(a)&&(a=0);var b=this,c=b.max(),d=b.min();d>a&&(a=d),a>c&&(a=c);var e=b._fixNumber(a);a=parseFloat(e),b.options.value=a,b._$formInput.val(e),b.options.onchange(b,{})},data:function(a){return this._accessValue(a)},text:function(a){return this._accessValue(a)},value:function(a){return this._accessValue(a)},step:function(a){var b=this;return b.isNumber(a)?(b.options.step=a,void 0):b.options.step},stepUp:function(){var a=this.step(),b=this.max(),c=this.value();c=c+a>b?b:c+a,this.value(c)},stepDown:function(){var a=this,b=a.step(),c=a.min(),d=a.value();d=c>d-b?c:d-b,a.value(d)},min:function(a){var b=this;return b.isNumber(a)?(b.options.min=a,void 0):b.options.min},max:function(a){var b=this;return b.isNumber(a)?(b.options.max=a,void 0):b.options.max},decimalPlaces:function(a){var b=this;return b.isNumber(a)?(b.options.decimalPlaces=a,void 0):b.options.decimalPlaces},options:{decimalPlaces:-1,width:150,height:21,value:0,step:1,min:0,max:100,onspinup:a.noop,onspindown:a.noop,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerControl("FileUploader",!0),b.control("web.FileUploader",b.web.FormElement,{_uploader:null,_rootHtmlTmpl:"#ebaui-template-fileuploader",_uploadUrlEmptyException:"the uploadUrl property can not be null or empty!",_updateUIButtonText:function(){a(".eba-buttonedit-button",this._$root).text(this.buttonText())},_render:function(){var a=this;a._super(),a._updateUIButtonText()},_initControl:function(){var c=this,d=c.uploadUrl();if(!d)throw c._uploadUrlEmptyException;c._$formInput=a("input",c._$root);var e=c.controlID()+"$span",f=c._$root,g=f.offset();a('<div><span id="'+e+'""></span></div>').css({position:"absolute",top:g.top,left:g.left,width:f.width(),height:f.height()}).appendTo(document.body);var h=b.web.urlRoot+"lib/SWFUpload/Flash/swfupload.swf",i={post_params:c.extraParams(),file_post_name:c.filePostName(),file_types:c.fileType(),file_size_limit:c.fileSizeLimit(),file_queue_limit:0,file_upload_limit:0,button_width:"100%",button_height:"100%",button_placeholder_id:e,upload_url:c.uploadUrl()},j={upload_start_handler:function(a){c._uploader.setButtonDisabled(!0),c.options.onuploadstart(c,{file:a})},upload_progress_handler:function(a,b,d){c.options.onuploadprogress(c,{file:a,bytesComplete:b,totalBytes:d})},upload_error_handler:function(a,b,d){c._uploader.setButtonDisabled(!1),c.options.onuploaderror(c,{file:a,errorMsg:d})},upload_success_handler:function(a,b,d){c._uploader.setButtonDisabled(!1),c.options.onuploadsucc(c,{file:a,serverData:b,serverResponse:d})},upload_complete_handler:function(a){c.options.onuploadcomplete(c,{file:a})},file_dialog_start_handler:function(){c._uploader.cancelQueue()},file_queued_handler:function(a){c._$formInput.val(a.name)},file_queue_error_handler:function(a,b){switch(b){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:}},file_dialog_complete_handler:function(){c._uploader.getStats(),c.uploadOnSelect()&&c._uploader.startUpload()}},k={flash_url:h,use_query_string:!1,requeue_on_error:!0,http_success:[201,202],assume_success_timeout:0,file_types_description:"",debug:!1,debug_handler:a.noop,prevent_swf_caching:!1,preserve_relative_urls:!1,button_text:"",button_image_url:"",button_text:"",button_text_style:"",button_text_left_padding:3,button_text_top_padding:2,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILES,button_disabled:!1,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT},l=a.extend(k,i,j);c._uploader=new SWFUpload(l)},startUpload:function(a){var b=this._uploader;b&&b.startUpload(a)},addPostParam:function(a,b){var c=this._uploader;c&&a&&b&&c.addPostParam(a,b)},uploadUrl:function(a){var b=this;return b.isString(a)?(b.options.uploadUrl=a,void 0):b.options.uploadUrl},buttonText:function(a){var b=this;if(!b.isString(a))return b.options.buttonText;var c=b._uploader;b.options.buttonText=a,b._updateUIButtonText(),c&&c.setButtonText(a)},uploadOnSelect:function(a){var b=this;return b.isBoolean(a)?(b.options.uploadOnSelect=a,void 0):b.options.uploadOnSelect},fileType:function(a){var b=this;if(!b.isString(a))return b.options.fileType;var c=b._uploader;b.options.fileType=a,c&&c.setFileTypes(a)},fileSizeLimit:function(a){var b=this;if(!b.isString(a))return b.options.fileSizeLimit;var c=b._uploader;b.options.fileSizeLimit=a,c&&c.setFileSizeLimit(a)},filePostName:function(a){var b=this;if(!b.isString(a))return b.options.filePostName;var c=b._uploader;b.options.filePostName=a,c&&c.setFilePostName(a)},extraParams:function(a){var b=this;if(!b.isObject(a))return b.options.extraParams;var c=b._uploader,d=b.options.extraParams;if(c&&d)for(var e in d)c.removePostParam(e);if(c&&a)for(var e in a)c.addPostParam(e,a[e]);b.options.extraParams=a},options:{position:"absolute",width:150,height:21,buttonText:"浏览...",fileType:"*.jpg;*.gif;*.png",fileSizeLimit:"10MB",filePostName:"ebauiUploadedFiles",uploadUrl:"",uploadOnSelect:!1,extraParams:{},onuploadstart:a.noop,onuploadprogress:a.noop,onuploaderror:a.noop,onuploadsucc:a.noop,onuploadcomplete:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerControl("Checkbox",!0),b.control("web.Checkbox",b.web.FormElement,{_rootHtmlTmpl:"#ebaui-template-checkbox",_render:function(){var a=this;a._updateStyleChecked(),a._updateUILabel(),a._super()},_setupEvents:function(){var a=this,b=a._$root;b.on("change","input",function(b){a.options.checked=this.checked,a.options.onchange(a,b)})},_initControl:function(){var b=this;b._$formInput=a("input",b._$root);var c=b.name();c&&b._$formInput.attr("name",c),b._$formInput.attr("id",b.controlID()),a("label",b._$root).attr("for",b.controlID())},_updateUILabel:function(){a("label",this._$root).text(this.text())},_updateStyleChecked:function(){var a=this;a._$formInput.get(0).checked=a.checked()},reset:function(){var a=this;a.checked(!1),a.errors={},a._isValid=!0,a.clearTips()},text:function(a){var b=this;return b.isString(a)?(b.options.text=a,b._updateUILabel(),void 0):b.options.text},data:function(a){var b=this;if(b.isNull(a))return b.options.checked;var c=a[b.textField()];c&&b.text(c);var d=a[b.valueField()];b.isNull(a)||b.value(d),b.isBoolean(a.checked)&&b.checked(a.checked)},value:function(a){var b=this;return b.isNull(a)?b.options.value:(b.options.value=a,void 0)},checked:function(a){var b=this;return b.isBoolean(a)?(b.options.checked=a,b._updateStyleChecked(),void 0):b.options.checked},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,void 0):b.options.valueField},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,void 0):b.options.textField},options:{position:"absolute",text:"",value:!0,valueField:"value",textField:"text",checked:!1,onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerControl("CheckboxList",!0),b.control("web.CheckboxList",b.web.FormElement,{_usingRemoteData:!1,_rootHtmlTmpl:"#ebaui-template-checkboxlist",_compiledListItemTmpl:a.noop,_renderListItem:function(){var b=this,c=b._dataItems;if(!b.isEmpty(c)){var d=b._compiledListItemTmpl({controlID:b.controlID(),textField:b.textField(),valueField:b.valueField(),dataItems:c});a("tr",b._$root).html(d)}},_dataItems:[],_loadData:function(b){var c=this,d=c.dataSource();if(b||(b=a.noop),c._usingRemoteData){var e={},f=d.url;c.isFunc(d.data)?e=d.data():d.data&&c.isObject(d.data)&&(e=d.data),a.getJSON(f,e).done(function(a){c._dataItems=a,b()})}else c._dataItems=d,b()},_render:function(){var a=this;a._super(),a._loadData(function(){var b=a.options.value,c=a._dataItems,d=a.valueField();if(b&&b.length>0)for(var e=0,f=b.length;f>e;e++)for(var g=0,h=c.length;h>g;g++){var i=c[g];i.checked=i[d]==b[g]?"true":!1}a._renderListItem()})},_setupEvents:function(){var a=this,b=a._$root;b.on("change","input",function(b){a.options.onchange(a,b)})},_initControl:function(){var b=this,c=a.trim(a("#ebaui-template-checkboxlist-item").html());b._compiledListItemTmpl=b.compileTmpl(c),b._usingRemoteData=b.isUsingRemoteData(b.options.dataSource)},data:function(a){var b=this;if(!b.isArray(a)){for(var c=[],d=b.value(),e=b._dataItems,f=b.valueField(),g=b.textField(),h=0,i=d.length;i>h;h++)for(var j=0,k=e.length;k>j;j++){var l=e[j];l[f]==d[h]&&c.push({text:l[g],value:d[h]})}return c}b.value(a)},value:function(b){var c=this;if(!c.isArray(b)){var d=[];return a("input:checked",c._$root).each(function(b,c){d.push(a(c).val())}),d}for(var e=0,f=b.length;f>e;e++){var g='input[value="]'+b[e]+'"]',h=a(g,this._$root);h.size()>0&&(h.get(0).checked=!0)}c.options.onchange(c,{})},valueField:function(a){var b=this;return b.isString(a)?(b.options.valueField=a,void 0):b.options.valueField},textField:function(a){var b=this;return b.isString(a)?(b.options.textField=a,void 0):b.options.textField},dataSource:function(a){var b=this;return a?(b._usingRemoteData=b.isUsingRemoteData(a),b.options.dataSource=a,b._loadData(function(){b._renderListItem()}),void 0):b.options.dataSource},options:{position:"absolute",text:[],value:[],valueField:"value",textField:"text",dataSource:"",onchange:a.noop}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Captcha",!0),b.control("web.Captcha",b.web.TextBox,{_rootHtmlTmpl:"#ebaui-template-captcha",_setupEvents:function(){var b=this,c=b._$root;b._$formInput,c.on("click",'[data-role="btn-reload"]',function(){b.refresh()}),c.on("focus",".eba-textbox-input",function(){b._setOption("focused",!0),b._updateStyleFocused()}),c.on("blur",".eba-textbox-input",function(){b._setOption("focused",!1),b._updateStyleFocused()}),c.on("change",".eba-textbox-input",function(){b.validateOnChange()&&b.validate()}),c.on("click",".eba-placeholder-lable",function(){a(this).hide(),b._$formInput.focus()}),b._super()},_serverDataInvalidException:"captcha code server response is invalid!!",_dataSourceInvalidException:"the dataSource format is invalid, only remote dataSource supported!",_loadCaptcha:function(){var b=this,c=b.options.dataSource,d=b.isUsingRemoteData(c);if(!d)throw b._dataSourceInvalidException;var e=c.url,f={};b.isFunc(c.data)?f=c.data():a.extend(f,c.data),f.t=(new Date).getTime().toString()+parseInt(1e3*Math.random()).toString(),e+="?"+a.param(f),b._$captchaImg.attr("src",e)},_initControl:function(){var b=this;b._super(),b._$captchaImg=a(".eba-code-img",b._$root),b._$btnReload=b._$captchaImg.parent();var c=b.options;c.validationUrl||(c.validationUrl=c.dataSource.url),b._addRemoteValidator(c.validateOnServer),b._loadCaptcha()},refresh:function(){this._loadCaptcha()},data:function(){return this._$formInput.val()},value:function(){return this._$formInput.val()},dataSource:function(a){return a?(this.options.dataSource=a,void 0):this.options.dataSource},_addRemoteValidator:function(a){var b=this;if(a&&!b.hasValidator("remote")){window.captchaPass=function(a,b){return b?null==b.result||void 0==b.result?!1:1==parseInt(b.result):!1};var c="remote['url${0}','token${1}','pass$captchaPass']".replace("{0}",b.validationUrl()).replace("{1}",b.queryKey());b.addValidator(c)}else a||b.removeValidator("remote")},validateOnServer:function(a){var b=this;return b.isBoolean(a)?(b.options.validateOnServer=a,b._addRemoteValidator(a),void 0):b.options.validateOnServer},validationUrl:function(a){var b=this,c=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return c.test(a)?(b.options.validationUrl=a,void 0):b.options.validationUrl},queryKey:function(a){var b=this;return b.isEmpty(a)?b.options.queryKey:(b.options.queryKey=a,void 0)},reset:function(){var a=this;a.errors={},a._isValid=!0,a._$formInput.val(""),a.clearTips()},options:{position:"absolute",top:0,left:0,width:250,height:21,validateOnServer:!1,validateOnChange:!1,placeholder:"请输入...",validationUrl:"",queryKey:"verify",dataSource:""}})}(jQuery,ebaui),function(a,b){b.web.registerControl("RadioButtonList",!0),b.control("web.RadioButtonList",b.web.CheckboxList,{_rootHtmlTmpl:"#ebaui-template-radiobuttonlist",_renderListItem:function(){var b=this,c=b._dataItems;if(c&&0!=c.length){var d=b._compiledListItemTmpl({name:b.name(),controlID:b.controlID(),textField:b.textField(),valueField:b.valueField(),dataItems:c});
a("tr",b._$root).html(d)}},_render:function(){var b=this;b._super(),b._loadData(function(){b._renderListItem();var c=b.options.value;if(c){var d=a('input[value="'+c+'"]',this._$root);d.size()>0&&(d.get(0).checked=!0)}})},_initControl:function(){var b=this;b.name()||(b.options.name=b.controlName()+b.controlID());var c=a.trim(a("#ebaui-template-radiobuttonlist-item").html());b._compiledListItemTmpl=b.compileTmpl(c),b._usingRemoteData=b.isUsingRemoteData(b.options.dataSource)},data:function(a){var b=this;if(!b.isArray(a)){var c=null,d=b.value(),e=b._dataItems,f=b.valueField();b.textField();for(var g=0,h=e.length;h>g;g++){var i=e[g];i[f]==d&&(c=i)}return c}b.value(a)},value:function(b){var c=this;if(!c.isNumber(b)){var d=null;return a("input:checked",c._$root).each(function(b,c){d=a(c).val()}),d}var e='input[value="]'+b+'"]',f=a(e,c._$root);f.size()>0&&(f.get(0).checked=!0),c.options.onchange(c,{})}})}(jQuery,ebaui),function(a,b){b.web.registerFormControl("Hidden",!0),b.control("web.Hidden",b.web.FormElement,{_rootHtmlTmpl:"#ebaui-template-hidden",_accessValue:function(a){return a?(this.options.value=a,void 0):this.options.value},data:function(a){return this._accessValue(a)},value:function(a){return this._accessValue(a)},options:{width:0,height:0,value:null}})}(jQuery,ebaui),function(a,b){b.web.registerControl("Form",!1),b.control("web.Form",{_formelements:function(){return b.web.formControls},_isValid:!0,options:{fields:[],action:"",name:"",method:"",acceptCharset:"",enctype:""},_forEach:function(a){for(var b=this.fields(),c=0,d=b.length;d>c;c++)a(b[c])},_render:function(){this.visible()?this._$root.show():this._$root.hide()},_parseUi:function(b){return a(b)},_parseAttrOptions:function(b){var c=a(b),d={};return d.fields=[],d.action=c.attr("action")||"",d.name=c.attr("name")||"ebaui-form",d.method=c.attr("method")||"GET",d.acceptCharset=c.attr("accept-charset")||"",d.enctype=c.attr("enctype")||"application/x-www-form-urlencoded",d},_setupEvents:function(){var c=this._$root;c.on("keyup",function(d){var e=a(d.target).parents('[data-ns="ebaui.web"]',c).eq(0),f=b.get(e),g=d.which==b.keycodes.enter;if(f&&f.focusable()&&f.enterAsTab()&&g){var h=f.__nextTab__;h&&h.focused(!0)}})},_initControl:function(){var c=this,d=c.id();c._formelements(),d&&c._$root.attr("id",d);var e=a('[data-ns="ebaui.web"]',c._$root),f=e.size();e.each(function(a,d){var g=b.get(d);if(g&&g.data){c.options.fields.push(g);for(var h=a+1;f>h;h++){var i=b.get(e.eq(h));if(i&&i.focusable()){g.__nextTab__=i;break}}}})},name:function(a){var b=this;return b.isEmpty(a)?b.options.name:(b.options.name=a,void 0)},fields:function(){return this.options.fields},elements:function(){return this.options.fields},data:function(a){if(!a){var c={};return this._forEach(function(a){if(a.data){var b=a.name(),d=a.data();c[b]=d}}),c}var c=a;me.isString(a)&&(c=b.fromJSON(a)),this._forEach(function(a){var b=a.name(),d=c[b];d&&a.data(d)})},value:function(a){if(!a){var c={};return this._forEach(function(a){if(a.value){var b=a.name();if(b){var d=a.value();return a.checked?a.checked&&a.checked()?(c[b]=d,void 0):void 0:(c[b]=d,void 0)}}}),c}me.isString(a)&&(a=b.fromJSON(a)),this._forEach(function(b){var c=b.name(),d=a[c];d&&b.value(d)})},action:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.action=b,void 0):c.options.action},method:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.method=b.toUpperCase(),void 0):c.options.method},acceptCharset:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.acceptCharset=b,void 0):c.options.acceptCharset},enctype:function(b){var c=this;return c.isString(b)&&""!=a.trim(b)?(c.options.enctype=b,void 0):c.options.enctype},validate:function(){var a=this.fields();if(0==a.length)return!0;var b=a.length,c=!1;if(c=a[0].validate(),b>1)for(var d=1;b>d;d++)c=a[d].validate()&&c;return this._isValid=c,c},reset:function(){this._forEach(function(a){a.reset&&a.reset()})},submit:function(b){var c=this,d=c.action(),e="GET"===c.method(),f=c.value();b&&b.data&&(f=a.extend(f,b.data),delete b.data);var g=e?"GET":"POST",h=a.extend({type:g,url:d,data:f},b);a.ajax(h)}}),b.web.getForm=function(b,c){var d=a(b,c);return d.data("model")?d.data("model"):(d.form(),d.data("model"))}}(jQuery,ebaui),function(a,b){b.web.registerControl("Panel"),b.control("web.Panel",{_parseUi:function(b){return a(b)},_initControl:function(){var a=this,b=a.id();b&&a._$root.attr("id",b)},toggle:function(){var a=this,b=a.visible();a.visible(!b)},open:function(){this.visible(!0)},close:function(){this.visible(!1)},move:function(a){if(a){var b=this,c=b.options;null!==a.top&&(c.top=a.top),null!==a.left&&(c.left=a.left),b._$root.css({top:c.top,left:c.left})}},options:{position:"relative",width:0,height:0}})}(jQuery,ebaui),function(a,b){b.web.registerControl("UiLayout"),b.control("web.UiLayout",{_layoutPlugin:null,_mapRules:{fx:{name:"fxName",open:"fxSettings_open",close:"fxSettings_close"},button:{cls:"buttonClass"},content:{ignoreSelector:"contentIgnoreSelector",selector:"contentSelector"},toggler:{hideOnSlide:"hideTogglerOnSlide",open:{tip:"togglerTip_open",length:"togglerLength_open",align:"togglerAlign_open"},close:{tip:"togglerTip_closed",length:"togglerLength_closed",align:"togglerAlign_closed"}},spacing:{open:"spacing_open",close:"spacing_closed"}},_doRealMap:function(b,c,d){for(var e=this,f={},g={},h=0,i=c.length;i>h;h++){var j=c[h],k=e._mapRules[j];if(d[j]){for(var l in k){var m=null!==d[j][l]||void 0!==d[j][l];if(!e.isString(k[l])&&m){var n=k[l];for(var o in n)g[n[o]]=d[j][l][o]}else m&&(g[k[l]]=d[j][l])}delete d[j]}}return a.extend(g,d),f[b]=g,f},_mapToDefaultSection:function(a){for(var b={name:"defaults",applyDefaultStyles:!1,defaults:{size:"auto",minSize:50}},c=["fx","button","content"],d=0,e=c.length;e>d;d++){var f=c[d],g=this._mapRules[f];for(var h in g)if(a[f]){var i=g[h],j=a[f][h];b.defaults[i]=j}}return a.panes&&a.panes.cls&&(b.defaults.paneClass=a.panes.cls),b},_mapToCenterSection:function(a){if(!a.panes||!a.panes.center)return{};var b={center:{}},c=a.panes.center;for(var d in c)"toggler"!=d&&(b.center[d]=c[d]);return b},_mapToEastSection:function(a){return a.panes&&a.panes.east?this._doRealMap("east",["fx","toggler","spacing"],a.panes.east):{}},_mapToWestSection:function(a){return a.panes&&a.panes.west?this._doRealMap("west",["fx","toggler","spacing"],a.panes.west):{}},_mapToNorthSection:function(a){return a.panes&&a.panes.north?this._doRealMap("north",["fx","toggler","spacing"],a.panes.north):{}},_mapToSouthSection:function(a){return a.panes&&a.panes.south?this._doRealMap("south",["fx","toggler","spacing"],a.panes.south):{}},_map:function(b){var c=this,d=c._mapToDefaultSection(b),e=c._mapToNorthSection(b),f=c._mapToSouthSection(b),g=c._mapToWestSection(b),h=c._mapToEastSection(b),i=c._mapToCenterSection(b),j=a.extend({},d,e,f,g,h,i);return j},_getPanesConf:function(){var b=this,c=b._$root,d=b.options.layout.panes,e=a('[data-role="layout-west"]',c),f=a('[data-role="layout-east"]',c),g=a('[data-role="layout-north"]',c),h=a('[data-role="layout-south"]',c),i=a('[data-role="layout-center"]',c);if(e.size()>0){var j=b._parseDataOptions(e);a.extend(d.west,j)}if(f.size()>0){var k=b._parseDataOptions(f);a.extend(d.east,k)}if(g.size()>0){var l=b._parseDataOptions(g);a.extend(d.north,l)}if(h.size()>0){var m=b._parseDataOptions(h);a.extend(d.south,m)}if(i.size()>0){var n=b._parseDataOptions(i);a.extend(d.center,n)}return d},_parseUi:function(b){return a(b)},_initControl:function(){var b=this._getPanesConf();a.extend(this.options.layout.panes,b);var c=this._map(this.options.layout);this._layoutPlugin=this._$root.layout(c)},state:function(a){return this._layoutPlugin?/north|east|south|west|center|container/i.test(a)?this._layoutPlugin.state[a]:this._layoutPlugin.state:void 0},panes:function(){return this._layoutPlugin?this._layoutPlugin.panes:void 0},getPane:function(a){return this._layoutPlugin&&/north|east|south|west|center/i.test(a)?this._layoutPlugin.panes[a]:void 0},togglePane:function(a){var b=this;if(b.isString(a))return b._layoutPlugin?b._layoutPlugin.toggle(a):void 0},openPane:function(a){var b=this;if(b.isString(a))return b._layoutPlugin?b._layoutPlugin.open(a):void 0},closePane:function(a){var b=this;if(b.isString(a))return b._layoutPlugin?b._layoutPlugin.close(a):void 0},showPane:function(a){var b=this;if(b.isString(a))return b._layoutPlugin?b._layoutPlugin.show(a):void 0},hidePane:function(a){var b=this;if(b.isString(a))return b._layoutPlugin?b._layoutPlugin.hide(a):void 0},sizePane:function(a,b){var c=this;return c._layoutPlugin&&/north|east|south|west|center/i.test(a)?c._layoutPlugin.sizePane(a,b):void 0},resizeAllPanes:function(){var a=this;return a._layoutPlugin?a._layoutPlugin.resizeAll():void 0},options:{layout:{size:"auto",minSize:0,maxSize:0,panes:{cls:"ui-layout-pane",west:{size:"auto",initClosed:!1,closable:!0,slidable:!0,resizable:!0,paneSelector:'[data-role="layout-west"]',spacing:{open:5,close:5},toggler:{cls:"ui-layout-toggler",hideOnSlide:!0,open:{align:"center",tip:"Close This Pane",length:35},close:{align:"center",tip:"Open This Pane",length:35}}},east:{size:"auto",initClosed:!1,closable:!0,slidable:!0,resizable:!0,paneSelector:'[data-role="layout-east"]',spacing:{open:5,close:5},toggler:{cls:"ui-layout-toggler",hideOnSlide:!0,open:{align:"center",tip:"Close This Pane",length:35},close:{align:"center",tip:"Open This Pane",length:35}}},north:{size:"auto",initClosed:!1,closable:!0,slidable:!0,resizable:!0,paneSelector:'[data-role="layout-north"]',spacing:{open:5,close:5},toggler:{cls:"ui-layout-toggler",hideOnSlide:!0,open:{align:"center",tip:"Close This Pane",length:35},close:{align:"center",tip:"Open This Pane",length:35}}},south:{size:"auto",initClosed:!1,closable:!0,slidable:!0,resizable:!0,paneSelector:'[data-role="layout-south"]',spacing:{open:5,close:5},toggler:{cls:"ui-layout-toggler",hideOnSlide:!0,open:{align:"center",tip:"Close This Pane",length:35},close:{align:"center",tip:"Open This Pane",length:35}}},center:{initClosed:!1,closable:!0,slidable:!0,resizable:!0,paneSelector:'[data-role="layout-center"]'}},content:{ignoreSelector:"span",selector:'[data-role="content"]'},button:{cls:"ui-layout-button"},fx:{name:"slide",open:{easing:"easeInQuint",duration:400},close:{easing:"easeOutQuint",duration:400}},resizer:{cls:"ui-layout-resizer",tip:"Resize This Pane"},paneEvents:{onhide_start:a.noop,onhide_end:a.noop,onshow_start:a.noop,onshow_end:a.noop,onopen_start:a.noop,onopen_end:a.noop,onclose_start:a.noop,onclose_end:a.noop,onresize_start:a.noop,onresize_end:a.noop}}}})}(jQuery,ebaui),function(a,b){function c(a){this._init(a)}c.prototype={_cssClass:{actived:"eba-tab-active"},_$header:null,_$content:null,_headerHtmlTmpl:"#ebaui-template-tabs-header",_contentHtmlTmpl:"#ebaui-template-tabs-content",_compiledHeaderTmpl:a.noop,_compiledContentTmpl:a.noop,headerDom:function(){return this._$header},contentDom:function(){return this._$content},_updateStyleTitle:function(){var b=this;a(".eba-tab-text",b._$header).text(b.options.title)},title:function(a){var b=this;return a?(b.options.title=a,b._updateStyleTitle(),void 0):b.options.title},url:function(a){var b=this;return a?(b.options.url=a,b.refresh(),void 0):b.options.url},_updateStyleIcon:function(){var b=this,c=b.options.iconCls,d="eba-tab-icon ";c&&(d+=c),a(".eba-tab-icon",b._$header).attr("class",d)},_updateStyleClosable:function(){var b=this,c=b.closable(),d=b.headerDom(),e=a("span",d).last();return!c&&e.size()>0?(e.remove(),void 0):c&&0==e.size()?(d.append('<span class="eba-tab-close"></span>'),void 0):void 0},closable:function(a){var b=this;return null==a?b.options.closable:(b.options.closable=a,b._updateStyleClosable(),void 0)},iconCls:function(a){var b=this;return a?(b.options.iconCls=a,b._updateStyleIcon(),void 0):currIconCls},isActived:function(a){var b=this;if(!b.isClosed()){if("boolean"!=typeof a)return b.options.isActived;b.options.isActived=a,a?(b._$header.addClass("eba-tab-active"),b._$content.show()):(b._$header.removeClass("eba-tab-active"),b._$content.hide())}},refresh:function(){var b=this;if(!b.isClosed()){var c=(new Date).getTime(),d=b.options.url;d+=-1==d.indexOf("?")?"?t="+c:"&t="+c,a("iframe",b._$content).attr("src",d)}},_closed:!1,isClosed:function(){return this._closed},close:function(){var b=this;a("iframe",b._$content).off("load"),b._closed=!0,b._$header.remove(),b._$content.remove(),delete b._$header,delete b._$content},options:{isActived:!1,iconCls:"",title:"",url:"",closable:!0},_init:function(b){var c=this,d=a.extend({},c.options,b);c.options=d;var e=a(c._headerHtmlTmpl).html(),f=a(c._contentHtmlTmpl).html();c._$header=a(e),c._$content=a(f),c._updateStyleTitle(),c._updateStyleClosable(),c._updateStyleIcon(),c.refresh()}},b.web.registerControl("Tabs"),b.control("web.Tabs",{_rootHtmlTmpl:"#ebaui-template-tabs",_compiledTabTmpl:a.noop,_setupEvents:function(){var b=this,c=this._$root;c.on("click",".eba-tab",function(){var d=a(".eba-tab",c).index(this);-1!=d&&b.activateTab(d)}),c.on("click",".eba-tab-close",function(){var d=a(".eba-tab",c).index(a(this).parent());-1!=d&&b.closeTab(d)})},_validateTabConfig:function(a){return a&&a.url?!0:!1},_initHomeTab:function(){var a=this.options.home,b=this._validateTabConfig(a);b&&(a.title=a.title?a.title:a.url,this.addTab(a))},_initControl:function(){this._$contentRegion=a(this.options.contentRegion);var b=a("ul",this._$contentRegion).size();0==b&&this._$contentRegion.append("<ul></ul>"),this._initHomeTab()},_tabs:[],_homeTab:null,_currentTab:null,currentTab:function(a){var b=this;if(null==a)return b._currentTab;var c=b.getTab(a);b._currentTab&&!b._currentTab.isClosed()?b._currentTab.isActived(!1):b._currentTab=null,c&&(c.isActived(!0),b._currentTab=c)},addTab:function(b){if(b){var d=this,e=d.indexOf(b.url);if(-1==e){e=d._tabs.length;var f=new c(b);d._tabs.push(f),d._compiledTabTmpl(b),a("ul",d._$root).append(f.headerDom()),a("ul",d._$contentRegion).append(f.contentDom())}d.activateTab(e)}},closeTab:function(a){var b=this,c=b.indexOf(a);if(-1!=c){var d=b._tabs,e=0===c?1:c-1>0?c-1:0;e>d.length&&(e=d.length-1);var f=d[c],g=b.currentTab();g==f&&b.activateTab(e),f.close(),f=null,d.splice(c,1),b._tabs=d}},closeAllTab:function(){for(var a=this,b=[],c=[],d=a._tabs,e=0,f=d.length;f>e;e++){var g=d[e];g.closable()?c.push(g):b.push(g)}for(var e=0,f=c.length;f>e;e++)c[e].close();a._tabs=b,b.length>0&&a.activateTab(0)},closeOtherTabs:function(a){var b=this,c=b.indexOf(a);if(-1!=c){b.activateTab(c);for(var d=0,e=b._tabs.length;e>d;d++)c!=d&&b._tabs[d].close();var f=b.getTab(c);b._tabs=[f]}},getTab:function(a){var b=this,c=b.indexOf(a);return-1==c?null:b._tabs[c]},indexOf:function(a){var b=this;if(b.isNull(a)||0==b._tabs.length)return-1;var c=-1;if(b.isNumber(a))return c=parseInt(a),(isNaN(c)||0>c||c>=b._tabs.length)&&(c=-1),c;var d=null;if(b.isString(a))d=function(b){return b.url()===a};else{if(!b.isFunc(a))return-1;d=a}for(var e=b._tabs,f=0,g=e.length;g>f;f++)if(d(e[f])){c=f;break}return c},activateTab:function(a){var b=this,c=b.indexOf(a);-1!==c&&b.currentTab(c)},refreshTab:function(a){var b=this;if(b.isNull(a)){var c=b.currentTab();return c&&c.refresh(),void 0}var d=b.getTab(a);d&&d.refresh()},resizeContent:function(b){if(b){var c=this;if(!c.isNull(b.width)){var d=c._$contentRegion,e=a("iframe",d);e.width(b.width),e.height(b.height)}}},contentRegion:function(){return this.options.contentRegion},home:function(a){return a?void 0:this.options.home},options:{home:{title:"",url:"",closable:!1},contentRegion:".eba-tabs-body"}})}(jQuery,ebaui),function(a,b){moment&&moment.lang("zh-cn");var c=b.web,d=c.validationRules;d.required.prototype.message="该输入项为必输项",d.email.prototype.message="请输入有效的电子邮件地址",d.url.prototype.message="请输入有效的URL地址",d.len.prototype._parameterInvalidException="请设置合法的最小文本长度和最大文本长度",d.len.prototype._originalMessage="字符串长度应该介于 {0} 和 {1} 之间",d.len.prototype.message="字符串长度应该介于 {0} 和 {1} 之间",d.remote.prototype._parameterInvalidException="请正确配置remote验证规则的参数，其中url和pass参数是必选项",c.Calendar.prototype._titleDisplayFormat="YYYY年MM月",c.Calendar.prototype._formatInvalidException="日期格式异常，请输入正确格式的日期!",c.Calendar.prototype._weeks=["日","一","二","三","四","五","六"],c.Calendar.prototype._months=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],c.DateTimePicker.prototype._buttons.today.text="今天",c.DateTimePicker.prototype._buttons.ok.text="确定",c.DateTimePicker.prototype._buttons.clear.text="清除",c.DateTimePicker.prototype._formatInvalidException="日期格式异常，请输入正确格式的日期!",c.FileUploader.prototype._uploadUrlEmptyException="uploadUrl属性不能为空！",vex.dialog.buttons.YES.text="确认",vex.dialog.buttons.NO.text="取消"}(jQuery,ebaui),function(a){a.jgrid=a.jgrid||{},a.extend(a.jgrid,{defaults:{recordtext:"{0} - {1}　共 {2} 条",emptyrecords:"无数据显示",loadtext:"读取中...",pgtext:" {0} 共 {1} 页"},search:{caption:"搜索...",Find:"查找",Reset:"重置",odata:[{oper:"eq",text:"等于　　"},{oper:"ne",text:"不等　　"},{oper:"lt",text:"小于　　"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于　　"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开始于"},{oper:"bn",text:"不开始于"},{oper:"in",text:"属于　　"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结束于"},{oper:"en",text:"不结束于"},{oper:"cn",text:"包含　　"},{oper:"nc",text:"不包含"},{oper:"nu",text:"空值于　　"},{oper:"nn",text:"非空值"}],groupOps:[{op:"AND",text:"所有"},{op:"OR",text:"任一"}]},edit:{addCaption:"添加记录",editCaption:"编辑记录",bSubmit:"提交",bCancel:"取消",bClose:"关闭",saveData:"数据已改变，是否保存？",bYes:"是",bNo:"否",bExit:"取消",msg:{required:"此字段必需",number:"请输入有效数字",minValue:"输值必须大于等于 ",maxValue:"输值必须小于等于 ",email:"这不是有效的e-mail地址",integer:"请输入有效整数",date:"请输入有效时间",url:"无效网址。前缀必须为 ('http://' 或 'https://')",nodefined:" 未定义！",novalue:" 需要返回值！",customarray:"自定义函数需要返回数组！",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"查看记录",bClose:"关闭"},del:{caption:"删除",msg:"删除所选记录？",bSubmit:"删除",bCancel:"取消"},nav:{edittext:"",edittitle:"编辑所选记录",addtext:"",addtitle:"添加新记录",deltext:"",deltitle:"删除所选记录",searchtext:"",searchtitle:"查找",refreshtext:"",refreshtitle:"刷新表格",alertcap:"注意",alerttext:"请选择记录",viewtext:"",viewtitle:"查看所选记录"},col:{caption:"选择列",bSubmit:"确定",bCancel:"取消"},errors:{errcap:"错误",nourl:"没有设置url",norecords:"没有要处理的记录",model:"colNames 和 colModel 长度不等！"},formatter:{integer:{thousandsSeparator:" ",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(a){return 11>a||a>13?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"m-d-Y",parseRe:/[Tt\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"Y/j/n",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery);