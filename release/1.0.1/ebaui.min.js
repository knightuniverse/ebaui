(function(){var ArrayProto,Button,ButtonEdit,Calendar,Captcha,CheckBox,CheckBoxList,Combo,ComboBox,ComboList,Control,DateTimePicker,DigitValidator,EmailValidator,FileUploader,Form,FormField,Hidden,IdentityValidator,Label,LengthValidator,ListBox,MainView,MiniGrid,MobileValidator,MonthView,ObjectProto,OnlyCnValidator,Panel,Password,RadioList,RangeValidator,RemoteValidator,RequiredValidator,Spinner,StringProto,Tab,Tabs,TelephoneValidator,TextArea,TextBox,TimeSpinner,UrlValidator,Validator,ZipValidator,ebaui,keyboard,nativeForEach,ns,slice,toString,uuid,vexDialog,web,_ref,_ref1,_ref10,_ref11,_ref12,_ref13,_ref14,_ref15,_ref16,_ref17,_ref18,_ref19,_ref2,_ref20,_ref21,_ref22,_ref23,_ref24,_ref25,_ref26,_ref27,_ref28,_ref29,_ref3,_ref30,_ref31,_ref32,_ref33,_ref34,_ref35,_ref36,_ref37,_ref38,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};uuid=0,ebaui={escape:function(a){var b,c;return c=/[&<>"']/g,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},null!=a?(""+a).replace(c,function(a){return b[a]}):""},unescape:function(a){var b,c;return c=/(&amp;|&lt;|&gt;|&quot;|&#x27;)/g,b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},null!=a?(""+a).replace(c,function(a){return b[a]}):""},guid:function(){return"eba-ui-"+ ++uuid},getById:function(a,b){return ebaui.get("#"+a,b)},get:function(a,b){return $(a,b).data("model")},parseUi:function(a){return this.web.parseUi(a)}},window.ebaui=ebaui,StringProto=String.prototype,null==StringProto.trim&&(StringProto.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),Date.prototype.clone=function(){var a;return a=this.getTime(),new Date(a)},web={baseUrl:"/",controls:[],formControls:[],_bridge:function(a,b){return void($.fn[a]=function(a){return this.each(function(c,d){var e,f;return e=$(d),"true"!==e.attr("data-parsed")?f=new b(d,a):void 0})})},_doRegister:function(a,b,c){var d,e;if(b&&c)return e=this,e[b]=c,c.prototype._namespace="ebaui.web",c.prototype._controlFullName="ebaui-web-"+b,d=b.toLowerCase(),e._bridge(d,c),e.controls.push(d),void(a&&e.formControls.push(d))},registerControl:function(a,b){return this._doRegister(!1,a,b)},registerFormControl:function(a,b){return this._doRegister(!0,a,b)},injectTmpl:function(a,b,c){var d,e;return e=this,d=e[a],void(null!=d&&(d.prototype[b]=c))},injectTmpls:function(a,b){var c,d,e,f;if(null!=b){if(d=this,c=d[a],null!=c)for(e in b)f=b[e],c.prototype[e]=f;return void 0}},parseControls:function(a){var b,c,d,e,f,g,h;for(d=this.controls,e=g=0,h=d.length;h>g;e=++g)c=d[e],c=d[e],f='[data-role="'+c+'"]',b=$(f,a),b.size()>0&&b[c]&&b[c]();return void 0},parseUi:function(a){return this.parseControls(null!=a?a:document)},validation:{},getValidator:function(a){return a?this.validation[a]:null},registerValidator:function(a,b){return a&&"function"==typeof b?this.validation[a]=b:void 0},getForm:function(a,b){var c,d;return c=$(a,b),(d=c.data("model"))?d:(c.form(),c.data("model"))},_envCheck:function(){return"placeholder"in document.createElement("input")?$("html").attr("data-native","placeholder"):void 0},_baseUrlCheck:function(){var a,b,c,d,e,f,g,h,i,j;for(d=this,a=/(.*)\/(ebaui\.js|ebaui(-\d\.\d\.\d)?\.js|ebaui(-\d\.\d\.\d)?\.min\.js)(.*)$/,f=document.getElementsByTagName("script"),j=[],h=0,i=f.length;i>h;h++){if(b=f[h],g=b.src,a.test(g)){c=a.exec(g),e=c[1],"/"!==e.substring(e.length-1,e.length)&&(e+="/"),d.baseUrl=e;break}j.push(void 0)}return j},_inited:!1,init:function(){var a;return a=this,a._inited?void 0:$(function(){var b;if(!a._inited)return a._envCheck(),a._baseUrlCheck(),a.parseUi(),b=function(a){var b;return b=window[a],"function"===$.type(b)?b():void 0},b("initPage"),$(window).on("load",function(){return b("loadPage")}),$(window).on("unload",function(){return b("unloadPage")}),a._inited=!0})}},ebaui.web=web,keyboard={isEnter:function(a){return 13===a},isNumber:function(a){return"number"!=typeof a?!1:__indexOf.call([96,97,98,99,100,101,102,103,104,105],a)>=0||__indexOf.call([48,49,50,51,52,53,54,55,56,57],a)>=0}},web.keyboard=keyboard,web.init(),ArrayProto=Array.prototype,slice=ArrayProto.slice,nativeForEach=ArrayProto.forEach,ObjectProto=Object.prototype,toString=ObjectProto.toString,Control=function(){function a(a,b){var c,d,e,f;return e=this,d=e._parseDataOptions(a),c=e._parseAttrOptions(a),f=$.extend({},d,c),b&&(f=$.extend({},f,b)),e._eventHandlers={},e._controlID=ebaui.guid(),e._$root=e._parseUi(a),e._init(f),e._setupEvents(f),e._render(),void(null!=e._$root&&e._$root.data("model",e))}return a.prototype._controlID=void 0,a.prototype._namespace="",a.prototype._controlFullName="",a.prototype._rootTmpl="",a.prototype._cssUnitRE=/^(\d+)(%|in|cm|mm|em|ex|pt|pc|px)?$/,a.prototype._doUpdateCssSize=function(a){var b,c,d,e,f,g;return e=this,b=e._$root,null==b||(f=e[a](),d=e.isNumber(f),d&&0>=f)?void 0:(g=e._cssUnitRE.exec(f),c=g[2],void b.css(a,null!=c?f:f+"px"))},a.prototype._updateCssWidth=function(){return this._doUpdateCssSize("width")},a.prototype._updateCssHeight=function(){return this._doUpdateCssSize("height")},a.prototype._updateCssOffset=function(a){var b,c,d;return c=this,b=c._$root,null!=b?(d=c[a](),isNaN(d)||0===d?void 0:b.css(a,d+"px")):void 0},a.prototype._updateCssTop=function(){return this._updateCssOffset("top")},a.prototype._updateCssLeft=function(){return this._updateCssOffset("left")},a.prototype._updateCssPosition=function(){var a,b,c,d;return c=this,a=c._$root,null!=a?(d=c.position(),b=c.isEmpty(d)?null:d,void a.css("position",b)):void 0},a.prototype._updateAttrTitle=function(){var a,b,c;return b=this,a=b._$root,null!=a?(c=b._title,void(b.isEmpty(c)||a.attr("title",c))):void 0},a.prototype._setupEvents=$.noop,a.prototype._init=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(null!=a)return b=this,b._id=null!=(c=a.id)?c:"",b._title=null!=(d=a.title)?d:"",b._name=null!=(f=a.name)?f:"",b._width=null!=(g=a.width)?g:0,b._height=null!=(h=a.height)?h:0,b._top=null!=(i=a.top)?i:0,b._left=null!=(j=a.left)?j:0,b._position=null!=(k=a.position)?k:"",b._visible=null!=(l=a.visible)?l:!0,b._enabled=null!=(m=a.enabled)?m:!0,b._focused=null!=(e=a.focused)?e:!1},a.prototype._focus=$.noop,a.prototype._blur=$.noop,a.prototype._updateCssEnabled=$.noop,a.prototype._updateCssFocused=$.noop,a.prototype._updateCssVisible=function(){var a,b,c;return b=this,a=b._$root,null!=a?(c=b.visible()?"show":"hide",void a[c]()):void 0},a.prototype._parseUi=function(a){var b,c,d;return d=this,0!==d._rootTmpl.length?(b=$(a),c=$(d._rootTmpl).attr("data-parsed","true"),b.replaceWith(c),c):void 0},a.prototype._parseDataOptions=function(a){var b,c,d,e,f,g;return f=this,b=$(a),g={},0===b.size()?g:(c=b.attr("data-options"),c&&(d=c.substring(0,1),e=c.substring(c.length-1),"{"!==d&&(c="{"+c),"}"!==e&&(c+="}"),g=new Function("return "+c)()),g)},a.prototype._parseAttrOptions=function(a){var b,c,d,e,f,g,h,i;return b=$(a),c=null!=(g=b.attr("id"))?g:"",d=null!=(h=b.attr("name"))?h:"",f=null!=(i=b.attr("title"))?i:"",e={id:c,name:d,title:f}},a.prototype._updateAttrId=function(){var a,b;return b=this,a=b.id(),b.isEmpty(a)?void 0:b._$root.attr("id",a)},a.prototype._render=function(){var a;return a=this,a._updateCssWidth(),a._updateCssHeight(),a._updateCssPosition(),a._updateCssTop(),a._updateCssLeft(),a._updateCssEnabled(),a._updateCssVisible(),a._updateAttrTitle(),void a._updateAttrId()},a.prototype.namespace=function(){return this._namespace},a.prototype.controlFullName=function(){return this._controlFullName},a.prototype._id="",a.prototype.id=function(){return this._id},a.prototype._enabled=!0,a.prototype.enabled=function(a){var b;return b=this,b.isBoolean(a)?(b._enabled=a,b._updateCssEnabled()):b._enabled},a.prototype._title="",a.prototype.title=function(a){var b;return b=this,b.isString(a)?(b._title=a,void b._updateAttrTitle()):b._title},a.prototype._name="",a.prototype.name=function(a){var b;return b=this,b.isString(a)?void(b._name=a):b._name},a.prototype._visible=!0,a.prototype.visible=function(a){var b;return b=this,b.isBoolean(a)?(b._visible=a,void b._updateCssVisible()):b._visible},a.prototype.focusable=function(){return!1},a.prototype._focused=!1,a.prototype.focused=function(a){var b,c;return b=this,b.isBoolean(a)?(b._focused=a,c=a?"_focus":"_blur",b[c](),b._updateCssFocused()):b._focused},a.prototype._width=0,a.prototype.width=function(a){var b;return b=this,b.isNumber(a)?(b._width=a,void b._updateCssWidth()):b._width},a.prototype._height=0,a.prototype.height=function(a){var b;return b=this,b.isNumber(a)?(b._height=a,void b._updateCssHeight()):b._height},a.prototype._top=0,a.prototype.top=function(a){var b;return b=this,b.isNumber(a)?(b._top=a,void b._updateCssTop()):b._top},a.prototype._left=0,a.prototype.left=function(a){var b;return b=this,b.isNumber(a)?(b._left=a,void b._updateCssLeft()):b._left},a.prototype._position="",a.prototype.position=function(a){var b,c;return b=this,c=/^(absolute|fixed|relative|static|inherit|\s*)$/,c.test(a)?(b._position=$.trim(a),void b._updateCssPosition()):b._position},a.prototype.controlID=function(){return this._controlID},a.prototype.uiElement=function(){return this._$root},a.prototype.onEvent=function(){var a,b,c,d,e,f;return e=this,f=ArrayProto.slice.apply(arguments),d=f.length,2===d&&(a=f[0],b=f[1],e.isFunc(b))?(c=e._eventHandlers[a],void(c&&0!==c.length?c.push(b):e._eventHandlers[a]=[b])):void 0},a.prototype.offEvent=function(a,b){var c,d,e,f,g,h;if(f=this,f.isString(a)&&a.length>0&&(c=f._eventHandlers[a],c&&c.length>0)){if(b){for(d=g=0,h=c.length;h>g;d=++g)if(e=c[d],e===b){f._eventHandlers[a].splice(d,1);break}}else f._eventHandlers[a]=[];return void 0}},a.prototype.triggerEvent=function(a,b){var c,d,e,f,g,h;if(null!=a&&!/^\s+$/.test(a)&&(f=this,d=f._eventHandlers[a],d&&0!==d.length))for(e=g=0,h=d.length;h>g;e=++g)(c=d[e])(f,b)},a.prototype.keys=function(a){var b,c,d;if(d=this,!d.isObject(a))throw new TypeError("Invalid object");c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},a.prototype.compileTmpl=function(a,b){var c,d,e,f,g,h,i,j,k,l;i=function(){},h=/(.)^/,j={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\t|\u2028|\u2029/g,g=new RegExp([(j.escape||h).source,(j.interpolate||h).source,(j.evaluate||h).source].join("|")+"|$","g"),f=0,k="__p+='",a.replace(g,function(b,c,g,h,i){return k+=a.slice(f,i).replace(d,function(a){return"\\"+e[a]}),c&&(k+="'+\n((__t=("+c+"))==null?'':ebaui.escape(__t))+\n'"),g&&(k+="'+\n((__t=("+g+"))==null?'':__t)+\n'"),h&&(k+="';\n"+h+"\n__p+='"),f=i+b.length,b}),k+="';\n",j.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{i=new Function(j.variable||"obj",k)}catch(m){throw c=m,c.source=k,c}return b?i(b):(l=function(a){return i.call(this,a)},l.source="function("+(j.variable||"obj")+"){\n"+k+"}",l)},a.prototype.each=function(a,b,c){var d,e,f,g,h,i,j,k,l;if(h=this,d={},null!=a){if(nativeForEach&&a.forEach===nativeForEach)return a.forEach(b,c);if(a.length===+a.length){for(e=i=0,k=a.length;k>i;e=++i)if(f=a[e],b.call(c,f,e,a)===d)return}else for(g=h.keys(a),e=j=0,l=g.length;l>j;e=++j)if(f=g[e],b.call(c,f,e,a)===d)return}},a.prototype.isEmpty=function(a){var b;return null==a?!0:(b=this,b.isBoolean(a)?a:b.isString(a||b.isArray(a))?0===a.length:b.isNumber(a)?0!==a:!0)},a.prototype.isNull=function(a){return null===a||void 0===a},a.prototype.isRegExp=function(a){return"[object RegExp]"===toString.call(a)},a.prototype.isDate=function(a){return"[object Date]"===toString.call(a)},a.prototype.isObject=function(a){return a===Object(a)},a.prototype.isFunc=function(a){return"[object Function]"===toString.call(a)},a.prototype.isString=function(a){return"[object String]"===toString.call(a)},a.prototype.isNumber=function(a){return"[object Number]"===toString.call(a)},a.prototype.isArray=function(a){return"[object Array]"===toString.call(a)},a.prototype.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===toString.call(a)},a.prototype.isUsingRemoteData=function(a){var b;if(!a)throw"dataSource can not be null!";return b=this,b.isArray(a)?!1:b.isObject(a)&&a.url?!0:!1},a.prototype.destroy=function(){},a}(),ebaui.web.Control=Control,Validator=function(){function a(a,b){var c;c=this,c.message=null!=b?b:"",c.parameters=null!=a?a:[]}return a.prototype.parameters=[],a.prototype.validate=function(){},a}(),FormField=function(_super){function FormField(){return _ref=FormField.__super__.constructor.apply(this,arguments)}return __extends(FormField,_super),FormField.prototype._currentStatus=0,FormField.prototype._validationStatus={none:0,success:1,info:2,error:3,warning:4,busy:5},FormField.prototype._updateCssReadonly=$.noop,FormField.prototype._statusCls=["","eba-success","eba-light","eba-error","eba-warning","eba-loading"],FormField.prototype._statusIcon={"eba-success":"icon-ok","eba-light":"icon-lightbulb","eba-error":"icon-remove-circle","eba-warning":"icon-warning-sign","eba-loading":"icon-spinner icon-spin"},FormField.prototype._init=function(a){var b,c,d,e;return FormField.__super__._init.call(this,a),b=this,b._position=null!=(c=a.position)?c:"absolute",b._error={},null!=a.value&&(b._value=a.value),null!=a.readonly&&(b._readonly=a.readonly),b._enterAsTab=null!=(d=a.enterAsTab)?d:!1,b._validateOnChange=null!=(e=a.validateOnChange)?e:!1,void(b._validators=b._parseValidators(a.validators))},FormField.prototype._parseValidator=function(rule){var constructor,name,ns,param,result,validator;return null==rule?null:(result=/([a-z_]+)(.*)/i.exec(rule),name=result[1],param=eval(result[2]),ns=ebaui.web,constructor=ns.validation[name],null==constructor?null:validator=new constructor(param))},FormField.prototype._parseValidators=function(a){var b,c,d,e,f,g,h;if(c=this,null==a||0===a.length)return[];for(d=[],b=g=0,h=a.length;h>g;b=++g)e=a[b],f=c._parseValidator(e),f&&d.push(f);return d},FormField.prototype._doRenderStyleTip=function(a,b){var c,d,e,f,g,h,i,j,k;i=this,b=null!=b?b:"",e=i.uiElement(),g=i._statusIcon[a],c=$('[class*="border"]',e),d=c.next('i[class^="icon"]'),j=i._validationStatus,k=i._statusCls;for(h in j)e.removeClass(k[j[h]]);return e.hasClass(a)||e.addClass(a),void(0===d.size()?(f='<i class="{0}" title="{1}"></i>'.replace("{0}",g).replace("{1}",b),c.after(f)):d.attr({"class":g,title:b}))},FormField.prototype._resetStatus=function(){var a,b,c,d,e,f,g,h,i;for(f=this,c=f._$root,a=$('[class*="border"]',c),b=a.next('i[class^="icon"]'),d=f._statusCls,e=h=0,i=d.length;i>h;e=++h)g=d[e],g&&c.removeClass(g);return void(b.size()>0&&b.remove())},FormField.prototype._renderStyleTips=function(a,b){var c,d,e,f;switch(c=this,d="",f=c._statusCls,e=c._validationStatus,a){case e.success:case e.info:case e.error:case e.warning:case e.busy:d=f[a]}return d?c._doRenderStyleTip(d,b):void c._resetStatus(b)},FormField.prototype._updateStyleValidationResult=function(){var a;return a=this,void(a.isValid()?a.success(""):a.error(a._getErrorMessage()))},FormField.prototype._updateAttrName=function(){var a,b;return a=this,b=a.name(),a._$formInput&&b?a._$formInput.attr("name",b):void 0},FormField.prototype._render=function(){var a;return FormField.__super__._render.call(this),a=this,a._updateCssReadonly(),a._updateAttrName()},FormField.prototype.reset=function(){var a;return a=this,a._value=null,a._data=null,a._isValid=!0,a._error={},a._render()},FormField.prototype.tips=function(a,b){var c;return c=this,c.isNumber(a)?(b=null!=b?b:"",void(__indexOf.call([0,1,2,3,4,5],a)>=0&&(c._currentStatus=a,c._renderStyleTips(a,b)))):c._currentStatus},FormField.prototype.clearTips=function(){return this.tips(this._validationStatus.none)},FormField.prototype.success=function(a){return this.tips(this._validationStatus.success,a)},FormField.prototype.info=function(a){return this.tips(this._validationStatus.info,a)},FormField.prototype.warning=function(a){return this.tips(this._validationStatus.warning,a)},FormField.prototype.error=function(a){return this.tips(this._validationStatus.error,a)},FormField.prototype.busy=function(a){return this.tips(this._validationStatus.busy,a)},FormField.prototype.errorMessage=function(){return this._error},FormField.prototype.errorTips=function(){return this._error},FormField.prototype._getErrorMessage=function(){var a,b,c,d,e,f,g,h;for(e=this,f="",c=e.keys(e._error),d=c.length-1,a=g=0,h=c.length;h>g;a=++g)b=c[a],f+=e._error[b],d>a&&(f+="\n");return f},FormField.prototype._validateOnChange=!1,FormField.prototype.validateOnChange=function(a){var b;return b=this,b.isBoolean(a)?void(b._validateOnChange=a):b._validateOnChange},FormField.prototype._validators=[],FormField.prototype.validators=function(){return this._validators},FormField.prototype._indexOf=function(a){var b,c,d,e,f,g,h;if(!a)return-1;for(d=this,c=-1,f=d._validators,b=g=0,h=f.length;h>g;b=++g)if(e=f[b],e.name===a){c=b;break}return c},FormField.prototype.hasValidator=function(a){return this._indexOf(a)>-1},FormField.prototype.addValidator=function(a){var b,c;if(a){if(b=this,b.isString(a)){if(c=b._parseValidator(a),!c||b.hasValidator(c.name))return}else a instanceof Validator&&(b.hasValidator(c.name)||b._validators.push(a));return void 0}},FormField.prototype.removeValidator=function(a){var b,c;return c=this,b=c._indexOf(a),-1!==b?c._validators.splice(b,1):void 0},FormField.prototype._data=null,FormField.prototype.data=$.noop,FormField.prototype._value=null,FormField.prototype.value=$.noop,FormField.prototype._enterAsTab=!1,FormField.prototype.enterAsTab=function(a){var b;return b=this,b.isBoolean(a)?void(b._enterAsTab=a):b._enterAsTab},FormField.prototype._readonly=!1,FormField.prototype.readonly=function(a){var b;return b=this,b.isBoolean(a)?(b._readonly=a,void b._updateCssReadonly()):b._readonly},FormField.prototype._isValid=!0,FormField.prototype.isValid=function(){return this._isValid},FormField.prototype.validate=function(){var a,b,c,d,e,f,g,h,i,j;if(e=this,g=e.validators(),0===g.length)return!0;for(e.busy(),a=e._error,h=e.value(),b=g[0],d=b.validate(h,b.parameters),d||(a[b.name]=b.message),c=i=0,j=g.length;j>i;c=++i)f=g[c],d=d&&f.validate(h,f.parameters),d||(a[f.name]=f.message);return e._isValid=d,d?e.success(""):e.error(e._getErrorMessage()),d},FormField}(Control),DigitValidator=function(a){function b(){return _ref1=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="digit",b.prototype.message="Please only enter digit characters.",b.prototype.validate=function(a){return/\d+/.test(a)},b}(Validator),ebaui.web.registerValidator("digit",DigitValidator),EmailValidator=function(a){function b(){return _ref2=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="email",b.prototype.message="Please enter a valid email address.",b.prototype.validate=function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},b}(Validator),ebaui.web.registerValidator("email",EmailValidator),IdentityValidator=function(a){function b(){return _ref3=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._factors=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],b.prototype._checkcode=["1","0","X","9","8","7","6","5","4","3","2"],b.prototype.name="id",b.prototype.parameters=[],b.prototype.message="Please enter a valid id number.",b.prototype.validate=function(a){var b,c,d,e,f,g,h;if(d=/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/.test(a),!d)return!1;if(c=a.toString(),18===c.length){for(e=this,f=0,g=0,b=h=0;16>=h;b=++h)g+=parseInt(c[b])*e._factors[b];f=g%11,d=d&&e._checkcode[f]===c[17]}return d},b}(Validator),ebaui.web.registerValidator("id",IdentityValidator),LengthValidator=function(a){function b(){return _ref4=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="len",b.prototype._parameterInvalidException="Max length must be less than min length, please set a valid validator parameters.",b.prototype._message="Please enter a value between {0} and {1}.",b.prototype.message="Please enter a value between {0} and {1}.",b.prototype.validate=function(a){var b,c,d,e,f;if(!a)return!1;if(e=this,0===e.parameters.length)return!0;if(b=!1,c=e.parameters.length,f=e.parameters[0],d=c>1?e.parameters[1]:0,f>d)throw e._parameterInvalidException;return a=a.toString(),b=c>1&&f!==d?a.length>f&&a.length<d:c>1&&f===d?a.length===f:a.length>f,e.message=e._message.replace("{0}",f).replace("{1}",c>1?d:""),b},b}(Validator),ebaui.web.registerValidator("len",LengthValidator),MobileValidator=function(a){function b(){return _ref5=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="mobi",b.prototype.message="Please enter a valid mobilephone number.",b.prototype.validate=function(a){return/^(?:13\d|15[89]|18[019])-?\d{5}(\d{3}|\*{3})$/.test(a)},b}(Validator),ebaui.web.registerValidator("mobi",MobileValidator),OnlyCnValidator=function(a){function b(){return _ref6=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="cn",b.prototype.message="Please only enter Chinese characters.",b.prototype.validate=function(a){return/[\u4e00-\u9fa5]+/.test(a)||/[^\x00-\xff]+/.test(a)},b}(Validator),ebaui.web.registerValidator("cn",OnlyCnValidator),RangeValidator=function(a){function b(){return _ref7=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="rng",b.prototype._message="Please enter a value between {0} ~ {1}.",b.prototype.message="Please enter a value between {0} ~ {1}.",b.prototype.validate=function(a){var b,c,d,e,f,g;return e=this,a=parseFloat(a),b=!1,c=e.parameters.length,f=e.parameters[0],d=c>1?e.parameters[1]:0,g=e._message,e.message=g.replace("{0}",f).replace("{1}",c>1?d:""),/^\d+(\.\d+)?$/i.test(a.toString())?0===e.parameters.length?!0:(b=a>f,c>1&&(d=e.parameters[1],b=b&&d>a),b):!1},b}(Validator),ebaui.web.registerValidator("rng",RangeValidator),RemoteValidator=function(_super){function RemoteValidator(a,b){var c,d;if(c=this,c.message=null!=b?b:"",!a)throw c._parameterInvalidException;c.parameters=a,d=$.type(a),"array"===d?c._initFromParamsStr(a):c._initFromParamsObj(a)}return __extends(RemoteValidator,_super),RemoteValidator.prototype.name="remote",RemoteValidator.prototype._token="",RemoteValidator.prototype._ajaxConfig={url:"",async:!1,dataType:"json",data:{}},RemoteValidator.prototype._isTmpl=function(a){return/<%=value%>/i.test(a)},RemoteValidator.prototype._pass=function(){return!1},RemoteValidator.prototype._parameterInvalidException="Please set a valid validator parameters.",RemoteValidator.prototype.message="",RemoteValidator.prototype._initFromParamsStr=function(params){var ajaxConfig,i,j,key,keyValuePair,me,pair,paramItem,value,_i,_len,_results;for(me=this,ajaxConfig=me._ajaxConfig,_results=[],i=_i=0,_len=params.length;_len>_i;i=++_i)paramItem=params[i],keyValuePair=paramItem.split("$"),_results.push(function(){var _j,_len1,_results1;for(_results1=[],j=_j=0,_len1=keyValuePair.length;_len1>_j;j=++_j)switch(pair=keyValuePair[j],pair=keyValuePair[j],key=keyValuePair[0],value=keyValuePair[1],key){case"url":_results1.push(ajaxConfig.url=value);break;case"dataType":_results1.push(ajaxConfig.dataType=value);break;case"token":me._token=value,_results1.push(ajaxConfig.data[value]="");break;case"pass":_results1.push(me._pass=eval(value));break;default:_results1.push(ajaxConfig.data[key]=value)}return _results1}());return _results},RemoteValidator.prototype._initFromParamsObj=function(params){var ajaxConfig,key,me,value,_results;me=this,ajaxConfig=me._ajaxConfig,_results=[];for(key in params)switch(value=params[key],key){case"url":_results.push(ajaxConfig.url=value);break;case"dataType":_results.push(ajaxConfig.dataType=value);break;case"token":me._token=value,_results.push(ajaxConfig.data[value]="");break;case"pass":_results.push(me._pass=eval(value));break;default:_results.push(ajaxConfig.data[key]=value)}return _results},RemoteValidator.prototype.validate=function(a){var b,c,d,e,f;return e=this,f=!1,d={statusCode:{404:function(){return f=!1}},success:function(b){var c;return c="function"==typeof e._pass,f=c?e._pass(a,b):!1},error:function(){return e._isValid=!1}},c=e._ajaxConfig.data,c[e._token]=a,c.t=(new Date).getTime(),b=$.extend({},e._ajaxConfig,d),$.ajax(b),f},RemoteValidator}(Validator),ebaui.web.registerValidator("remote",RemoteValidator),RequiredValidator=function(a){function b(){return _ref8=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="required",b.prototype.message="This field is required.",b.prototype.validate=function(a){var b;return toString=Object.prototype.toString,b=toString.call(a),"[object String]"===b||"[object Array]"===b?a.length>0:"[object Boolean]"===b||a===!0||a===!1?!0:a?!0:!1},b}(Validator),ebaui.web.registerValidator("required",RequiredValidator),TelephoneValidator=function(a){function b(){return _ref9=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="tel",b.prototype.message="Please enter a valid telephone number.",b.prototype.validate=function(a){return/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(a)},b}(Validator),ebaui.web.registerValidator("tel",TelephoneValidator),UrlValidator=function(a){function b(){return _ref10=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="url",b.prototype.message="Please enter a valid URL.",b.prototype.validate=function(a){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},b}(Validator),ebaui.web.registerValidator("url",UrlValidator),ZipValidator=function(a){function b(){return _ref11=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.name="zip",b.prototype.message="Please enter a valid postal code.",b.prototype.validate=function(a){return/^[1-9]\d{5}$/.test(a)},b}(Validator),ebaui.web.registerValidator("zip",ZipValidator),Panel=function(a){function b(){return _ref12=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._availableState=/^(primary|info|success|warning|danger|inverse|\s+)$/i,b.prototype._headHeight=null,b.prototype._ctrlHeight=null,b.prototype._expanded=!0,b.prototype._parseUi=function(a){return $(a)},b.prototype._headerTmpl="",b.prototype._init=function(a){var c,d,e,f,g;return b.__super__._init.call(this,a),c=this,c._buttons=null!=(d=a.buttons)?d:[],c._iconCls=null!=(e=a.iconCls)?e:"",c._position=null!=(f=a.position)?f:"relative",c._state=null!=(g=a.state)?g:""},b.prototype._setupEvents=function(){var a;return a=this,a._$root.on("click",function(a){return a.stopPropagation()})},b.prototype._updateCssButtons=function(){var a,b,c,d,e,f,g,h,i,j,k;if(h=this,c=h.uiElement(),b=$(".panel-head",c),b.size()>0&&(f=h.buttons(),0!==f.length)){for(a=$("div.action",b),k=[],i=0,j=f.length;j>i;i++)d=f[i],e=d.iconCls,e?(g=function(a){var b;return b=a.onclick,"function"==typeof b?function(a){return b(h,a)}:function(){}}(d),a.append("<a class='btn-"+e+"' href='javascript:void(0);'><i class='"+e+"'></i></a>"),k.push(a.on("click",".btn-"+e,g))):k.push(void 0);return k}},b.prototype._updateCssHeader=function(){var a,b,c,d,e,f,g;return e=this,c=e.uiElement(),f=e._couldShowHeader(),b=$(".panel-head",c),g=e.title(),d=e.iconCls(),f?c.addClass("panel"):c.removeClass("panel"),0!==b.size()||f?b.size()>0?void(f?b.show():b.hide()):(c.prepend(e._headerTmpl),b=$(".panel-head",c),a=$("div.action",b),$("h5",b).text(g),d&&$("div.caption",b).prepend("<i class='"+d+"'></i>"),e._updateCssButtons(),e._updateCssStates()):void 0},b.prototype._updateCssStates=function(){var a,b,c,d,e;return c=this,c._showHeader?(d=$.trim(c.state()),a=c.uiElement(),b=a.attr("class").replace(/panel-primary|panel-info|panel-success|panel-warning|panel-danger|panel-inverse/gi,""),e=d?"panel-"+d:"",void(d&&a.attr("class",""+b+" "+e))):void 0},b.prototype._render=function(){var a,c,d;return d=this,c=d.uiElement(),a=c.contents(),a.wrapAll('<div class="panel-body"></div>'),d._updateCssHeader(),b.__super__._render.call(this),d._ctrlHeight=d._height>0?d._height:c.height(),d._headHeight=$(".panel-head",c).height()},b.prototype._showHeader=!1,b.prototype._couldShowHeader=function(){var a,b,c,d;return c=this,d=c.title(),b=c.iconCls(),a=c.buttons(),c._showHeader=d.length>0||b.length>0||a.length>0,c._showHeader},b.prototype._state="",b.prototype.state=function(a){var b,c;return c=this,b=c._availableState,b.test(a)?(c._state=a.toLowerCase(),c._updateCssStates()):c._state},b.prototype.title=function(a){var b,c;return c=this,c.isString(a)?(c._title=a,b=c.uiElement(),c._couldShowHeader()&&(c._updateCssHeader(),c._title)?$(".panel-head h5",b).text(c._title):void 0):c._title},b.prototype._buttons=[],b.prototype.buttons=function(a){var b,c,d,e,f,g,h,i;if(f=this,!f.isArray(a))return f._buttons;if(g=f._buttons,g.length>0){for(c=$(".panel-head",$root),b=$("div.action",c),h=0,i=g.length;i>h;h++)d=g[h],e=d.iconCls,e&&b.off("click",e);b.html("")}return f._buttons=a,f._updateCssButtons()},b.prototype._iconCls="",b.prototype.iconCls=function(a){var b,c;return c=this,null==a?c._iconCls:(c._iconCls=$.trim(a),c._couldShowHeader()?(c._updateCssHeader(),b=$("div.caption",$header),b.html(c._iconCls?"<i class='"+c._iconCls+"'></i>":"")):void 0)},b.prototype.toggle=function(){var a;return a=this,a.visible(!a.visible())},b.prototype.open=function(){return this.visible(!0)},b.prototype.close=function(){return this.visible(!1)},b.prototype.move=function(a){var b,c;if(a)return b=this,c=b.options,null!=a.top&&(b._top=a.top),null!=a.left&&(b._left=a.left),void b._$root.css({top:b._top,left:b._left})},b.prototype.collapse=function(){var a,b,c;return c=this,c._expanded?(c._expanded=!1,b=c.uiElement(),a=$(".panel-body",b),b.animate({height:c._headHeight},400,"swing",function(){return c.height(c._headHeight),a.hide()
})):void 0},b.prototype.expand=function(){var a,b,c;return c=this,c._expanded?void 0:(c._expanded=!0,b=c.uiElement(),a=$(".panel-body",b),b.animate({height:c._ctrlHeight},400,"swing",function(){return a.show(),c.height(c._ctrlHeight)}))},b}(Control),ebaui.web.registerControl("Panel",Panel),Button=function(a){function b(){return _ref13=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._availableState=/^(primary|info|success|warning|danger|inverse|link|\s+)$/i,b.prototype._updateCssEnabled=function(){var a,b,c,d,e;return d=this,a=d.uiElement(),b="eba-button-disabled",c=d.enabled(),e=c?"removeClass":"addClass",a[e](b),a.prop("disabled",!c)},b.prototype._updateAttrText=function(){var a,b;return a=this,b=a.text(),void(b&&a._$btnText.text(b))},b.prototype._updateAttrHref=function(){var a,b,c;return c=this,b=c.href(),a=c.enabled()&&b?b:"javascript:void(0);",void c._$root.attr("href",a)},b.prototype._updateAttrTarget=function(){var a,b;return a=this,b=a.target(),void a._$root.attr("target",b.length>0?b:null)},b.prototype._updateCssStates=function(){var a,b,c,d,e;return c=this,d=$.trim(c.state()),a=c.uiElement(),b=a.attr("class").replace(/eba-button-primary|eba-button-info|eba-button-success|eba-button-warning|eba-button-danger|eba-button-inverse|eba-button-link/gi,""),e=d?"eba-button-"+d:"",void(d&&a.attr("class",""+b+" "+e))},b.prototype._updateCssIcon=function(){var a,b,c,d;return d=this,a=d._$root,c=d.iconPosition(),b='<i class="{0}"></i>'.replace("{0}",d.iconCls()),$("i",a).remove(),void("left"!==c?a.append(b):a.prepend(b))},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._updateAttrText(),a._updateCssIcon(),a._updateAttrHref(),a._updateAttrTarget(),a._updateCssStates()},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c.uiElement(),keyboard=ebaui.web.keyboard,c.onEvent("click",a.onclick),b.on("keydown",function(a){var b;return b=13===a.which,c.enabled()&&c.focused()&&b?(a.preventDefault(),c.triggerEvent("click",a)):void 0}),b.on("click",function(a){return c.enabled()?(a.preventDefault(),c.triggerEvent("click",a)):void 0})},b.prototype._init=function(a){var c,d,e,f,g,h,i,j;return b.__super__._init.call(this,a),d=this,d._$btnText=$(".eba-button-text ",d._$root),c=a.state,d._availableState.test(c)&&(d._state=c.toLowerCase()),d._text=null!=(e=a.text)?e:"",d._href=null!=(f=a.href)?f:"",d._target=null!=(g=a.target)?g:"blank",d._iconCls=null!=(h=a.iconCls)?h:"",d._iconPosition=null!=(i=a.iconPosition)?i:"left",d._enterAsTab=null!=(j=a.enterAsTab)?j:!0},b.prototype._focus=function(){return this._$root.focus()},b.prototype._blur=function(){return this._$root.blur()},b.prototype._state="",b.prototype.state=function(a){var b,c;return c=this,b=c._availableState,b.test(a)?(c._state=a.toLowerCase(),c._updateCssStates()):c._state},b.prototype._text="button",b.prototype.text=function(a){var b;return b=this,b.isString(a)?(b._text=a,void b._$btnText.text(a)):b._text},b.prototype._href="",b.prototype.href=function(a){var b;return b=this,b.isString(a)?0!==$.trim(a).length?b._href:(b._href=a,void b._updateAttrHref()):b._href},b.prototype._target="blank",b.prototype.target=function(a){var b,c;return b=this,c=/_parent|_blank|_self|_top/i,c.test(a)?(b._target=a,b._updateAttrTarget()):b._target},b.prototype.focusable=function(){return!0},b.prototype._iconCls="",b.prototype.iconCls=function(a){var b;return b=this,b.isEmpty(a)?b._iconCls:(b._iconCls=a,b._updateCssIcon())},b.prototype._iconPosition="left",b.prototype.iconPosition=function(a){var b,c;return b=this,c=/left|right/i,c.test(a)?(b._iconPosition=a,b._updateCssIcon()):b._iconPosition},b.prototype._enterAsTab=!0,b.prototype.enterAsTab=function(a){var b;return b=this,b.isBoolean(a)?b._enterAsTab=a:b._enterAsTab},b}(Control),ebaui.web.registerControl("Button",Button),TextBox=function(a){function b(){return _ref14=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._JQSelector={input:".eba-textbox-input",placeholder:".eba-placeholder-lable"},b.prototype._rootCls={disabled:"eba-disabled",focused:"eba-textbox-focus",readonly:"eba-readonly"},b.prototype._setupEvents=function(a){var b,c,d,e,f,g;return f=this,c=f._$root,b=f._$formInput,d=f._JQSelector,e=d.input,g=d.placeholder,keyboard=ebaui.web.keyboard,f.onEvent("keydown",a.onkeydown),f.onEvent("keyup",a.onkeyup),f.onEvent("enter",a.onenter),f.onEvent("focus",a.onfocus),f.onEvent("blur",a.onblur),f.onEvent("change",a.onchange),c.on("keydown",e,function(a){var b;if(!f.enabled())return a.preventDefault();switch(b=a.which){case keyboard.isEnter(b):return f.triggerEvent("enter",a);default:return f.triggerEvent("keydown",a)}}),c.on("keyup",e,function(a){return f._setValue(b.val(),!1,!0,a),f.triggerEvent("keyup",a)}),c.on("focus",e,function(a){return f._focused=!0,f._updateCssFocused(),f.triggerEvent("focus",a)}),void c.on("blur",e,function(a){return f._focused=!1,f._updateCssFocused(),f.triggerEvent("blur",a)})},b.prototype._focus=function(){var a;return a=this,a.enabled()&&!a.readonly()&&a._updateCssFocused(),void a._$formInput.focus()},b.prototype._blur=function(){var a;return a=this,a.enabled()&&a._updateCssFocused(),void a._$formInput.blur()},b.prototype._updateCssWidth=function(){var a,b,c,d,e,f,g;return d=this,a=d.uiElement(),f=d.width(),c=d.isNumber(f),c&&0>=f?void 0:(g=d._cssUnitRE.exec(f),e=parseInt(g[1]),b=g[2],a.css("width",null!=b?f:f+"px"))},b.prototype._updateCssHeight=function(){var a,b,c,d,e,f,g,h,i,j;return f=this,a=f._$formInput,c=f.uiElement(),h=f.height(),e=f.isNumber(h),e&&0>=h?void 0:(i=f._cssUnitRE.exec(h),g=parseInt(i[1]),d=i[2],c.css("height",null!=d?h:h+"px"),j=c.height()-2,a.height(j),b=$(f._JQSelector.placeholder,f._$root),b.size()>0?b.css("line-height",""+j+"px"):void 0)},b.prototype._updateCssFocused=function(){var a,b,c,d,e,f;return d=this,c=d.focused(),e=d.readonly(),b=d.enabled(),f=d._rootCls,a=d._$root,void(c?(a.addClass(f.focused),b&&e&&d._hidePlaceHolder()):(a.removeClass(f.focused),b&&d._showPlaceHolder()))},b.prototype._showPlaceHolder=function(){var a,b;return a=this,a._nativePlaceHolder||(b=$.trim(a._$formInput.val()))?void 0:$(a._JQSelector.placeholder,a._$root).show()},b.prototype._hidePlaceHolder=function(){var a;return a=this,a._nativePlaceHolder?void 0:$(a._JQSelector.placeholder,a._$root).hide()},b.prototype._updateCssPlaceHolder=function(){var a,b,c,d,e,f;return e=this,f=e.placeHolder(),c=e.uiElement(),a=e._$formInput,e._nativePlaceHolder?a.attr("placeholder",f):(d=c.height()-2,b=$(e._JQSelector.placeholder,c),void(b.size()>0?b.text(f).css("line-height",d):(b="<label for='' class='eba-placeholder-lable' style='line-height:"+d+"px;'>"+f+"</label>",a.after(b))))},b.prototype._updateCssEnabled=function(){var a,b,c,d;return c=this,d=c._rootCls,b=c._$root,a=c._$formInput,void(c.enabled()?(b.removeClass(d.disabled),a.attr("disabled",null)):(a.attr("disabled","disabled"),b.removeClass(d.focused),b.addClass(d.disabled)))},b.prototype._updateCssReadonly=function(){var a,b,c,d,e,f;return c=this,e=c.readonly(),f=c._rootCls,b=c._$root,a=c._$formInput,d="readonly",c.enabled()&&e?(b.addClass(f[d]),void a.attr(d,d)):void(e||(b.removeClass(f[d]),a.attr(d,null)))},b.prototype._init=function(a){var c,d,e,f,g;return b.__super__._init.call(this,a),c=this,c._width=null!=(d=a.width)?d:150,c._height=null!=(e=a.height)?e:21,c._maxLength=null!=(f=a.maxLength)?f:0,c._iconCls=null!=(g=a.iconCls)?g:"",a.placeHolder&&(c._placeHolder=a.placeHolder),c._enterAsTab=!0,c._$formInput=$(c._JQSelector.input,c._$root),c._$formInput.attr("name",c.name()),c._nativePlaceHolder="placeholder"===$("html").attr("data-native"),void c._updateCssPlaceHolder()},b.prototype._updateAttrMaxLen=function(){var a,b;return b=this,a=b.maxLength(),b._$formInput.attr("maxlength",a>0?a:null)},b.prototype._updateAttrValue=function(){var a,b;return a=this,b=a.value(),void(a.isEmpty(b)?(a._$formInput.val(""),a._showPlaceHolder()):(a._$formInput.val(b),a._hidePlaceHolder()))},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._updateAttrMaxLen(),a._updateAttrValue(),a._updateCssIcon()},b.prototype._updateCssIcon=function(){var a,b,c,d,e,f,g;return g=this,b=g.uiElement(),e=g.iconCls(),c="eba-textbox-icon",d='[class$="border"]',f=".eba-textbox-icon i",void(e?($(d,b).addClass(c),a=$(f,b),a.size()>0?a.attr("class",e):$("<i class='"+e+"'></i>").insertBefore(g._$formInput)):($(f,b).remove(),$(d,b).removeClass(c)))},b.prototype._iconCls="",b.prototype.iconCls=function(a){var b;return b=this,""===$.trim(a)?b._iconCls:(b._iconCls=a,void b._updateCssIcon())},b.prototype._maxLength=0,b.prototype.maxLength=function(a){var b,c,d;return b=this,b.isNumber(a)?(c=b._maxLength,a>0&&c>a&&(d=b.value(),b.value(d.substr(0,a))),b._maxLength=a,b._$formInput.attr("maxlength",a>0?a:null)):b._maxLength},b.prototype.focusable=function(){return!0},b.prototype._placeHolder="",b.prototype.placeHolder=function(a){var b;return b=this,b.isString(a)?(b._placeHolder=a,b._updateCssPlaceHolder()):b._placeHolder},b.prototype._setValue=function(a,b,c,d){var e,f;return null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),f=this,e=f.maxLength(),e>0&&a.length>e&&(a=a.substr(0,e)),f._value===a?void 0:(f._value=a,b===!0&&f._$formInput.val(a),a?f._hidePlaceHolder():f._showPlaceHolder(),c===!0&&f.triggerEvent("change",d),void(f.validateOnChange()&&f.validate()))},b.prototype.value=function(a){var b;return b=this,b.isString(a)?b._setValue(a,!0):b._value},b.prototype.data=function(a){var b;return b=this,b.isString(a)?b._setValue(a,!0):b._value},b}(FormField),ebaui.web.registerFormControl("TextBox",TextBox),TextArea=function(a){function b(){return _ref15=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._init=function(a){var c;return b.__super__._init.call(this,a),c=this,void(c._enterAsTab=!1)},b}(TextBox),ebaui.web.registerFormControl("TextArea",TextArea),Password=function(a){function b(){return _ref16=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._init=function(a){return b.__super__._init.call(this,a),this._maxLength=0},b}(TextBox),ebaui.web.registerFormControl("Password",Password),ButtonEdit=function(a){function b(){return _ref17=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._JQSelector={input:".eba-buttonedit-input",placeholder:".eba-placeholder-lable",icon:".eba-label-icon",btnClose:".eba-buttonedit-close",btnToggle:".eba-buttonedit-button"},b.prototype._rootCls={disabled:"eba-buttonedit-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},b.prototype._updateCssReadonly=function(){var a,c,d;return b.__super__._updateCssReadonly.call(this),d=this,a=d.uiElement(),c=d._$btnToggle,d.readonly()?c.hide():c.show(),d._updateCssCloseButton()},b.prototype._updateCssWidth=function(){var a,b,c,d,e,f,g;return d=this,a=d.uiElement(),f=d.width(),c=d.isNumber(f),c&&0>=f?void 0:(g=d._cssUnitRE.exec(f),e=parseInt(g[1]),b=g[2],a.css("width",null!=b?f:f+"px"))},b.prototype._setupEvents=function(a){var b,c,d,e,f,g,h,i;return g=this,c=g._$root,b=g._$formInput,i=g._JQSelector,h=i.placeholder,f=i.formInput,e=".eba-buttonedit-button",d=i.btnClose,g.onEvent("keydown",a.onkeydown),g.onEvent("keyup",a.onkeyup),g.onEvent("enter",a.onenter),g.onEvent("focus",a.onfocus),g.onEvent("blur",a.onblur),g.onEvent("change",a.onchange),g.onEvent("btnclick",a.onbtnclick),g.onEvent("clsclick",a.onclsclick),c.on("click",h,function(){return $(this).hide(),g._$formInput.focus()}),c.on("click",e,function(a){return g.enabled()?g.triggerEvent("btnclick",a):void 0}),c.on("click",d,function(a){return g.showClose()&&g.enabled()?g.triggerEvent("clsclick",a):a.preventDefault()}),c.on("keydown",f,function(a){var b;if(!g.enabled()||!g.allowInput())return a.preventDefault();switch(b=a.which){case keyboard.isEnter(b):return g.triggerEvent("enter",a);default:return g.triggerEvent("keydown",a)}}),c.on("keyup",f,function(a){var c;return c=b.val(),g.text(c),g._setValue(c,!0,a),g.triggerEvent("keyup",a)}),c.on("focus",f,function(a){return g._focused=!0,g._updateCssFocused(),g.triggerEvent("focus",a)}),void c.on("blur",f,function(a){return g._focused=!1,g._updateCssFocused(),g.triggerEvent("blur",a)})},b.prototype._init=function(a){var c,d,e;return b.__super__._init.call(this,a),d=this,c=d._$root,e=d._JQSelector,d._$btnToggle=$(e.btnToggle,c),d._$btnClose=$(e.btnClose,c),d._iconCls=""},b.prototype._setValue=function(a,b,c){var d;return null==b&&(b=!1),null==c&&(c={}),d=this,d._value===a||d._value&&d._value===a?void 0:(d._value=a,a?d._hidePlaceHolder():d._showPlaceHolder(),b===!0&&d.triggerEvent("change",c),void(d.validateOnChange()&&d.validate()))},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._updateAttrText(),a._updateCssCloseButton()},b.prototype._showClose=!1,b.prototype.showClose=function(a){var b;return b=this,b.isBoolean(a)?(b._showClose=a,b._updateCssCloseButton()):b._showClose},b.prototype._updateCssEnabled=function(){return b.__super__._updateCssEnabled.call(this),this._updateCssCloseButton()},b.prototype._updateCssCloseButton=function(){var a,b,c,d,e,f,g;return d=this,b=d.uiElement(),g=d.showClose(),a=d._$btnClose,f="eba-buttonedit-switch",e=d.readonly(),c=d.enabled(),e||!c?(a.css("display","none"),void b.removeClass(f)):g?(b.addClass(f),a.css("display","inline-block")):(a.css("display","none"),b.removeClass(f))},b.prototype._updateAttrText=function(){var a,b;return a=this,b=a.text(),a._$formInput.val(b),b?a._hidePlaceHolder():a._showPlaceHolder()},b.prototype._text="",b.prototype.text=function(a){var b;return b=this,b.isString(a)&&b._text!==a?(b._text=a,b._updateAttrText()):b._text},b.prototype.value=function(a){var b;return b=this,null==a?b._value:b._setValue(a)},b.prototype.data=function(a){var b,c,d,e;return c=this,d=c.textField(),e=c.valueField(),(b=a&&null!=a[d]&&null!=a[e])?(c._data=a,c.text(a[d]),c.value(a[e])):c._data},b.prototype._valueField="value",b.prototype.valueField=function(a){var b;return b=this,b.isEmpty(a)?b._valueField:b.isString(a)?b._valueField:b._valueField=a},b.prototype._textField="text",b.prototype.textField=function(a){var b;return b=this,b.isEmpty(a)?b._textField:b.isString(a)?b._textField:b._textField=a},b.prototype._allowInput=!0,b.prototype.allowInput=function(a){var b;return b=this,null==a?b._allowInput:b._allowInput=a},b}(TextBox),ebaui.web.registerFormControl("ButtonEdit",ButtonEdit),Captcha=function(a){function b(){return _ref18=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._setupEvents=function(a){var c,d;return b.__super__._setupEvents.call(this,a),d=this,c=d._$root,c.on("click",'[data-role="btn-reload"]',function(){return d.refresh()})},b.prototype._serverDataInvalidException="captcha code server response is invalid!!",b.prototype._dataSourceInvalidException="the dataSource format is invalid, only remote dataSource supported!",b.prototype._loadCaptcha=function(){var a,b,c,d,e,f,g;if(c=this,a=c.dataSource(),b=c.isUsingRemoteData(a),!b)throw c._dataSourceInvalidException;return g=a.url,e={},c.isFunc(a.data)?e=a.data():$.extend(e,a.data),d=(new Date).getTime(),f=parseInt(1e3*Math.random()),e.t="{0}_{1}".replace("{0}",d).replace("{1}",f),g+="?"+$.param(e),c._$codeImg.attr("src",g)},b.prototype._init=function(a){var c,d,e,f,g,h,i,j;return b.__super__._init.call(this,a),d=this,c="validationUrl",d._width=null!=(e=a.width)?e:250,d._height=null!=(f=a.height)?f:21,d._validateOnServer=null!=(g=a.validateOnServer)?g:!0,d._validationUrl=null!=(h=a[c])?h:"",d._queryKey=null!=(i=a.queryKey)?i:"verify",d._dataSource=null!=(j=a.dataSource)?j:"",d._$codeImg=$(".eba-code-img",d._$root),d._$btnReload=d._$codeImg.parent(),d._configRemoteValidator(d._validateOnServer),d._loadCaptcha()},b.prototype.refresh=function(){return this._loadCaptcha()},b.prototype._dataSource="",b.prototype.dataSource=function(a){var b;return b=this,null==a?b._dataSource:b._dataSource=a},b.prototype._configRemoteValidator=function(a){var b,c,d;return c=this,a&&!c.hasValidator("remote")?(b=function(a,b){return b?null==b.result?!1:1===parseInt(b.result):!1},d={url:c.validationUrl(),token:c.queryKey(),pass:b},void c._validators.push(new RemoteValidator(d))):a?void 0:c.removeValidator("remote")},b.prototype._validateOnServer=!0,b.prototype.validateOnServer=function(a){var b;return b=this,b.isBoolean(a)?(b._validateOnServer=a,b._configRemoteValidator(a)):b._validateOnServer},b.prototype._validationUrl="",b.prototype.validationUrl=function(a){var b,c;return b=this,c=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c.test(a)?b._validationUrl=a:b._validationUrl},b.prototype._queryKey="verify",b.prototype.queryKey=function(a){var b;return b=this,b.isEmpty(a)?b._queryKey:b._queryKey=a},b}(TextBox),ebaui.web.registerFormControl("Captcha",Captcha),Combo=function(a){function b(){return _ref19=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._panel=null,b.prototype._panelContent=null,b.prototype._placeHolder="",b.prototype._doFieldAccess=function(a,b,c){var d,e,f;return null==c&&(c=!0),d=this,f="_"+a,e=d._panelContent,d.isString(b)?(d[f]=b,c&&e[a]?e[a](b):void 0):d[f]},b.prototype._idField="id",b.prototype.idField=function(a){return this._doFieldAccess("idField",a)},b.prototype._textField="text",b.prototype.textField=function(a){return this._doFieldAccess("textField",a)},b.prototype._valueField="value",b.prototype.valueField=function(a){return this._doFieldAccess("valueField",a)},b.prototype._beforeLoading=function(){},b.prototype._finishLoading=function(){},b.prototype._loadData=function(){},b.prototype._initPanel=function(){var a,b;return b=this,a=$('<div data-options="{ visible:false,position: \'absolute\' }" style="display:none;"><input /></div>').appendTo(document.body),b._panel=new ebaui.web.Panel(a,{id:"panel-"+b.id(),width:0,height:0})},b.prototype._reposition=function(){var a,b,c,d,e,f,g,h;return c=this,d=c._panel,d.visible()?(b=c.uiElement(),a=d.uiElement(),f=b.offset(),e=a.outerHeight(),g=$(document).scrollTop(),h=f.top+b.outerHeight(),h+e>$(window).height()+g&&(h=f.top-e),d.move({top:h,left:f.left}),void a.css("width",c.width()-24)):void 0},b.prototype._setupEvents=function(a){var b,c,d,e,f,g;return e=this,f=e._panel,d=".eba-buttonedit-input",g=".eba-placeholder-lable",c=e.uiElement(),b=f.uiElement(),e.onEvent("focus",a.onfocus),e.onEvent("blur",a.onblur),b.on("click",function(a){return a.stopPropagation()}),c.on("click",".eba-buttonedit-button",function(a){return a.stopPropagation(),e.enabled()&&!e.readonly()?(f.toggle(),e._reposition()):void 0}),c.on("focus",d,function(a){return e._focused=!0,e._updateCssFocused(),e.triggerEvent("focus",a)}),c.on("blur",d,function(a){return e._focused=!1,e._updateCssFocused(),e.triggerEvent("blur",a)}),c.on("click",g,function(){var a;return $(this).hide(),a=e._$formInput,a?a.focus():void 0}),$(document).on("click",function(){return f.close()}),$(window).resize(function(){return e._reposition()})},b}(ButtonEdit),ListBox=function(a){function b(){return _ref20=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._itemTmpl="",b.prototype._compiledItemTmpl=$.noop,b.prototype._loadMask=function(){var a,b,c;return c=this,a=c._$root,b=c._compiledItemTmpl({loading:!0}),$("table.eba-listbox-items",a).html(b)},b.prototype._renderData=function(){var a,b,c;return c=this,a=c._$root,b=c._compiledItemTmpl({loading:!1,multi:c.multiSelect(),textField:c.textField(),valueField:c.valueField(),selectedItems:c.selectedItems(),dataItems:c.items()}),$("table.eba-listbox-items",a).html(b)},b.prototype._render=function(){var a;return a=this,a._loadData(),b.__super__._render.call(this)},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c._$root,c.onEvent("itemclick",a.onitemclick),c.onEvent("loadfail",a.onloadfail),c.onEvent("load",a.onload),c.onEvent("loadcomplete",a.onloadcomplete),b.on("click","tr.eba-listbox-item",function(a){var b,d;return b=$(this),d=parseInt(b.attr("data-index")),a.ctrlKey?c.deselect(d):c.select(d),c.triggerEvent("itemclick",a)})},b.prototype._init=function(a){var b,c,d,e;return b=this,b._width=null!=(c=a.width)?c:150,b._height=null!=(d=a.height)?d:0,b._dataSource=null!=(e=a.dataSource)?e:[],null!=a.idField&&(b._idField=a.idField),null!=a.textField&&(b._textField=a.textField),null!=a.valueField&&(b._valueField=a.valueField),b._compiledItemTmpl=b.compileTmpl(b._itemTmpl)},b.prototype.focusable=function(){return!0},b.prototype.text=function(){var a,b,c,d,e;return d=this,e=[],b=d.textField(),a=d.data(),e=function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(c[b]);return f}()},b.prototype.value=function(a){var b,c,d,e,f,g,h,i,j,k;if(d=this,!a)return d._value;for(c=d.items(),b=d.valueField(),d.isArray(a)||(a=[a]),f=[],h=0,j=c.length;j>h;h++)for(e=c[h],i=0,k=a.length;k>i;i++)g=a[i],g===e[b]&&f.push(e);return d.select(f)},b.prototype.data=function(a){var b;return b=this,a?b.select(a):b.selectedItems()},b.prototype._items=[],b.prototype._beforeLoading=function(){return this._loadMask()},b.prototype._finishLoading=function(){var a;return a=this,a._currItemIdx=-1,a._selectedItems=[],a._renderData()},b.prototype._loadData=function(){var a,b,c,d;return b=this,a=b.dataSource(),c=b.isUsingRemoteData(a),c?(b._items=[],b._selectedItems=[],d={},b.isFunc(a.data)?d=a.data():$.extend(d,a.data),b._beforeLoading(),$.ajax({url:a.url,data:d,dataType:"json",error:function(a){return b.triggerEvent("loadfail",a)},success:function(a){return b._items=a,b._finishLoading(),b.triggerEvent("load",a)},complete:function(a){return b.triggerEvent("loadcomplete",a)}})):(b._beforeLoading(),b._items=a,b._finishLoading())},b.prototype.items=function(){return this._items},b.prototype._selectedItems=[],b.prototype.selectedItems=function(){return this._selectedItems},b.prototype.add=function(a){var b;if(null!=a)return b=this,b.isArray(a)||(a=[a]),a.length>0?(b._items=b._items.concat(a),b._renderData()):void 0},b.prototype.remove=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(null!=a&&(f=this,f.isArray(a)||(a=[a]),a.length>0)){for(g=f.valueField(),c=h=0,j=a.length;j>h;c=++h)for(d=a[c],l=f._items,e=i=0,k=l.length;k>i;e=++i)if(b=l[e],b[g]===d[g]){f._items.splice(e,1);break}return f._renderData()}},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(null!=a&&(f=this,f.isArray(a)||(a=[a]),a.length>0)){for(g=f.valueField(),c=h=0,j=a.length;j>h;c=++h)for(d=a[c],l=f._items,e=i=0,k=l.length;k>i;e=++i)if(b=l[e],b[g]===d[g]){f._items[e]=d;break}return f._renderData()}},b.prototype.move=function(a,b){var c,d,e;return d=this,d.isNumber(a)&&d.isNumber(b)?(c=d._items,e=c[a],c[a]=c[b],c[b]=e,d._renderData()):void 0},b.prototype._currItemIdx=-1,b.prototype.selectPrev=function(){var a,b,c;return c=this,a=c._currItemIdx,b=c.items(),b&&b.length>0&&!(0>a-1)?(--a,c._currItemIdx=a,c.select(a),c.highlight(a)):void 0},b.prototype.selectNext=function(){var a,b,c;return c=this,a=c._currItemIdx,b=c.items(),b&&b.length>0&&!(a+1>=b.length)?(++a,c._currItemIdx=a,c.select(a),c.highlight(a)):void 0},b.prototype.select=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(h=this,null!=a&&(e=h.isNumber(a),c=h.items(),(!e||a>=0&&a<c.length)&&(e&&(a=[c[a]]),h.isArray(a)||(a=[a]),a.length))){if(j=h._value,i=h._selectedItems,l=h.valueField(),h.multiSelect())for(d=m=0,o=a.length;o>m;d=++m){for(k=a[d],b=!1,g=n=0,p=i.length;p>n;g=++n)if(f=i[g],f[l]===k[l]){b=!0;break}b||(j.push(f[l]),i.push(k))}else j=a[0][l],i=a[0];return h._value=j,h._selectedItems=i,h._renderData()}},b.prototype.deselect=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(f=this,null!=a&&(d=f.isNumber(a),b=f.items(),(!d||a>=0&&a<b.length)&&(d&&(a=[b[a]]),f.isArray(a)||(a=[a]),a.length&&(h=f._selectedItems,!(a.length<=0||h.length<=0))))){for(j=f.valueField(),c=k=0,m=a.length;m>k;c=++k)for(i=a[c],e=l=0,n=h.length;n>l;e=++l)if(g=h[e],g[j]===i[j]){h.splice(e,1);break}return f._currItemIdx=-1,f._renderData()}},b.prototype.deselectAll=function(){var a;return a=this,a._currItemIdx=-1,a._selectedItems=[],a._renderData()},b.prototype.highlight=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(i=this,null!=a){if(g=-1,i.isNumber(a)){if(a>=i._items.length)return;g=a}else for(c=i.valueField(),l=i._items,e=j=0,k=l.length;k>j;e=++j)if(f=l[e],f=i._items[e],a[c]&&f[c]===a[c]){g=e;break}return b=i._$root,d="eba-listbox-item-hover",$(".eba-listbox-item-hover",b).removeClass(d),g>-1?(h=".eba-listbox-item:eq("+g+")",$(h,b).addClass(d)):void 0}},b.prototype._idField="id",b.prototype.idField=function(a){var b;return b=this,b.isString(a)?b._idField=a:b._idField},b.prototype._valueField="value",b.prototype.valueField=function(a){var b;return b=this,b.isString(a)?(b._valueField=a,b._renderData()):b._valueField},b.prototype._textField="text",b.prototype.textField=function(a){var b;return b=this,b.isString(a)?(b._textField=a,b._renderData()):b._textField},b.prototype._dataSource={},b.prototype.dataSource=function(a){var b;return b=this,null==a?b._dataSource:(b._dataSource=a,b._loadData())},b.prototype._multiSelect=!1,b.prototype.multiSelect=function(a){var b;return b=this,b.isBoolean(a)?b._multiSelect=a:b._multiSelect},b}(FormField),ebaui.web.registerFormControl("ListBox",ListBox),MiniGrid=function(a){function b(){return _ref21=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._headerTmpl="",b.prototype._itemTmpl="",b.prototype._compiledHeaderTmpl=$.noop,b.prototype._compiledItemTmpl=$.noop,b.prototype._doUpdateCssSize=function(a){var b,c,d,e,f,g;return e=this,f=e[a](),d=e.isNumber(f),b=e._$root,c=$(".eba-listbox-view",b),d&&0>=f?void 0:void(f&&(g=e._cssUnitRE.exec(f),c.css(a,null!=g[1]?f:f+"px")))},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c._$root,c.onEvent("selectrow",a.onSelectRow),c.onEvent("selectall",a.onSelectAll),c.onEvent("load",a.loadComplete),void b.on("change",":checkbox",function(a){var d,e,f,g,h;return e=$(this),h=e.val(),f=e.is(":checked"),g="eba-listbox-item-selected",void("selectall"===h?f?($(':checkbox[value!="selectall"]',b).prop("checked",!0),$('.eba-listbox-view tr[data-index!=""]',b).addClass(g),c.triggerEvent("selectall",a)):(c.resetSelection(),$(".eba-listbox-view ."+g,b).removeClass(g),c.triggerEvent("selectall",a)):(d=e.parent().parent(),f?(d.addClass(g),c.triggerEvent("selectrow",a)):(d.removeClass(g),c.triggerEvent("selectrow",a))))})},b.prototype._isRemoteDataSource=function(){var a,b,c;return b=this,a=b._data,(c=b._url)?!0:a&&b.isArray(a)?!1:(b._data=[],!1)},b.prototype._init=function(a){var c,d,e,f,g,h,i,j,k;return b.__super__._init.call(this,a),c=this,c._width=null!=(d=a.width)?d:400,c._height=null!=(e=a.height)?e:120,c._url=null!=(f=a.url)?f:"",c._data=null!=(g=a.data)?g:[],c._datatype=null!=(h=a.datatype)?h:"local",c._colModel=null!=(i=a.colModel)?i:[{name:"id",label:"ID",width:150},{name:"text",label:"Text",width:150}],c._autowidth=null!=(j=a.autowidth)?j:!0,c._multiselect=null!=(k=a.multiselect)?k:!0,c._compiledHeaderTmpl=c.compileTmpl(c._headerTmpl),c._compiledItemTmpl=c.compileTmpl(c._itemTmpl)},b.prototype._autowidth=!0,b.prototype._data=[],b.prototype._url="",b.prototype._datatype="local",b.prototype._postData=[],b.prototype._colModel=[{name:"id",label:"ID",width:150},{name:"text",label:"Text",width:150}],b.prototype._multiselect=!0,b.prototype._loadData=function(){var a,b,c,d,e,f,g,h;if(d=this,c=d._isRemoteDataSource()){if(b=d._url,f=d._postData,e={},f)for(g=0,h=f.length;h>g;g++)a=f[g],$.extend(e,a);$.getJSON(b,e,function(a){return d._items=a,d._finishLoading(),d.triggerEvent("load")})}else d._items=d._data,d._finishLoading(),d.triggerEvent("load");return void 0},b.prototype._finishLoading=function(){var a,b,c,d,e;return e=this,a=e._$root,b=e._colModel,c=e._compiledHeaderTmpl({headers:b}),d=e._compiledItemTmpl({headers:b,rows:e.items(),autowidth:e._autowidth}),e._autowidth?($(".eba-listbox-headerInner",a).html(c),$(".eba-listbox-items",a).html(d)):$(".eba-listbox-items",a).html(c+d)},b.prototype._render=function(){var a;return a=this,a._loadData(),a._updateCssWidth(),a._updateCssHeight()},b.prototype._items=[],b.prototype.items=function(){return this._items},b.prototype.selectedItems=function(){var a,b,c,d,e,f,g,h,i;if(f=this,!(f._items.length>0))return[];for(c=[],a=f._$root,$(":checked",a).each(function(a,b){var d,e;return d=$(b),e=d.val(),b.checked&&"selectall"!==e?c.push(parseInt(e)):void 0}),e=f._items,g=[],b=h=0,i=c.length;i>h;b=++h)d=c[b],g.push(e[d]);return g},b.prototype.resetSelection=function(a){var b,c,d,e,f,g,h;return g=this,d=g._$root,c=$(":checked",d),b=$(":checkbox",d),f=c.size(),e=f===g._items.length,h=!g.isNumber(a),f>0?h?($(".eba-listbox-item-selected",d).removeClass("eba-listbox-item-selected"),void c.prop("checked",!1)):void(e?(b.get(0).checked=!1,b.get(a+1).checked=!1):b.get(a+1).checked=!1):void 0},b.prototype.setSelection=function(a){var b,c,d;return c=this,d='tr[data-index="{0}"]'.replace("{0}",a),b=$(d,c._$root),b.size()>0?(b.find(":checkbox").get(0).checked=!0,b.addClass("eba-listbox-item-selected"),c.triggerEvent("selectrow")):void 0},b.prototype.getGridParam=function(a){var b,c;return b=this,c="_"+a,b[c]},b.prototype.setGridParam=function(a){var b,c,d,e;if(null!=a){c=this;for(b in a)e=a[b],d="_"+b,c[d]=e;return void 0}},b.prototype.reloadGrid=function(){return this._render()},b}(Control),ebaui.web.registerControl("MiniGrid",MiniGrid),CheckBox=function(a){function b(){return _ref22=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._updateCssChecked(),a._updateAttrText()},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c._$root,c.onEvent("change",a.onchange),void b.on("change","input",function(a){return c._checked=this.checked,c.triggerEvent("change",a)})},b.prototype._updateAttrId=function(){var a,c,d,e;return b.__super__._updateAttrId.call(this),e=this,c=e.uiElement(),a=e._$formInput,d=e.controlID(),a.attr("id",d),$("label",c).attr("for",d)},b.prototype._init=function(a){var c,d,e,f,g,h;return b.__super__._init.call(this,a),c=this,c._$formInput=$("input",c._$root),c._text=null!=(d=a.text)?d:!1,c._checked=null!=(e=a.checked)?e:!1,c._valueField=null!=(f=a.valueField)?f:"value",c._value=null!=(g=a.value)?g:!0,c._textField=null!=(h=a.textField)?h:"text"},b.prototype._updateAttrText=function(){var a,b;return b=this,a=b.uiElement(),$("label",a).text(b.text())},b.prototype._updateCssChecked=function(){var a;return a=this,a._$formInput.get(0).checked=a.checked()},b.prototype._text="",b.prototype.text=function(a){var b;return b=this,b.isString(a)?(b._text=a,b._updateAttrText()):b._text},b.prototype.data=function(a){var b,c,d;return b=this,b.isNull(a)?b._checked:(c=a[b.textField()],c&&b.text(c),d=a[b.valueField()],b.isNull(a)||b.value(d),void(b.isBoolean(a.checked)&&b.checked(a.checked)))},b.prototype.value=function(a){var b;return b=this,null==a?b._value:b._value!==a?b._value=a:void 0
},b.prototype._checked=!1,b.prototype.checked=function(a){var b;return b=this,b.isBoolean(a)?(b._checked=a,b._updateCssChecked()):b._checked},b.prototype._valueField="value",b.prototype.valueField=function(a){var b;return b=this,b.isString(a)?b._valueField=a:b._valueField},b.prototype._textField="text",b.prototype.textField=function(a){var b;return b=this,b.isString(a)?b._textField=a:b._textField},b}(FormField),ebaui.web.registerFormControl("CheckBox",CheckBox),CheckBoxList=function(a){function b(){return _ref23=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._itemTmpl="",b.prototype._compiledItemTmpl=$.noop,b.prototype._renderItems=function(){var a,b,c,d;return d=this,a=d.uiElement(),b=d.items(),0!==b.length?(c=d._compiledItemTmpl({name:d.name(),controlID:d.controlID(),textField:d.textField(),valueField:d.valueField(),dataItems:b}),$("tr",a).html(c)):void 0},b.prototype._items=[],b.prototype.items=function(){return this._items},b.prototype._beforeLoading=function(){},b.prototype._finishLoading=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(f=this,a=f.value(),d=f.items(),h=f.valueField(),a&&a.length>0)for(e=i=0,k=a.length;k>i;e=++i)for(g=a[e],c=j=0,l=d.length;l>j;c=++j)b=d[c],b.checked=b[h]===g;return f._renderItems()},b.prototype._loadData=function(){var a,b,c,d,e,f;return d=this,b=d.dataSource(),c=d.isUsingRemoteData(b),void(c?(e=d.isFunc(a)?a():"undefined"!=typeof a&&null!==a?a:{},f=b.url,a=b.data,d._beforeLoading(),$.getJSON(f,e).done(function(a){return d._items=a,d._finishLoading()})):(d._beforeLoading(),d._items=b,d._finishLoading()))},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,void a._loadData($.noop,function(){var b,c,d,e,f,g,h,i,j,k,l;if(b=a.value(),e=a.items(),h=a.valueField(),b&&b.length>0)for(f=i=0,k=b.length;k>i;f=++i)for(g=b[f],d=j=0,l=e.length;l>j;d=++j)c=e[d],c.checked=c[h]===g;return a._renderItems()})},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c._$root,c.onEvent("change",a.onchange),void b.on("change","input",function(a){return c.triggerEvent("change",a)})},b.prototype._init=function(a){var c,d,e,f;return b.__super__._init.call(this,a),c=this,c._dataSource=null!=(d=a.dataSource)?d:"",c._valueField=null!=(e=a.valueField)?e:"value",c._textField=null!=(f=a.textField)?f:"text",c._compiledItemTmpl=c.compileTmpl(c._itemTmpl)},b.prototype.data=function(a){var b,c,d,e,f,g,h;if(e=this,null==a||!e.isArray(a))return e._data;for(b=[],f=e.valueField(),c=g=0,h=a.length;h>g;c=++g)d=a[c],null!=d[f]&&b.push(d[f]);return e._data=a,void e.value(b)},b.prototype.value=function(a){var b,c;return c=this,b=c.uiElement(),c._value=c._getValue(),c.isArray(a)?c._setValue(a):c._value},b.prototype._getValue=function(){var a,b,c;return c=this,a=c.uiElement(),b=[],$("input:checked",a).each(function(a,c){return b.push($(c).val())}),b},b.prototype._setValue=function(a,b,c,d){var e,f,g,h,i,j;if(null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),h=this,e=h.uiElement(),!h._value||h._value.join("")!==a.join("")){if(h._value=a,b)for($("input:checked",e).prop("checked",!1),f=i=0,j=a.length;j>i;f=++i)g=a[f],$("input[value='"+g+"']",e).prop("checked",!0);return c===!0?h.triggerEvent("change",d):void 0}},b.prototype._doFieldAccess=function(a,b){var c,d;return c=this,d="_"+a,c.isString(b)?c[d]=b:c[d]},b.prototype._valueField="value",b.prototype.valueField=function(a){return this._doFieldAccess("valueField",a)},b.prototype._textField="text",b.prototype.textField=function(a){return this._doFieldAccess("textField",a)},b.prototype._dataSource="",b.prototype.dataSource=function(a){var b;return b=this,a?(b._dataSource=a,b._loadData($.noop,function(){return b._renderItems()})):b._dataSource},b}(FormField),ebaui.web.registerFormControl("CheckBoxList",CheckBoxList),RadioList=function(a){function b(){return _ref24=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._finishLoading=function(){var a,b,c,d;return d=this,d._renderItems(),b=d.uiElement(),c=d.value(),a=$("input[value='"+c+"']",b),a.prop("checked",!0)},b.prototype.data=function(a){var b,c;return b=this,c=b.valueField(),null==a||null==a[c]?b._data:void b.value(a[c])},b.prototype.value=function(a){var b,c,d;return d=this,c=d.uiElement(),null==a||d._value===a?d._value:(d._value=a,b=$("input[value='"+a+"']",c),b.size()>0?b.prop("checked",!0):void 0)},b}(CheckBoxList),ebaui.web.registerFormControl("RadioList",RadioList),Hidden=function(a){function b(){return _ref25=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._doValueAccess=function(a){var b;return b=this,null==a?b._value:b._value=a},b.prototype.data=function(a){return this._doValueAccess(a)},b.prototype.value=function(a){return this._doValueAccess(a)},b}(FormField),ebaui.web.registerFormControl("Hidden",Hidden),Label=function(a){function b(){return _ref26=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._availableState=/white|primary|info|success|warning|danger|\s+/i,b.prototype._updateCssBorder=function(){var a,b,c,d;return d=this,a=d.uiElement(),b=a.attr("class"),c=b.indexOf("eba-nobor")>-1||b.indexOf("eba-bor")>-1,c?d.hasBorder()?b.replace("eba-nobor","eba-bor"):b.replace("eba-bor","eba-nobor"):d.hasBorder()&&(b+=" eba-bor"),a.attr("class",b)},b.prototype._updateCssTextAlign=function(){var a,b,c,d,e;return e=this,a=e.uiElement(),b=e.textAlign(),d=a.attr("class"),c={left:"eba-txtl",center:"eba-txtc",right:"eba-txtr"},d.replace("eba-txtl"," ").replace("eba-txtc"," ").replace("eba-txtr"," "),d+=" "+c[b],a.attr("class",d)},b.prototype._updateAttrText=function(){var a,b;return b=this,a=b.uiElement(),a.text(b.text())},b.prototype._updateAttrFor=function(){var a,b;return b=this,a=b.uiElement(),a.attr("for",b["for"]())},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._updateCssBorder(),a._updateCssTextAlign(),a._updateAttrText(),a._updateCssStates()},b.prototype._init=function(a){var c,d,e,f,g,h;return b.__super__._init.call(this,a),c=this,c._text=null!=(d=a.text)?d:"",c._for=null!=(e=a["for"])?e:"",c._state=null!=(f=a.state)?f:"",c._hasBorder=null!=(g=a.hasBorder)?g:!1,c._textAlign=null!=(h=a.textAlign)?h:"right"},b.prototype._state="",b.prototype.state=function(a){var b;return b=this,b._availableState.test(a)?(b._state=a.toLowerCase(),b._updateCssStates()):b._state},b.prototype._updateCssStates=function(){var a,b,c,d;return c=this,a=c.uiElement(),d=c.state(),b=a.attr("class"),d.length>0?a.attr("class",""+b+" label-"+d):void 0},b.prototype._hasBorder=!1,b.prototype.hasBorder=function(a){var b;return b=this,b.isBoolean(a)?(b._hasBorder=a,b._updateCssBorder()):b._hasBorder},b.prototype._text="",b.prototype.text=function(a){var b;return b=this,b.isString(a)?(b._text=a,b._updateAttrText()):b._text},b.prototype._for="",b.prototype["for"]=function(a){var b;return b=this,b.isString(a)?(b._for=a,b._updateAttrFor()):b._for},b.prototype.data=function(a){var b;return b=this,b.isString(a)?(b._text=a,b._updateAttrText()):b._text},b.prototype._textAlign="right",b.prototype.textAlign=function(a){var b,c;return b=this,c=/left|center|right/i,c.test(a)?(b._textAlign=a,b._updateCssTextAlign()):b._textAlign},b}(FormField),ebaui.web.registerFormControl("Label",Label),Spinner=function(a){function b(){return _ref27=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._rootCls={disabled:"eba-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},b.prototype._focus=function(){var a;return a=this,a.enabled()&&!a.readonly()?(a._updateCssFocused(),a._$formInput.focus()):void 0},b.prototype._blur=function(){var a;return a=this,a.enabled()?a._$formInput.blur():void 0},b.prototype._updateCssFocused=function(){var a,b,c;return c=this,b=c._rootCls.focused,a=c._$root,c.focused()?a.addClass(b):a.removeClass(b)},b.prototype._updateCssEnabled=function(){var a,b,c,d,e,f;return e=this,b=e._$root,f=e._rootCls,a=e._$formInput,d=f.focused,c=f.disabled,e.enabled()?(a.attr("disabled",null),b.removeClass(c)):(a.attr("disabled","disabled"),b.removeClass(d).addClass(c))},b.prototype._updateCssReadonly=function(){var a,b,c,d,e,f;return e=this,f=e._rootCls.readonly,c=e._$root,a=$(".eba-buttonedit-buttons",c),b=e._$formInput,d="readonly",e.readonly()?(c.addClass(f),a.hide(),b.attr(d,d)):(c.removeClass(f),b.attr(d,null),a.show())},b.prototype._fixNumber=function(a){var b,c,d;return c=this,null==a&&(a=c.value()),d=c.decimalPlaces(),b=0>d?a.toString():a.toFixed(d)},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._$formInput.val(a._fixNumber())},b.prototype._setupEvents=function(a){var b,c,d,e;return e=this,c=e._$root,b=e._$formInput,d=ebaui.web.keyboard,e.onEvent("focus",a.onfocus),e.onEvent("blur",a.onblur),e.onEvent("change",a.onchange),e.onEvent("spinup",a.onspinup),e.onEvent("spindown",a.onspindown),c.on("keydown","input",function(a){return d.isNumber(a.which)?void 0:a.preventDefault()}),c.on("keyup","input",function(a){switch(a.which){case 38:return e.stepUp();case 40:return e.stepDown();default:return e._setValue(b.val(),!1,!0,a)}}),c.on("focus","input",function(a){return e._focused=!0,e._updateCssFocused(),e.triggerEvent("focus",a)}),c.on("blur","input",function(a){return e._focused=!1,e._updateCssFocused(),e.triggerEvent("blur",a)}),c.on("click",".eba-buttonedit-up",function(a){return e.stepUp(!0,!0,a),e.triggerEvent("spinup",a)}),c.on("click",".eba-buttonedit-down",function(a){return e.stepDown(!0,!0,a),e.triggerEvent("spindown",a)})},b.prototype._init=function(a){var c,d,e,f,g,h,i,j;return b.__super__._init.call(this,a),e=this,c=e._$root,e._$formInput=$("input",c),e._step=null!=(f=a.step)?f:1,e._min=null!=(g=a.min)?g:0,e._max=null!=(h=a.max)?h:100,e._width=null!=(i=a.width)?i:150,e._height=null!=(j=a.height)?j:21,d=e.isNumber(a.value)?a.value:0,e._setValue(d)},b.prototype.focusable=function(){return!0},b.prototype._setValue=function(a,b,c,d){var e,f,g,h;return null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),null==a||(g=this,a=parseFloat(a),isNaN(a))?void 0:(f=g.max(),h=g.min(),h>a&&(a=h),a>f&&(a=f),e=g._fixNumber(a),a=parseFloat(e),g._value=a,b&&g._$formInput.val(e),c===!0&&g.triggerEvent("change",d),void(g.validateOnChange()&&g.validate()))},b.prototype.data=function(a){var b;return b=this,null==a?b._value:b._setValue(a)},b.prototype.value=function(a){var b;return b=this,null==a?b._value:b._setValue(a)},b.prototype._step=1,b.prototype.step=function(a){var b;return b=this,b.isNumber(a)?b._step=a:b._step},b.prototype.stepUp=function(a,b,c){var d,e,f;return null==a&&(a=!0),null==b&&(b=!1),null==c&&(c={}),e=this,d=e.max(),f=e.value()+e.step(),f=f>d?d:f,e._setValue(f,a,b,c)},b.prototype.stepDown=function(a,b,c){var d,e,f;return null==a&&(a=!0),null==b&&(b=!1),null==c&&(c={}),d=this,e=d.min(),f=d.value()-d.step(),f=e>f?e:f,d._setValue(f,a,b,c)},b.prototype._min=0,b.prototype.min=function(a){var b;return b=this,b.isNumber(a)?b._min=a:b._min},b.prototype._max=100,b.prototype.max=function(a){var b;return b=this,b.isNumber(a)?b._max=a:b._max},b.prototype._decimalPlaces=0,b.prototype.decimalPlaces=function(a){var b;return b=this,b.isNumber(a)?b._decimalPlaces=a:b._decimalPlaces},b}(FormField),ebaui.web.registerFormControl("Spinner",Spinner),TimeSpinner=function(a){function b(){return _ref28=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._current="hour",b.prototype._rootCls={disabled:"eba-disabled",focused:"eba-buttonedit-focus",readonly:"eba-readonly"},b.prototype._max={hour:23,minute:59,second:59},b.prototype._min={hour:0,minute:0,second:0},b.prototype._focus=function(){var a;return a=this,a.enabled()?(a._updateCssFocused(),$("input[data-pos='"+a._current+"']",a._$root).focus()):void 0},b.prototype._blur=function(){var a;return a=this,a.enabled()?(a._updateCssFocused(),$("input[data-pos='"+a._current+"']",a._$root).blur()):void 0},b.prototype._updateCssWidth=function(){var a;return a=this,a._$root.width(a.width()),a._updateCssFormat()},b.prototype._updateCssFocused=function(){var a,b,c;return c=this,a=c._$root,b=c._rootCls.focused,c.focused()?a.addClass(b):a.removeClass(b)},b.prototype._updateCssEnabled=function(){var a,b,c,d,e,f,g;return g=this,c=g._rootCls,e="disabled",f=c.focused,d=c.disabled,b=g._$root,a=$("input",b),g.enabled()?(a.attr(e,null),b.removeClass(d)):(a.attr(e,e),b.removeClass(f).addClass(d))},b.prototype._updateCssReadonly=function(){var a,b,c,d,e,f,g;return e=this,d=e._rootCls,f="readonly",g=d[f],c=e._$root,b=$("input",c),a=$(".eba-buttonedit-buttons",c),e.readonly()?(c.addClass(g),a.hide(),b.attr(f,f)):(c.removeClass(g),b.attr(f,null),a.show())},b.prototype._updateCssFormat=function(){var a,b,c,d,e,f,g,h,i,j,k;switch(i=this,e=i._$root,h=i.format().split(":").length,j=k=e.width()-$(".eba-buttonedit-button",e).outerWidth(),b=$("input",e),a=b.eq(0),c=b.eq(1),f=b.eq(2),d=c.parent(),g=f.parent(),h){case 1:a.width(k),d.hide(),g.hide();break;case 2:k=.4*j,a.width(k),c.width(k),g.hide();break;case 3:k=.3*j,a.width(k),c.width(k),f.width(k)}return void 0},b.prototype._updateAttrText=function(){var a,b,c,d,e,f,g,h;for(c=this,a=$("input",c._$root),d=new moment(c.value()),e=d.format(c.format()).split(":"),h=[],b=f=0,g=e.length-1;g>=0?g>=f:f>=g;b=g>=0?++f:--f)h.push(a.eq(b).val(e[b]));return h},b.prototype._render=function(){return b.__super__._render.call(this),this._updateAttrText()},b.prototype._setValue=function(a,b,c,d){var e,f;return null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),null==a||(f=this,f._value&&f._value.getTime()===a.getTime())?void 0:(f._value=a,e=f.uiElement(),b===!0&&f._updateAttrText(),c===!0?f.triggerEvent("change",d):void 0)},b.prototype.stepUp=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),a){switch(j=this,f=j.uiElement(),e=$("input[data-pos='"+a+"']",f),i=j._max[a],l=j.value().clone(),k=0,a){case"hour":k=l.getHours();break;case"minute":k=l.getMinutes();break;case"second":k=l.getSeconds()}switch(g=k+j[""+a+"Step"](),h=i>g,g=j.circular()?h?g:g-i:h?g:i,a){case"hour":l.setHours(g);break;case"minute":l.setMinutes(g);break;case"second":l.setSeconds(g)}return j._setValue(l,b,c,d)}},b.prototype.stepDown=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),a){switch(j=this,f=j.uiElement(),e=$("input[data-pos='"+a+"']",f),i=j._max[a],k=j._min[a],m=j.value().clone(),l=0,a){case"hour":l=m.getHours();break;case"minute":l=m.getMinutes();break;case"second":l=m.getSeconds()}switch(g=l-j[""+a+"Step"](),h=g>k,g=j.circular()?h?g:i-Math.abs(g-k):h?g:k,a){case"hour":m.setHours(g);break;case"minute":m.setMinutes(g);break;case"second":m.setSeconds(g)}return j._setValue(m,b,c,d)}},b.prototype._setupEvents=function(a){var b,c,d;return d=this,b=d._$root,c=ebaui.web.keyboard,d.onEvent("change",a.onchange),d.onEvent("spinup",a.onspinup),d.onEvent("spindown",a.onspindown),b.on("keydown","input",function(a){var b;return b=a.which,8===b||9===b||13===b||38===b||40===b||c.isNumber(b)?void 0:a.preventDefault()}),b.on("keyup","input",function(a){var e,f,g,h,i,j,k;return f=$(this),e=$("input",b),g=c.isEnter(a.which),i=e.index(f),j=d.format().split(":").length,h=j>1&&j-1>i,g&&h?void e.eq(i+1).focus():(k=f.val().toString(),!g&&h?void(2===k.length?e.eq(i+1).focus():k.length>2&&(f.val(k.substr(0,2)),e.eq(i+1).focus())):k.length>2?f.val(k.substr(0,2)):void 0)}),b.on("focus","input",function(a){return d._current=$(this).attr("data-pos"),d._focused=!0,d._updateCssFocused(),d.triggerEvent("focus",a)}),b.on("blur","input",function(a){return d._focused=!1,d._updateCssFocused(),d.triggerEvent("blur",a)}),b.on("click",".eba-buttonedit-up",function(a){return d.stepUp(d._current,!0,!0,a),d.triggerEvent("spinup",a)}),b.on("click",".eba-buttonedit-down",function(a){return d.stepDown(d._current,!0,!0,a),d.triggerEvent("spindown",a)})},b.prototype._init=function(a){var c,d,e,f;return b.__super__._init.call(this,a),c=this,c._width=null!=(e=a.width)?e:150,c._height=null!=(f=a.height)?f:21,null!=a.format&&(c._format=a.format),null!=a.hourStep&&(c._hourStep=a.hourStep),null!=a.minuteStep&&(c._minuteStep=a.minuteStep),null!=a.secondStep&&(c._secondStep=a.secondStep),d=new moment(c._value),c._value=null!=c._value&&d.isValid()?d.toDate():new Date},b.prototype.focusable=function(){return!0},b.prototype._format="HH:mm",b.prototype.format=function(a){var b;return b=this,a?(b._format=a.toString(),b._updateCssFormat()):b._format},b.prototype.data=function(a){var b;return b=this,b.isDate(a)?b._setValue(a):b._value},b.prototype.value=function(a){var b;return b=this,b.isDate(a)?b._setValue(a):b._value},b.prototype._circular=!1,b.prototype.circular=function(a){var b;return b=this,b.isBoolean(a)?b._circular=a:b._circular},b.prototype._step=function(a,b){var c,d;return c=this,d="_"+a,c.isNumber(b)?c[d]=b:c[d]},b.prototype._hourStep=1,b.prototype.hourStep=function(a){return this._step("hourStep",a)},b.prototype._minuteStep=10,b.prototype.minuteStep=function(a){return this._step("minuteStep",a)},b.prototype._secondStep=10,b.prototype.secondStep=function(a){return this._step("secondStep",a)},b}(FormField),ebaui.web.registerFormControl("TimeSpinner",TimeSpinner),MainView=function(a){function b(){return _ref29=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._headerTmpl="",b.prototype._compiledHeaderTmpl=$.noop,b.prototype._weekTmpl="",b.prototype._compiledWeekTmpl=$.noop,b.prototype._weeks=["S","M","T","W","T","F","S"],b.prototype._genWeeksData=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(j=new Date(a,b+1,0).getDate(),d=function(){var c,d;for(d=[],h=c=1;j>=1?j>=c:c>=j;h=j>=1?++c:--c)d.push([a,b,h]);return d}(),l=[],m=[];d.length>0;)c=d.shift(),l.push(c),6===new Date(c[0],c[1],c[2]).getDay()&&(m.push(l),l=[]);if(l.length&&m.push(l),f=m[0],f.length<7)for(;f.length<7;)e=f[0],c=new Date(e[0],e[1],e[2]-1),f.unshift([c.getFullYear(),c.getMonth(),c.getDate()]);else{for(e=f[0],l=[],g=n=1;7>=n;g=++n)c=new Date(e[0],e[1],e[2]-g),l.unshift([c.getFullYear(),c.getMonth(),c.getDate()]);m.unshift(l)}for(k=m[m.length-1];k.length<7;)i=k[k.length-1],c=new Date(i[0],i[1],i[2]+1),k.push([c.getFullYear(),c.getMonth(),c.getDate()]);if(m.length<6){for(i=k[k.length-1],l=[],g=o=1;7>=o;g=++o)c=new Date(i[0],i[1],i[2]+g),l.push([c.getFullYear(),c.getMonth(),c.getDate()]);m.push(l)}return m},b.prototype._currentYear=null,b.prototype.currentYear=function(){var a;return a=this,"undefined"==typeof val||null===val?a._currentYear:a._currentYear=val},b.prototype._currentMonth=null,b.prototype.currentMonth=function(){var a;return a=this,"undefined"==typeof val||null===val?a._currentMonth:a._currentMonth=val},b.prototype._currentDate=null,b.prototype.currentDate=function(a){var b;return b=this,b.isDate(a)?(b._currentDate=a,b._currentYear=a.getFullYear(),b._currentMonth=a.getMonth(),b._renderTitle(),b._renderWeeks()):b._currentDate},b.prototype._titleFormat="MMM YYYY",b.prototype.titleFormat=function(a){var b;return b=this,null==a?b._titleFormat:a?void 0:b._titleFormat=a},b.prototype._showButtons=!1,b.prototype.showButtons=function(a){var b,c,d;return d=this,d.isBoolean(a)?(d._showButtons=a,c=d.uiElement(),b=$('[data-inner-role="buttons"]',c),a?b.show():b.hide(),void d._updateFooterCssVisible()):d._showButtons},b.prototype._showSpinner=!1,b.prototype.showSpinner=function(a){var b,c,d;return d=this,d.isBoolean(a)?(d._showSpinner=a,b=d.uiElement(),c=$('[data-inner-role="spinner"]',b),a?c.show():c.hide(),void d._updateFooterCssVisible()):d._showSpinner},b.prototype._renderTitle=function(){var a,b,c,d,e,f;return b=this,a=b._$root,f=b.currentYear(),d=b.currentMonth(),c=new moment(new Date(f,d,1)),e=c.format(b.titleFormat()),$(".eba-calendar-title",a).text(e)},b.prototype._renderHeader=function(){var a,b,c;return c=this,a=c.uiElement(),b=c._compiledHeaderTmpl({text:c._weeks}),$('[data-inner-role="header"]',a).html(b)},b.prototype._renderWeeks=function(){var a,b,c,d,e,f,g;return c=this,a=c.uiElement(),b=c.currentDate(),g=c.currentYear(),d=c.currentMonth(),f=c._genWeeksData(g,d),e=c._compiledWeekTmpl({year:g,month:d,value:[b.getFullYear(),b.getMonth(),b.getDate()],weeks:f}),$(".eba-calendar-days",a).remove(),$('[data-inner-role="footer"]',a).before(e)},b.prototype._updateFooterCssVisible=function(){var a,b,c,d,e,f,g,h;return e=this,f=e.showButtons(),g=e.showSpinner(),h=g||f,c=e.uiElement(),d=$('[data-inner-role="spinner"]',c),a=$('[data-inner-role="buttons"]',c),b=$('[data-inner-role="footer"]',c),h?b.show():b.hide(),f?a.show():a.hide(),void(g?d.show():d.hide())},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._renderTitle(),a._renderHeader(),a._renderWeeks(),a._updateFooterCssVisible()},b.prototype._doRealStuff=function(a,b){var c,d,e,f;return f=this,f.enabled()?(b?++f[a]:--f[a],c=f.currentDate(),e=f.currentYear(),d=f.currentMonth(),f._renderTitle(e,d),f._renderWeeks(c,e,d)):void 0},b.prototype.nextMonth=function(){return this._doRealStuff("_currentMonth",!0)},b.prototype.prevMonth=function(){return this._doRealStuff("_currentMonth",!1)},b.prototype.nextYear=function(){return this._doRealStuff("_currentYear",!0)},b.prototype.prevYear=function(){return this._doRealStuff("_currentYear",!1)},b.prototype.pickUp=function(a){var b;if(null!=a)return b=this,void b.currentDate(a)},b.prototype.pickUpToday=function(){return this.pickUp(new Date)},b.prototype._setupEvents=function(a){var b,c;return c=this,b=c.uiElement(),c.onEvent("click",a.onclick),b.on("click",".eba-calendar-monthPrev",function(){return c.prevMonth()}),b.on("click",".eba-calendar-monthNext",function(){return c.nextMonth()}),b.on("click",".eba-calendar-yearPrev",function(){return c.prevYear()}),b.on("click",".eba-calendar-yearNext",function(){return c.nextYear()}),b.on("click",".eba-calendar-date",function(a){var b,d,e,f,g;return c.enabled()&&(b=$(this),f=new moment(b.attr("data-value"),"YYYY-M-D"),d=!b.hasClass("eba-calendar-othermonth"))?(g=f.toDate(),e=c.currentDate(),e.setFullYear(g.getFullYear()),e.setMonth(g.getMonth()),e.setDate(g.getDate()),c.pickUp(e),c.triggerEvent("click",a)):void 0})},b.prototype._init=function(a){var c,d,e,f;return b.__super__._init.call(this,a),d=this,c=a.currentDate?a.currentDate:new Date,d._currentDate=c,d._currentYear=c.getFullYear(),d._currentMonth=c.getMonth(),d._showSpinner=null!=(e=a.showSpinner)?e:!1,d._showButtons=null!=(f=a.showButtons)?f:!1,d._compiledWeekTmpl=d.compileTmpl(d._weekTmpl),d._compiledHeaderTmpl=d.compileTmpl(d._headerTmpl),d._height="100%"},b}(Control),ebaui.web.registerControl("MainView",MainView),MonthView=function(a){function b(){return _ref30=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._monthsTmpl="",b.prototype._compiledMonthsTmpl=$.noop,b.prototype._yearsTmpl="",b.prototype._compiledYearsTmpl=$.noop,b.prototype._months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b.prototype._select=function(a,b){var c,d,e,f,g;return g=this,e=g.uiElement(),c=$(a),f="eba-calendar-menu-selected",c.hasClass(f)?void 0:(d=$(b,e),$("."+f,d).removeClass(f),void c.addClass(f))},b.prototype._renderMonths=function(){var a,b,c;return b=this,a=b.uiElement(),c=b._compiledMonthsTmpl({currentMonth:b.currentMonth(),months:b._months}),$(".eba-calendar-menu-months",a).html(c)},b.prototype._renderYears=function(a){var b,c,d,e,f,g;return e=this,b=e._$root,d=e.currentYear(),c=e.currentMonth(),a||(a=function(){g=[];for(var a=d,b=d+9;b>=d?b>=a:a>=b;b>=d?a++:a--)g.push(a);return g}.apply(this)),f=e._compiledYearsTmpl({value:[d,c,1],years:a}),$(".eba-calendar-menu-years",b).html(f)},b.prototype._render=function(){var a;return a=this,a._renderMonths(),a._renderYears(),a._updateCssVisible()},b.prototype._switchYearRange=function(a){var b,c;return b=this,a=parseInt(a),c=b._getMenuYears(a),b._renderMenu(c,b._currYear,b._currMonth)},b.prototype._init=function(a){var c;return b.__super__._init.call(this,a),c=this,c._currentDate=a.currentDate?a.currentDate:new Date,c._compiledMonthsTmpl=c.compileTmpl(c._monthsTmpl),c._compiledYearsTmpl=c.compileTmpl(c._yearsTmpl),c._height="100%"},b.prototype._setupEvents=function(a){var b,c,d,e,f,g;return d=this,b=d.uiElement(),d.onEvent("apply",a.onapply),d.onEvent("cancel",a.oncancel),g=".eba-calendar-menu-year",e=".eba-calendar-menu-month",f=".eba-calendar-okButton",c=".eba-calendar-cancelButton",b.on("click",".eba-calendar-menu-prevYear",function(){var a;return a=parseInt($(this).attr("data-value")),d._renderYears(a)}),b.on("click",".eba-calendar-menu-nextYear",function(){var a;return a=parseInt($(this).attr("data-value")),d._renderYears(a)}),b.on("click",e,function(){return d._select(this,".eba-calendar-menu-months")}),b.on("click",g,function(){return d._select(this,".eba-calendar-menu-years")}),b.on("click",c,function(a){return d.triggerEvent("cancel",a)}),b.on("click",f,function(a){var c,e,f;return f=".eba-calendar-menu-selected",c=$(".eba-calendar-menu-months ."+f,b),e=$(".eba-calendar-menu-years ."+f,b),d._currentYear=parseInt(e.attr("data-value")),d._currentMonth=parseInt(c.attr("data-value")),d.triggerEvent("apply",a)})},b.prototype.currentYear=function(a){var b;return b=this,null==a?b._currentDate.getFullYear():(b._currentDate.setFullYear(a),b._renderYears())},b.prototype.currentMonth=function(a){var b;return b=this,null==a?b._currentDate.getMonth():(b._currentDate.setMonth(a),b._renderMonths())},b.prototype._currentDate=null,b.prototype.currentDate=function(a){var b;return b=this,b.isDate(a)?(b._currentDate=a,b._renderMonths(),b._renderYears()):b._currentDate},b}(Control),ebaui.web.registerControl("MonthView",MonthView),Calendar=function(a){function b(){return _ref31=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._timeSpinner=null,b.prototype.timeSpinner=function(){return this._timeSpinner},b.prototype._todayButtonText="Today",b.prototype._todayButton=null,b.prototype.todayButton=function(){return this._todayButton},b.prototype._applyButtonText="Done",b.prototype._applyButton=null,b.prototype.applyButton=function(){return this._applyButton},b.prototype._rootCls={disabled:"eba-calendar-disabled",selected:"eba-calendar-selected"},b.prototype._formatInvalidException="The date is invalid, please input a valid date!",b.prototype._updateCssEnabled=function(){var a,b,c;return c=this,a=c._$root,b=c._rootCls.disabled,c.enabled()?a.removeClass(b):a.addClass(b)},b.prototype._showButtons=!1,b.prototype.showButtons=function(a){var b;return b=this,b.isBoolean(a)?(b._showButtons=a,b._mainView.showButtons(a),b._todayButton?void 0:b._initButtons()):b._showButtons},b.prototype._showSpinner=!1,b.prototype.showSpinner=function(a){var b;return b=this,b.isBoolean(a)?(b._showSpinner=a,b._mainView.showSpinner(a),null==b._timeSpinner&&a?b._initSpinner():void 0):b._showSpinner},b.prototype.enabled=function(a){var b;return b=this,b.isBoolean(a)?(b._enabled=a,b._mainView.enabled(a),b._monthView.enabled(a),b._updateCssEnabled()):b._enabled},b.prototype._toggled=!0,b.prototype._toggleViews=function(){var a,b,c,d;return b=this,a=b._mainView,c=b._monthView,d=b._toggled,d?(a.visible(!1),c.visible(!0)):(a.visible(!0),c.visible(!1)),b._toggled=!d},b.prototype._setupEvents=function(a){var b,c,d,e;return d=this,b=d.uiElement(),d.onEvent("click",a.onclick),b.on("click",".eba-calendar-header",function(){return d._toggleViews()}),c=d._mainView,e=d._monthView,c.onEvent("click",function(a,b){var c;return c=a.currentDate().clone(),d._setValue(c,!0,b)}),e.onEvent("apply",function(a){var b;return b=d.value().clone(),b.setFullYear(a.currentYear()),b.setMonth(a.currentMonth()),b.setDate(1),c.currentDate(b),d._toggleViews()}),e.onEvent("cancel",function(){var a;return a=d.value().clone(),e.currentDate(a),d._toggleViews()})},b.prototype._initSpinner=function(){var a,b,c,d,e,f;return d=this,e=ebaui.web,c=d._mainView.uiElement(),a=$('[data-inner-role="spinner"]',c),b=$("input",a),f=new e.TimeSpinner(b,{position:"",width:120,value:d.value().clone()}),f.onEvent("change",function(a,b){var c,e;return e=f.value(),c=d.value().clone(),c.setHours(e.getHours()),c.setMinutes(e.getMinutes()),d._setValue(c,!0,b)}),d._timeSpinner=f},b.prototype._initButtons=function(){var a,b,c,d,e,f,g,h;return f=this,g=ebaui.web,e=f._mainView,c=e.uiElement(),a=$('[data-inner-role="buttons"]',c),b=$('[data-inner-role="today"]',a),h=new g.Button(b,{text:f._todayButtonText}),b=$('[data-inner-role="apply"]',a),d=new g.Button(b,{text:f._applyButtonText}),h.onEvent("click",function(a,b){return e.pickUpToday(),f._setValue(e.currentDate(),!0,b)}),d.onEvent("click",function(){}),f._todayButton=h,f._applyButton=d},b.prototype._init=function(a){var c,d,e,f,g,h,i,j,k,l,m;return b.__super__._init.call(this,a),f=this,c=f.uiElement(),f._width=null!=(j=a.width)?j:220,f._height=null!=(k=a.height)?k:0,f._showSpinner=null!=(l=a.showSpinner)?l:!1,f._showButtons=null!=(m=a.showButtons)?m:!1,g=new moment(a.value),d=null!=a.value&&g.isValid()?g.toDate():new Date,i=ebaui.web,e={currentDate:d.clone(),position:"",showSpinner:f._showSpinner,showButtons:f._showButtons},h={position:"",currentDate:d.clone(),visible:!1},f._mainView=new i.MainView($('[data-inner-role="mainview"]',c),e),f._monthView=new i.MonthView($('[data-inner-role="monthview"]',c),h),f._showSpinner&&f._initSpinner(a),f._showButtons&&f._initButtons(a),f._value=d,f._currYear=d.getFullYear(),f._currMonth=d.getMonth()},b.prototype._setValue=function(a,b,c){var d,e;if(null==b&&(b=!1),null==c&&(c={}),d=this,e=new moment(a),!e.isValid())throw d._formatInvalidException;return a=e.toDate(),d._value&&d._value.getTime()===a.getTime()?void 0:(d._value=a.clone(),d._mainView.currentDate(a.clone()),d._monthView.currentDate(a.clone()),d.showSpinner()&&d._timeSpinner.value(a.clone()),void(b===!0&&d.triggerEvent("change",c)))},b.prototype.data=function(a){var b;return b=this,a?b._setValue(a):b._value},b.prototype.value=function(a){var b;return b=this,a?b._setValue(a):b._value},b.prototype.reset=function(){var a;return b.__super__.reset.call(this),a=this,a.value(new Date)},b}(FormField),ebaui.web.registerFormControl("Calendar",Calendar),DateTimePicker=function(a){function b(){return _ref32=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._showSpinner=!1,b.prototype.showSpinner=function(a){var b;return b=this,b.isBoolean(a)?(b._showSpinner=a,b._panelContent.showSpinner(a)):b._showSpinner},b.prototype._showButtons=!0,b.prototype.showButtons=function(a){var b;return b=this,b.isBoolean(a)?(b._showButtons=a,b._panelContent.showButtons(a)):b._showButtons},b.prototype._format="YYYY-MM-DD HH:mm",b.prototype.format=function(a){var b;return b=this,null==a?b._format:(b._format=a,b._text=mo.format(a),b._updateAttrText())},b.prototype._formatInvalidException="The date is invalid, please input a valid date!",b.prototype._setValue=function(a,b,c,d,e){var f,g;if(null==b&&(b=!0),null==c&&(c=!0),null==d&&(d=!1),null==e&&(e={}),f=this,g=new moment(a),!g.isValid())throw f._formatInvalidException;return f._value&&a.getTime()===f._value.getTime()?void 0:(f._value=a,c===!0&&f._panelContent.value(a.clone()),f._text=g.format(f.format()),b===!0&&f._updateAttrText(),d===!0?f.triggerEvent("change",e):void 0)},b.prototype._initPanelContent=function(){var a,b,c,d,e,f,g;return c=this,d=ebaui.web,e=c._panel,a=e.uiElement(),g=c.showSpinner(),f=c.showButtons(),b=new d.Calendar($("input",a),{width:260,value:c.value().clone(),showSpinner:g,showButtons:f,position:""}),b.onEvent("change",function(a,b){var d;return d=a.value().clone(),c._setValue(d,!0,!1,!0,b)}),b._todayButton.onEvent("click",function(){return e.close()}),b._applyButton.onEvent("click",function(){return e.close()}),c._panelContent=b},b.prototype._setupEvents=function(a){var c;return b.__super__._setupEvents.call(this,a),c=this,c.onEvent("change",a.onchange)},b.prototype._init=function(a){var c,d,e;return b.__super__._init.call(this,a),d=this,e=new moment(a.value),c=null!=a.value&&e.isValid()?e.toDate():new Date,d._value=c,null!=a.format&&(d._format=a.format),null!=a.showSpinner&&(d._showSpinner=a.showSpinner),null!=a.showButtons&&(d._showButtons=a.showButtons),e=new moment(c),d._text=e.format(d._format),d._initPanel(),d._initPanelContent()
},b.prototype.reset=function(){return b.__super__.reset.call(this),this.value(new Date)},b}(Combo),ebaui.web.registerFormControl("DateTimePicker",DateTimePicker),FileUploader=function(a){function b(){return _ref33=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._uploader=null,b.prototype._uploadUrlEmptyException="the uploadUrl property can not be null or empty!",b.prototype._updateAttrBtnText=function(){var a,b,c;return b=this,c=b.buttonText(),a=b.uiElement(),$(".eba-buttonedit-button",a).text(c)},b.prototype._render=function(){return b.__super__._render.call(this),this._updateAttrBtnText()},b.prototype._setupEvents=function(a){var b;return b=this,b.onEvent("start",a.onstart),b.onEvent("progress",a.onprogress),b.onEvent("error",a.onerror),b.onEvent("succ",a.onsucc),b.onEvent("complete",a.oncomplete)},b.prototype._getEvtHandlers=function(){var a,b,c;return b=this,c=b._uploader,a={upload_start_handler:function(a){return c.setButtonDisabled(!0),b.triggerEvent("start",{file:a})},upload_progress_handler:function(a,c,d){return b.triggerEvent("progress",{file:a,bytesComplete:c,totalBytes:d})},upload_error_handler:function(a,d,e){return c.setButtonDisabled(!1),b.triggerEvent("error",{file:a,errorMsg:e})},upload_success_handler:function(a,d,e){return c.setButtonDisabled(!1),b.triggerEvent("succ",{file:a,serverData:d,serverResponse:e})},upload_complete_handler:function(a){return b.triggerEvent("complete",{file:a})},file_dialog_start_handler:function(){return c.cancelQueue()},file_queued_handler:function(a){return b._$formInput.val(a.name)},file_queue_error_handler:function(a,b){switch(b){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:}},file_dialog_complete_handler:function(){return b.uploadOnSelect()?c.startUpload():void 0}}},b.prototype._swf={use_query_string:!1,requeue_on_error:!0,http_success:[201,202],assume_success_timeout:0,file_types_description:"",debug:!1,debug_handler:$.noop,prevent_swf_caching:!1,preserve_relative_urls:!1,button_text:"",button_image_url:"",button_text:"",button_text_style:"",button_text_left_padding:3,button_text_top_padding:2,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILES,button_disabled:!1,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT},b.prototype._init=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(i=this,i._uploadUrl=null!=(p=a.uploadUrl)?p:"",!i._uploadUrl)throw i._uploadUrlEmptyException;b.__super__._init.call(this,a),c=i.uiElement(),h=ebaui.web.baseUrl,i._width=null!=(q=a.width)?q:150,i._height=null!=(r=a.height)?r:21,i._extraParams=null!=(s=a.extraParams)?s:{},i._fileType=null!=(t=a.fileType)?t:"*.jpg;*.gif;*.png",i._fileSizeLimit=null!=(u=a.fileSizeLimit)?u:"10MB",i._filePostName=null!=(v=a.filePostName)?v:"ebauiUploadedFiles",a.buttonText&&(i._buttonText=a.buttonText),i._$formInput=$("input",c),e=i.controlID()+"$span",k=c.offset(),m='<div><span id="'+e+"\" \n        style=\"position:'absolute';\n                top:"+k.top+"px;\n                left:"+k.left+"px;\n                width:"+c.width()+"px;\n                height:"+c.height()+'px;"></span>\n</div>',d=$(m).appendTo(document.body),f={button_placeholder_id:e,flash_url:""+h+"lib/SWFUpload/Flash/swfupload.swf",post_params:i.extraParams(),file_post_name:i._filePostName,file_types:i._fileType,file_size_limit:i._fileSizeLimit,upload_url:i._uploadUrl,file_queue_limit:0,file_upload_limit:0,button_width:"100%",button_height:"100%"},g=i._getEvtHandlers(),l=$.extend(i._swf,f,g),n=i._uploader=new SWFUpload(l),w=i._extraParams,x=[];for(j in w)o=w[j],x.push(n.addPostParam(j,o));return x},b.prototype.startUpload=function(a){var b;return b=this._uploader,b?b.startUpload(a):void 0},b.prototype.addPostParam=function(a,b){var c;return c=this._uploader,c&&a&&b?c.addPostParam(a,b):void 0},b.prototype._uploadUrl="",b.prototype.uploadUrl=function(a){var b;return b=this,b.isString(a)?b._uploadUrl=a:b._uploadUrl},b.prototype._buttonText="...",b.prototype.buttonText=function(a){var b,c;return b=this,b.isString(a)?(b._buttonText=a,b._updateAttrBtnText(),c=b._uploader,c?c.setButtonText(a):void 0):b._buttonText},b.prototype._uploadOnSelect=!1,b.prototype.uploadOnSelect=function(a){var b;return b=this,b.isBoolean(a)?b._uploadOnSelect=a:b._uploadOnSelect},b.prototype._fileType="*.jpg;*.gif;*.png",b.prototype.fileType=function(a){var b,c;return b=this,b.isString(a)?(b._fileType=a,c=b._uploader,c?c.setFileTypes(a):void 0):b._fileType},b.prototype._fileSizeLimit="10MB",b.prototype.fileSizeLimit=function(a){var b,c;return b=this,b.isString(a)?(b._fileSizeLimit=a,c=b._uploader,c?c.setFileSizeLimit(a):void 0):b._fileSizeLimit},b.prototype._filePostName="ebauiUploadedFiles",b.prototype.filePostName=function(a){var b,c;return b=this,b.isString(a)?(b._filePostName=a,c=b._uploader,c?c.setFilePostName(a):void 0):b._filePostName},b.prototype._extraParams={},b.prototype.extraParams=function(a){var b,c,d,e,f;if(b=this,null==a)return b._extraParams;if(e=b._uploader,d=b._extraParams,e){if(d)for(c in d)f=d[c],e.removePostParam(c);if(a)for(c in a)f=a[c],e.addPostParam(c,f)}return b._extraParams=a},b}(FormField),ebaui.web.registerFormControl("FileUploader",FileUploader),ns=ebaui,vexDialog=vex.dialog,ns.ajax=jQuery.ajax,ns.httpGet=jQuery.get,ns.httpPost=jQuery.post,ns.mask=function(a,b,c,d){return b=b?b:"",$(a,d).mask(b,c)},ns.unmask=function(a,b){return $(a,b).unmask()},ns.isMasked=function(a,b){return $(a,b).isMasked()},ns.alert=function(a){return vexDialog.alert({title:"",iconCls:"icon-warning-sign",className:"vex-theme-default",message:a})},ns.confirm=function(a){var b;return b=$.extend({},{title:"",iconCls:"icon-question-sign",className:"vex-theme-default",buttons:[vexDialog.buttons.NO,vexDialog.buttons.YES]},a),vexDialog.confirm(b)},ns.prompt=function(a){return a=$.extend({},{title:"",className:"vex-theme-default",buttons:[vexDialog.buttons.NO,vexDialog.buttons.YES]},a),vexDialog.prompt(a)},ns.win=function(a){var b,c,d,e,f,g;if(a&&a.url&&!a.content)return f=a.url?!0:!1,e=f?'<iframe src="'+a.url+'" style="width:100%;" frameborder="0" scrolling="auto"></iframe>':$(a.content).html(),g='<div class="vex-dialog-form" style="height:100%;">\n    <div class="vex-dialog-title">\n        <i class="'+a.iconCls+'"></i>'+a.title+'\n    </div>\n    <div class="vex-c"></div>\n    <div class="vex-close"></div>\n</div>',d={title:"",content:g,width:800,height:600,className:"vex-theme-default",showCloseButton:!0,overlayClosesOnClick:!1,id:"dialog-win-draggable",beforeclose:$.noop,afterclose:$.noop},a=$.extend(d,a),c=vex.open(a),b=c.parent(),b.css({"padding-top":"50px","padding-bottom":"0"}),c.css({left:.5*$(window).width()-.5*a.width,position:"absolute",border:"1px #eee solid",width:a.width,height:a.height}),$("#"+d.id).draggable({cursor:"move",distance:10,containment:"window",iframeFix:!0,start:function(){return $(this).hide()},helper:function(){return'<div style="width:'+a.width+"px;height:"+a.height+'px;z-index:1001;background:black;opacity:0.4;"></div>'},stop:function(a,b){return $(this).css({top:b.position.top,left:b.position.left}),$(this).show()}}),setTimeout(function(){var a;return $("div.vex-c",b).replaceWith(e),f?(a=$(".vex-dialog-title",c).outerHeight(),$("iframe",c).css("height",c.height()-a)):void 0},100)},ComboBox=function(a){function b(){return _ref34=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._panelContent=null,b.prototype._initPanelContent=function(){var a,b,c,d;return c=this,ns=ebaui.web,d=c._panel,a=d.uiElement(),b=new ns.ListBox($("input",a),{position:null,width:c.width()-24,height:0,idField:c.idField(),textField:c.textField(),valueField:c.valueField(),dataSource:[],onitemclick:function(a,b){var e;return e=a.selectedItems(),c.data(e,!0,!1,!0,b),d.close()}}),c._panelContent=b},b.prototype._finishLoading=function(){var a,b;return b=this,a=b._panelContent,a.dataSource(b.items()),b._reposition()},b.prototype._loadData=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==b&&(b=!1),j=this,d=j.dataSource(),k=null!=(p=d.data)?p:{},g=j.filter(),e=j.filterField(),h=j.isUsingRemoteData(d),m=function(a,b){var c,d,e,f,g,h,i,k;if(a&&(d=j.value(),null!=d)){for(f=j.textField(),g=j.valueField(),k=[],c=h=0,i=b.length;i>h;c=++h){if(e=b[c],e[g]===d){j._text=e[f],j._data=e,j._updateAttrText(),j._panelContent.data(e);break}k.push(void 0)}return k}},j._items=[],h)l=d.url,k=j.isFunc(k)?k():null!=k?k:{},a&&(k[e]=a),j._beforeLoading(),$.post(l,k,function(a){return j._items=a,j._finishLoading(),m(b,a)},"json");else{if(j._beforeLoading(),a){for(c=[],f=n=0,o=d.length;o>n;f=++n)i=d[f],g(i,a,e)&&c.push(i);j._items=c}else j._items=d;j._finishLoading(),m(b,j._items)}return void 0},b.prototype._setupEvents=function(a){var c,d,e;return b.__super__._setupEvents.call(this,a),e=this,c=e.uiElement(),d=".eba-buttonedit-input",e.onEvent("enter",a.onenter),e.onEvent("change",a.onchange),c.on("keydown",d,function(a){var b,c;if(e.readonly())return a.preventDefault();if(b=e.enabled()&&e.allowInput(),!b)return a.preventDefault();switch(c=a.which){case 13:case 38:case 40:b=!0}return b?void 0:a.preventDefault()}),void c.on("keyup",d,function(a){var b,c,d,f,g,h,i,j;if(e.readonly()||!e.enabled())return a.preventDefault();switch(b=e._$formInput,f=e._panelContent,j=e._panel,c=a.which,g=function(){return f.selectNext()},i=function(){return f.selectPrev()},h=function(a,b){return j.visible()?(e.data(f.data(),!0,!1,!0,b),void j.close()):e.triggerEvent("enter",b)},d=function(){var a;return a=b.val(),e.text(a),e._loadData(a),j.open()},c){case 13:return h(e,a);case 38:return i(e,a);case 40:return g(e,a);default:return d(e,a)}})},b.prototype._render=function(){var a;return b.__super__._render.call(this),a=this,a._loadData(null,!0)},b.prototype._init=function(a){var c,d,e,f,g,h;return b.__super__._init.call(this,a),d=this,c=d._$root,d._dataSource=null!=(e=a.dataSource)?e:[],d._idField=null!=(f=a.idField)?f:"id",d._textField=null!=(g=a.textField)?g:"text",d._valueField=null!=(h=a.valueField)?h:"value",d._filterField=null!=a.filterField?a.filterField:d._textField,c.addClass("eba-combobox eba-popupedit"),d._initPanel(),void d._initPanelContent()},b.prototype._items=[],b.prototype.items=function(){return this._items},b.prototype._cleanUp=function(){var a;return a=this,a._text="",a._value=null,a._data=null,a._updateAttrText()},b.prototype.value=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q;if(null==b&&(b=!0),null==c&&(c=!0),null==d&&(d=!1),null==e&&(e={}),k=this,null==a)return k._value;if(k.isArray(a)||(a=[a]),0===a.length)return k._cleanUp();if(n=a[0],k._value!==n){for(i=-1,f=null,l="",m=k.textField(),o=k.valueField(),j=k.items(),h=p=0,q=j.length;q>p;h=++p)if(g=j[h],g[o]===n){i=h,f=g,l=g[m];break}if(-1!==i)return k._data=f,k._text=l,k._value=n,b===!0&&k._updateAttrText(),c===!0&&k._panelContent.data(f),d===!0?k.triggerEvent("change",e):void 0}},b.prototype.data=function(a,b,c,d,e){var f,g,h,i,j;return null==b&&(b=!0),null==c&&(c=!0),null==d&&(d=!1),null==e&&(e={}),h=this,null==a?h._data:(h.isArray(a)||(a=[a]),0===a.length?h._cleanUp():(f=a[0],g=h.items(),__indexOf.call(g,f)<0||(i=h.textField(),j=h.valueField(),h._value===f[j])?void 0:(h._data=f,h._text=f[i],h._value=f[j],b===!0&&h._updateAttrText(),c===!0&&h._panelContent.data(f),d===!0?h.triggerEvent("change",e):void 0)))},b.prototype._filterField="text",b.prototype.filterField=function(a){var b;return b=this,b.isString(a)?b._filterField=a:b._filterField},b.prototype._dataSource={},b.prototype.dataSource=function(a){var b;return b=this,null==a?b._dataSource:b._dataSource=a},b.prototype._filter=function(a,b,c){return a[c].indexOf(b)>-1},b.prototype.filter=function(a){var b;return b=this,b.isFunc(a)?b._filter=a:b._filter},b}(Combo),ebaui.web.registerFormControl("ComboBox",ComboBox),ComboList=function(a){function b(){return _ref35=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._updateCssEnabled=function(){var a,b,c,d,e,f;return f=this,b=f._$root,a=f._$formInput,c=f._rootCls,d=c.disabled,e=c.focused,f.enabled()?b.removeClass(d):b.removeClass(e).addClass(d)},b.prototype._updateAttrText=function(a,b){var c,d,e;return null==a&&(a=[]),null==b&&(b=!0),d=this,c=d._$formInput,0===a.length?(b&&c.val(""),void d._showPlaceHolder()):(e=a.join(";"),b&&c.val(e),d.isEmpty(e)?d._showPlaceHolder():d._hidePlaceHolder())},b.prototype._gridConfig=null,b.prototype.gridConfig=function(a){var b;return b=this,null==a?b._gridConfig:b._gridConfig=a},b.prototype._initPanelContent=function(){var a,b,c,d,e,f,g,h,i,j,k;return e=this,ns=ebaui.web,i=e._panel,a=i.uiElement(),c=e.value(),j=e.textField(),k=e.valueField(),h=function(a,b){return e.data(a.selectedItems(),!1,!0,b)},g=function(a,b){return e.data(a.selectedItems(),!1,!0,b)},d=function(a){var b,d,e,f,g,h,i,j;if(c){for(b=a.items(),j=[],d=h=0,i=c.length;i>h;d=++h)g=c[d],j.push(function(){var c,d,h;for(h=[],e=c=0,d=b.length;d>c;e=++c)f=b[e],h.push(f[k]===g?a.setSelection(e):void 0);return h}());return j}},b=e.gridConfig(),b.onSelectRow=h,b.onSelectAll=g,b.loadComplete=d,$.each(b.colModel,function(a,b){return b.width?void 0:b.width=150}),b.width||(b.width=400),b.height||(b.height=120),f=new ns.MiniGrid($("input",a),b),e._panelContent=f},b.prototype._setupEvents=function(a){var c;return b.__super__._setupEvents.call(this,a),c=this,c.onEvent("change",a.onchange)},b.prototype._init=function(a){var c,d,e,f,g,h;return b.__super__._init.call(this,a),e=this,c=e._$root,e._idField=null!=(f=a.idField)?f:"id",e._textField=null!=(g=a.textField)?g:"text",e._valueField=null!=(h=a.valueField)?h:"value",d={autowidth:!0,width:400,height:120,url:"",data:[],datatype:"local",postData:[],colModel:[{name:"id",label:"ID",width:150},{name:"text",label:"Text",width:150}],multiselect:!0,onSelectRow:$.noop,onSelectAll:$.noop,loadComplete:$.noop},e._gridConfig=null!=a.grid?$.extend(d,a.grid):d,c.addClass("eba-combobox eba-popupedit").attr("data-role","combolist"),e._initPanel(),e._initPanelContent()},b.prototype._render=function(){return b.__super__._render.call(this),this._$formInput.prop("readonly",!0)},b.prototype.dataSource=function(a){var b,c;return c=this,a?(b=c._panelContent,b.setGridParam(a),b.reloadGrid()):c._gridConfig},b.prototype.text=function(){return this._text},b.prototype._cleanUp=function(){var a,b;return b=this,b._data=[],b._text=[],b._value=[],a=b._panelContent,a.resetSelection(),b._updateAttrText([])},b.prototype._setValue=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(null==b&&(b=!0),null==c&&(c=!0),null==d&&(d=!1),null==e&&(e={}),n=this,n.isArray(a)||(a=[a]),0===a.length)return n._value&&n._value.length>0&&d===!0&&n.triggerEvent("change",e),void n._cleanUp();for(j=[],r=[],p=[],f=[],h=n._panelContent,q=n.textField(),s=n.valueField(),i=h.items(),l=function(a,b,c){return c?a===b:a===b[s]},m=u=0,x=a.length;x>u;m=++u)for(t=a[m],o=v=0,y=i.length;y>v;o=++v)g=i[o],l(g[s],t,b)&&(f.push(g),r.push(g[s]),p.push(g[q]),j.push(o));if(!n._value||n._value.join("")!==r.join("")){if(n._data=f,n._text=p,n._value=r,c)for(h.resetSelection(),k=w=0,z=j.length;z>w;k=++w)o=j[k],h.setSelection(o);return n._updateAttrText(p),void(d===!0&&n.triggerEvent("change",e))}},b.prototype.value=function(a,b,c,d){var e;return null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),e=this,a?e._setValue(a,!0,b,c,d):e._value},b.prototype.data=function(a,b,c,d){var e;return null==b&&(b=!0),null==c&&(c=!1),null==d&&(d={}),e=this,a?e._setValue(a,!1,b,c,d):e._data},b}(Combo),ebaui.web.registerFormControl("ComboList",ComboList),Tab=function(a){function b(){return _ref36=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._headerTmpl="",b.prototype._$header=null,b.prototype._contentTmpl="",b.prototype._$content=null,b.prototype._updateCssIcon=function(){var a,b,c;return c=this,b=c.iconCls(),a="eba-tab-icon ",b&&(a+=b),$(".eba-tab-icon",c._$header).attr("class",a)},b.prototype._updateCssClosable=function(){var a,b,c,d,e;return d=this,c=d.closable(),b=d.headerDom(),a=$("span.eba-tab-close",b),e=a.size(),!c&&e>0?a.remove():void 0},b.prototype._updateAttrTitle=function(){var a;return a=this,$(".eba-tab-text",a._$header).text(a.title())},b.prototype.headerDom=function(){return this._$header},b.prototype.contentDom=function(){return this._$content},b.prototype._title="",b.prototype.title=function(a){var b;return b=this,null==a?b._title:(b._title=a,b._updateAttrTitle())},b.prototype._url="",b.prototype.url=function(a){var b;return b=this,null==a?b._url:(b._url=a,b.refresh())},b.prototype._closable=!0,b.prototype.closable=function(a){var b;return b=this,null==a?b._closable:(b._closable=a,b._updateCssClosable())},b.prototype._iconCls="",b.prototype.iconCls=function(a){var b;return b=this,null==a?b._iconCls:(b._iconCls=a,void b._updateCssIcon())},b.prototype._isActived=!1,b.prototype.isActived=function(a){var b,c,d,e;return e=this,e.isClosed()?void 0:"boolean"!=typeof a?e._isActived:(d="eba-tab-active",c=e._$header,b=e._$content,e._isActived=a,void(a?(c.addClass(d),b.show()):(c.removeClass(d),b.hide())))},b.prototype.refresh=function(){var a;return a=this,a.isClosed()},b.prototype._closed=!1,b.prototype.isClosed=function(){return this._closed},b.prototype.close=function(){var a;return a=this,$("iframe",a._$content).off("load"),a._closed=!0,a._$header.remove(),a._$content.remove(),delete a._$header,delete a._$content},b.prototype._render=function(){var a;return a=this,a._updateAttrTitle(),a._updateCssClosable(),a._updateCssIcon()},b.prototype._init=function(a){var b,c,d,e,f,g,h;return c=this,c._iconCls=null!=(d=a.iconCls)?d:"",c._url=null!=(e=a.url)?e:"",c._title=null!=(f=a.title)?f:c._url,c._closable=null!=(g=a.closable)?g:!0,c._isActived=null!=(h=a.isActived)?h:!1,c._$header=$(c._headerTmpl),b=c._contentTmpl.replace("{0}",c.url()),c._$content=$(b)},b.prototype._setupEvents=function(a){var b,c,d;return d=this,c=d._$header,b=d._$content,d.onEvent("load",a.onload),c.on("mouseenter",function(){var a;return a=$("span.eba-tab-close",c),d.closable()&&0===a.size()?(a=$('<span class="eba-tab-close"></span>'),c.append(a)):void 0}),c.on("mouseleave",function(){var a;return a=$("span.eba-tab-close",c),a.remove()}),$("iframe",b).on("load",function(a){var b,c;try{b=this.contentDocument||this.contentWindow.document,b&&$(b).on("click",function(){var a,c;return c=b.defaultView,a=c.top,c&&a!==c?$(a.document).trigger("click"):void 0})}catch(e){c=e}return d.triggerEvent("load",a)})},b}(Control),ebaui.web.registerControl("Tab",Tab),Tabs=function(a){function b(){return _ref37=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._$contentRegion=null,b.prototype._setupEvents=function(){var a,b;return b=this,a=b.uiElement(),a.on("click",".eba-tab",function(){var c;return c=$(".eba-tab",a).index(this),-1!==c?b.activateTab(c):void 0}),a.on("click",".eba-tab-close",function(){var c;return c=$(".eba-tab",a).index($(this).parent()),-1!==c?b.closeTab(c):void 0})},b.prototype._init=function(a){var c,d,e,f,g;return b.__super__._init.call(this,a),e=this,null!=a.home&&(e._home=a.home),null!=a.contentRegion&&(e._contentRegion=a.contentRegion),e._$contentRegion=$(e._contentRegion),c=e._$contentRegion,0===$("ul",c).size()&&c.append("<ul></ul>"),f=e._home,d=f&&f.url?!0:!1,d?(f.title=null!=(g=f.title)?g:f.url,e.addTab(f)):void 0},b.prototype._tabs=[],b.prototype._homeTab=null,b.prototype._currentTab=null,b.prototype.currentTab=function(a){var b,c,d;return d=this,null==a?d._currentTab:(b=d._currentTab,c=d.getTab(a),b&&!b.isClosed()?b.isActived(!1):d._currentTab=null,void(c&&(c.isActived(!0),d._currentTab=c)))},b.prototype.addTab=function(a){var b,c,d;if(null!=a&&(c=this,d=c.indexOf(a.url),-1===d))return d=c._tabs.length,b=new Tab(null,a),c._tabs.push(b),$("ul",c._$root).append(b.headerDom()),$("ul",c._$contentRegion).append(b.contentDom()),void c.activateTab(d)},b.prototype.closeTab=function(a){var b,c,d,e,f,g;return d=this,f=d.indexOf(a),-1!==f?(e=d._tabs,c=0===f?1:f-1>0?f-1:0,c>e.length&&(c=e.length-1),g=e[f],b=d.currentTab(),b===g&&d.activateTab(c),g.close(),g=null,e.splice(f,1),d._tabs=e):void 0},b.prototype.closeAllTab=function(){var a,b,c,d,e,f,g,h,i,j,k;for(d=this,c=[],f=[],e=d._tabs,a=h=0,j=e.length;j>h;a=++h)b=e[a],b=e[a],b.closable()?f.push(b):c.push(b);for(a=i=0,k=f.length;k>i;a=++i)g=f[a],g.close();return d._tabs=c,void(c.length>0&&d.activateTab(0))},b.prototype.closeOtherTabs=function(a){var b,c,d,e,f,g,h,i;if(e=this,f=e.indexOf(a),-1!==f){for(e.activateTab(f),g=e._tabs,c=h=0,i=g.length;i>h;c=++h)d=g[c],f!==c&&d.close();return b=e.getTab(f),void(e._tabs=[b])}},b.prototype.getTab=function(a){var b,c;return b=this,c=b.indexOf(a),-1===c?null:b._tabs[c]},b.prototype.indexOf=function(a){var b,c,d,e,f,g,h,i,j;if(e=this,h=e._tabs,f=h.length,e.isNull(a)||0===f)return-1;if(g=-1,e.isNumber(a))return g=parseInt(a),(isNaN(g)||0>g||g>=f)&&(g=-1),g;if(b=null,e.isString(a))b=function(b){return b.url()===a};else{if(!e.isFunc(a))return-1;b=a}for(c=i=0,j=h.length;j>i;c=++i)if(d=h[c],b(d)){g=c;break}return g},b.prototype.activateTab=function(a){var b,c;return b=this,c=b.indexOf(a),-1!==c?b.currentTab(c):void 0},b.prototype.refreshTab=function(a){var b,c,d;return c=this,c.isNull(a)?(b=c.currentTab(),void(b&&b.refresh())):(d=c.getTab(a),d?d.refresh():void 0)},b.prototype.resizeContent=function(a){var b,c;if(a&&(c=this,null!=a.width))return b=$("iframe",c._$contentRegion),b.width(a.width),b.height(a.height)},b.prototype._contentRegion=".eba-tabs-body",b.prototype.contentRegion=function(){return this._contentRegion},b.prototype._home={title:"",url:"",closable:!1},b.prototype.home=function(){return this._home},b}(Control),ebaui.web.registerControl("Tabs",Tabs),Form=function(a){function b(){return _ref38=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype._formControls=function(){return ebaui.web.formControls},b.prototype._ctrlJQSelector='[data-ns="web.form"]',b.prototype._isValid=!0,b.prototype._eachField=function(a){var b,c,d,e,f;for(c=this.fields(),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(a(b));return f},b.prototype._render=function(){var a,b;return b=this,a=b.id(),b.isEmpty(a)||b._$root.attr("id",a),b._updateCssVisible()},b.prototype._parseUi=function(a){return $(a)},b.prototype._setupEvents=function(){var a,b,c,d,e;return e=this,b=e._$root,c=e._ctrlJQSelector,a=$(c,b),d=a.size(),b.on("keyup",function(e){var f,g,h,i,j,k,l,m,n,o,p;if(f=$(e.target).parents(c,b).eq(0),j=a.index(f),h=13===e.which,g=ebaui.get(f),null!=g&&g.enterAsTab&&g.enterAsTab()&&h){if(m=null,j+1===d-1)k=ebaui.get(a.eq(j+1)),l=k&&k.focusable&&k.focusable(),l&&(m=k);else for(i=n=o=j+1,p=d-1;p>=o?p>=n:n>=p;i=p>=o?++n:--n)if(k=ebaui.get(a.eq(i)),l=k&&k.focusable&&k.focusable()){m=k;break}return null!=m?(g.focused(!1),m.focused(!0)):void 0}})},b.prototype._init=function(a){var c,d,e,f,g,h,i,j,k,l;return b.__super__._init.call(this,a),i=this,i._action=null!=(j=a.action)?j:"",i._method=null!=(k=a.method)?k:"GET",i._acceptCharset=null!=(l=a.acceptCharset)?l:"",a.enctype&&(i._enctype=a.enctype),d=i._$root,e=i._ctrlJQSelector,f=i._formControls(),c=$(e,d),h=c.size(),g=[],c.each(function(a,b){var c;return c=ebaui.get(b),c&&c.value?g.push(c):void 0}),i._fields=g},b.prototype._fields=[],b.prototype.fields=function(){return this._fields},b.prototype.elements=function(){return this._fields},b.prototype.data=function(a){var b,c;return c=this,a?(b=c.isString(a)?ebaui.fromJSON(a):a,void c._eachField(function(a){var c,d;return d=a.name(),c=b[d],c?a.data(c):void 0})):(b={},c._eachField(function(c){var d;if(c.data)return d=c.name(),a=c.data(),b[d]=a}),b)},b.prototype.value=function(a){var b,c;return c=this,a?(c.isString(a)&&(a=ebaui.fromJSON(a)),void c._eachField(function(b){var c,d;return c=b.name(),d=a[c],d?b.value(d):void 0})):(b={},c._eachField(function(a){var d,e;if(a.value&&(d=a.name()))return e=a.value(),a.checked?void(a.checked&&a.checked()&&(b[d]=e)):void(b[d]=c.isArray(e)?e.join(","):e)}),b)},b.prototype._action="",b.prototype.action=function(a){var b;return b=this,a=$.trim(a),a.length>0?b._action=a:b._action},b.prototype._method="GET",b.prototype.method=function(a){var b;return b=this,/get|post/i.test(a)?b._method=a.toUpperCase():b._method},b.prototype._acceptCharset="uft-8",b.prototype.acceptCharset=function(a){var b;return b=this,a=$.trim(a),a.length>0?b._acceptCharset=a:b._acceptCharset},b.prototype._enctype="application/x-www-form-urlencoded",b.prototype.enctype=function(a){var b;return b=this,a=$.trim(a),a.length>0?b._enctype=a:b._enctype},b.prototype.validate=function(){var a,b,c,d,e,f,g,h;if(f=this,b=f.fields(),0===b.length)return!0;if(e=b.length,d=b[0].validate(),e>1)for(c=g=0,h=b.length;h>g;c=++g)a=b[c],d=b[c].validate()&&d;return f._isValid=d,d},b.prototype.reset=function(){return this._eachField(function(a){return a.reset?a.reset():void 0})},b.prototype.submit=function(a){var b,c,d,e,f;return e=this,b=e.action(),d="GET"===e.method(),f=e.value(),a&&a.data&&(f=$.extend(f,a.data),delete a.data),c=$.extend({type:d?"GET":"POST",url:b,data:f},a),$.ajax(c)},b}(Control),ebaui.web.registerControl("Form",Form)}).call(this);